/*! NIIS 2016-05-09 */

$(function(){window.addEventListener("popstate",function(){var a=history.state;if(null!=a){var b=document.querySelector("section"),c=angular.element(b).scope();c.$apply(function(){c.changePage(a.pageIndex,1)})}}),location.search.length>0&&setTimeout(function(){history.go(-1)},10)}),angular.module("MyApp",["PageM","cfp.hotkeys"]).controller("MyController",["$scope","PageProvider","$http","hotkeys",function(a,b,c,d){a.PM=b,a.TM={},a.VM={},a.VM.Vaccine="",a.VM.VaccineIDs="",a.VM.AN="",a.VM.CountyAry=[{I:"0",N:"全部縣市"}],a.VM.SelectCounty="0",a.VM.TownAry=[{I:"0",N:"全部鄉鎮市區"}],a.VM.SelectTown="0",a.BindCounty=function(){var b={};b.a="County",b.o=OrgID,c({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],1==b.length?(a.VM.CountyAry=b,a.VM.SelectCounty=b[0].I.toString(),a.SelectDefaultCounty(b[0].I.toString())):b.length>1?(a.VM.CountyAry=[{I:"0",N:"全部縣市"}].concat(b),a.VM.SelectCounty="0"):(a.VM.CountyAry=[{I:"-1",N:"無可選縣市"}].concat(b),a.VM.SelectCounty="-1")}).error(function(a,b,c,d){})},a.SelectDefaultCounty=function(b){var c={};c.a="Town",c.p=b,c.o=OrgID,$.ajax({cache:!1,type:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:c}).done(function(b){b=b||[],setTimeout(function(){a.$apply(function(){1==b.length?(a.VM.TownAry=b,a.VM.SelectTown=b[0].I.toString()):b.length>1&&(a.VM.TownAry=[{I:"0",N:"全部鄉鎮市區"}].concat(b),a.VM.SelectTown="0")})},1)}).fail(function(a,b){})},a.BindCounty(),a.SelectCountyChange=function(){var b={};b.a="Town",b.p=$("#SelectCounty").val(),c({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?a.VM.TownAry=[{I:"0",N:"全部鄉鎮市區"}].concat(b):a.VM.TownAry=[{I:"0",N:"全部鄉鎮市區"}],a.VM.SelectTown="0",a.VM.SelectVillage="0"}).error(function(a,b,c,d){})},$("#tmBlock").show(),a.PM.changePage("",tbData,function(b){a.TM.data=b.message,history.replaceState({pageIndex:1},document.title,location.href)}),a.changePage=function(b){var c=a.PM.genPageData(b),d={},d={};d.an=a.VM.AN,d.ac=a.VM.SelectCounty,d.at=a.VM.SelectTown,d.p=p,d.as=agencyState,d.hf=hasFilter,d=a.PM.filterPageData(c,d),a.PM.changePage("/UC/UC_SelectAgencyOP.aspx",d,function(c){a.TM.data=c.message,a.$apply(function(){}),history.pushState&&void 0==noHistory&&(b>1||location.hash.length>0?history.pushState({pageIndex:b},document.title,location.href.split("?")[0]+"?#h"):history.replaceState({pageIndex:1},document.title,location.href))})},d.add({combo:"enter",description:"Description goes here",allowIn:["INPUT","BUTTON","SELECT","TEXTAREA"],callback:function(b,c){var d=document.activeElement.type;"text"!=d&&"select-one"!=d||a.changePage(1)}}),a.close=function(a){var b={};b.I=a.I,b.AN=a.AN,window.opener.getAgencyUC(b),window.close()}}]);
//# sourceMappingURL=UC_SelectAgency.min.js.map