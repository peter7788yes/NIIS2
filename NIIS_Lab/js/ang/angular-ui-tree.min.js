/*! NIIS 2016-03-07 */

!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodeScope=null,a.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,b){function c(a){var b,e,f=0,g=a.childNodes();for(b=0;b<g.length;b++)e=g[b].$childNodesScope,e&&e.childNodesCount()>0&&(f=1,c(e));d+=f}this.scope=a,a.$element=b,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$apply=!1,a.collapsed=!1,a.init=function(c){var d=c[0];a.$treeScope=c[1]?c[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,a.$modelValue=d.scope.$modelValue[a.$index],a.$parentNodesScope=d.scope,d.scope.initSubNode(a),b.on("$destroy",function(){d.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(b){return a.$parentNodesScope==b.$parentNodesScope},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(b,c){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(b,c)},a.removeNode=function(){var b=a.remove();return a.$callbacks.removed(b),b},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1};var d=0;a.maxSubDepth=function(){return d=0,a.$childNodesScope&&c(a.$childNodesScope),d}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=b):null},a.destroySubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=null):null},a.accept=function(b,c){return a.$treeScope.$callbacks.accept(b,a,c)},a.beforeDrag=function(b){return a.$treeScope.$callbacks.beforeDrag(b)},a.isParent=function(b){return b.$parentNodesScope==a},a.hasChild=function(){return a.$modelValue.length>0},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),b):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.maxDepth||a.$treeScope.maxDepth;return c>0?a.depth()+b.maxSubDepth()+1>c:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodesScope=null,a.$type="uiTree",a.$emptyElm=null,a.$callbacks=null,a.dragEnabled=!0,a.emptyPlaceholderEnabled=!0,a.maxDepth=0,a.dragDelay=0,a.cloneEnabled=!1,a.nodropEnabled=!1,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length},a.place=function(b){a.$nodesScope.$element.append(b),a.$emptyElm.remove()},this.resetEmptyElement=function(){a.$nodesScope.$modelValue&&0!==a.$nodesScope.$modelValue.length||!a.emptyPlaceholderEnabled?a.$emptyElm.remove():b.append(a.$emptyElm)},a.resetEmptyElement=this.resetEmptyElement;var c=function(a,b){var d,e,f=a.childNodes();for(d=0;d<f.length;d++)b?f[d].collapse():f[d].expand(),e=f[d].$childNodesScope,e&&c(e,b)};a.collapseAll=function(){c(a.$nodesScope,!0)},a.expandAll=function(){c(a.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,b){return{restrict:"A",scope:!0,controller:"TreeController",link:function(c,d,e,f){var g={accept:null,beforeDrag:null},h={};angular.extend(h,a),h.treeClass&&d.addClass(h.treeClass),c.$emptyElm=angular.element(b.document.createElement("div")),h.emptyTreeClass&&c.$emptyElm.addClass(h.emptyTreeClass),c.$watch("$nodesScope.$modelValue.length",function(){c.$nodesScope.$modelValue&&f.resetEmptyElement()},!0),c.$watch(e.dragEnabled,function(a){"boolean"==typeof a&&(c.dragEnabled=a)}),c.$watch(e.emptyPlaceholderEnabled,function(a){"boolean"==typeof a&&(c.emptyPlaceholderEnabled=a,f.resetEmptyElement())}),c.$watch(e.nodropEnabled,function(a){"boolean"==typeof a&&(c.nodropEnabled=a)}),c.$watch(e.cloneEnabled,function(a){"boolean"==typeof a&&(c.cloneEnabled=a)}),c.$watch(e.maxDepth,function(a){"number"==typeof a&&(c.maxDepth=a)}),c.$watch(e.dragDelay,function(a){"number"==typeof a&&(c.dragDelay=a)}),g.accept=function(a,b,c){return!(b.nodropEnabled||b.outOfDepth(a))},g.beforeDrag=function(a){return!0},g.removed=function(a){},g.dropped=function(a){},g.dragStart=function(a){},g.dragMove=function(a){},g.dragStop=function(a){},g.beforeDrop=function(a){},c.$watch(e.uiTree,function(a,b){angular.forEach(a,function(a,b){g[b]&&"function"==typeof a&&(g[b]=a)}),c.$callbacks=g},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(a){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(b,c,d,e){var f={};angular.extend(f,a),f.handleClass&&c.addClass(f.handleClass),b!=e.scope&&(b.$nodeScope=e.scope,e.scope.$handleScope=b)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(a,b,c,d,e){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C={},D="ontouchstart"in window,E=null,F=document.body,G=document.documentElement;angular.extend(C,a),C.nodeClass&&g.addClass(C.nodeClass),f.init(i),f.collapsed=!!b.getNodeAttribute(f,"collapsed"),f.sourceOnly=f.nodropEnabled||f.$treeScope.nodropEnabled,f.$watch(h.collapsed,function(a){"boolean"==typeof a&&(f.collapsed=a)}),f.$watch("collapsed",function(a){b.setNodeAttribute(f,"collapsed",a),h.$set("collapsed",a)}),s=function(a){if((D||2!=a.button&&3!=a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e,h,i,s,t,u=angular.element(a.target),v=u.scope(),z=g.clone();if(v&&v.$type&&!("uiTreeNode"!=v.$type&&"uiTreeHandle"!=v.$type||"uiTreeNode"==v.$type&&v.$handleScope||(e=u.prop("tagName").toLowerCase(),"input"==e||"textarea"==e||"button"==e||"select"==e))){for(;u&&u[0]&&u[0]!=g;){if(b.nodrag(u))return;u=u.parent()}f.beforeDrag(f)&&(a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault(),i=b.eventObj(a),j=!0,k=b.dragInfo(f),f.$apply(function(){f.$treeScope.$callbacks.dragStart(k.eventArgs(p,l))}),h=f.$element.prop("tagName"),"tr"===h.toLowerCase()?(m=angular.element(c.document.createElement(h)),s=angular.element(c.document.createElement("td")).addClass(C.placeholderClass),m.append(s)):m=angular.element(c.document.createElement(h)).addClass(C.placeholderClass),n=angular.element(c.document.createElement(h)),C.hiddenClass&&n.addClass(C.hiddenClass),l=b.positionStarted(i,f.$element),m.css("height",b.height(f.$element)+"px"),m.css("width",b.width(f.$element)+"px"),o=angular.element(c.document.createElement(f.$parentNodesScope.$element.prop("tagName"))).addClass(f.$parentNodesScope.$element.attr("class")).addClass(C.dragClass),o.css("width",b.width(f.$element)+"px"),o.css("z-index",9999),t=(f.$element[0].querySelector(".angular-ui-tree-handle")||f.$element[0]).currentStyle,t&&(document.body.setAttribute("ui-tree-cursor",d.find("body").css("cursor")||""),d.find("body").css({cursor:t.cursor+"!important"})),f.sourceOnly&&m.css("display","none"),f.$element.after(m),f.$element.after(n),k.isClone()&&f.sourceOnly?o.append(z):o.append(f.$element),d.find("body").append(o),o.css({left:i.pageX-l.offsetX+"px",top:i.pageY-l.offsetY+"px"}),p={placeholder:m,dragging:o},angular.element(d).bind("touchend",x),angular.element(d).bind("touchcancel",x),angular.element(d).bind("touchmove",w),angular.element(d).bind("mouseup",x),angular.element(d).bind("mousemove",w),angular.element(d).bind("mouseleave",y),q=Math.max(F.scrollHeight,F.offsetHeight,G.clientHeight,G.scrollHeight,G.offsetHeight),r=Math.max(F.scrollWidth,F.offsetWidth,G.clientWidth,G.scrollWidth,G.offsetWidth))}}},t=function(a){var d,e,g,h,i,n,s,t,u,v,w,x,y,z,A,B,D=b.eventObj(a);if(o){if(a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),g=D.pageX-l.offsetX,h=D.pageY-l.offsetY,0>g&&(g=0),0>h&&(h=0),h+10>q&&(h=q-10),g+10>r&&(g=r-10),o.css({left:g+"px",top:h+"px"}),i=window.pageYOffset||c.document.documentElement.scrollTop,n=i+(window.innerHeight||c.document.clientHeight||c.document.clientHeight),n<D.pageY&&q>=n&&window.scrollBy(0,10),i>D.pageY&&window.scrollBy(0,-10),b.positionMoved(a,l,j),j)return void(j=!1);if(l.dirAx&&l.distAxX>=C.levelThreshold&&(l.distAxX=0,l.distX>0&&(d=k.prev(),d&&!d.collapsed&&d.accept(f,d.childNodesCount())&&(d.$childNodesScope.$element.append(m),k.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount()))),l.distX<0&&(e=k.next(),e||(s=k.parentNode(),s&&s.$parentNodesScope.accept(f,s.index()+1)&&(s.$element.after(m),k.moveTo(s.$parentNodesScope,s.siblings(),s.index()+1))))),t=b.offset(o).left-b.offset(m).left>=C.threshold,u=D.pageX-c.document.body.scrollLeft,v=D.pageY-(window.pageYOffset||c.document.documentElement.scrollTop),angular.isFunction(o.hide)?o.hide():(w=o[0].style.display,o[0].style.display="none"),c.document.elementFromPoint(u,v),y=angular.element(c.document.elementFromPoint(u,v)),angular.isFunction(o.show)?o.show():o[0].style.display=w,!l.dirAx){if(x=y.scope(),z=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||m.css("display","block"),"uiTree"==x.$type&&x.dragEnabled&&(z=x.isEmpty()),"uiTreeHandle"==x.$type&&(x=x.$nodeScope),"uiTreeNode"!=x.$type&&!z)return;E&&m.parent()[0]!=E.$element[0]&&(E.resetEmptyElement(),E=null),z?(E=x,x.$nodesScope.accept(f,0)&&(x.place(m),k.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(y=x.$element,A=b.offset(y),B=x.horizontal?D.pageX<A.left+b.width(y)/2:D.pageY<A.top+b.height(y)/2,x.$parentNodesScope.accept(f,x.index())?B?(y[0].parentNode.insertBefore(m[0],y[0]),k.moveTo(x.$parentNodesScope,x.siblings(),x.index())):(y.after(m),k.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!B&&x.accept(f,x.childNodesCount())&&(x.$childNodesScope.$element.append(m),k.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())))}f.$apply(function(){f.$treeScope.$callbacks.dragMove(k.eventArgs(p,l))})}},u=function(a){a.preventDefault(),o&&(f.$treeScope.$apply(function(){f.$treeScope.$callbacks.beforeDrop(k.eventArgs(p,l))}),n.replaceWith(f.$element),m.remove(),o.remove(),o=null,f.$$apply?f.$treeScope.$apply(function(){k.apply(),f.$treeScope.$callbacks.dropped(k.eventArgs(p,l))}):A(),f.$treeScope.$apply(function(){f.$treeScope.$callbacks.dragStop(k.eventArgs(p,l))}),f.$$apply=!1,k=null);var b=document.body.getAttribute("ui-tree-cursor");null!==b&&(d.find("body").css({cursor:b}),document.body.removeAttribute("ui-tree-cursor")),angular.element(d).unbind("touchend",x),angular.element(d).unbind("touchcancel",x),angular.element(d).unbind("touchmove",w),angular.element(d).unbind("mouseup",x),angular.element(d).unbind("mousemove",w),angular.element(c.document.body).unbind("mouseleave",y)},v=function(a){f.dragEnabled()&&s(a)},w=function(a){t(a)},x=function(a){f.$$apply=!0,u(a)},y=function(a){u(a)},z=function(){var a;return{exec:function(b,c){c||(c=0),this.cancel(),a=e(b,c)},cancel:function(){e.cancel(a)}}}(),A=function(){g.bind("touchstart mousedown",function(a){z.exec(function(){v(a)},f.dragDelay||0)}),g.bind("touchend touchcancel mouseup",function(){z.cancel()})},A(),B=function(a){27==a.keyCode&&(f.$$apply=!1,u(a))},angular.element(c.document.body).bind("keydown",B),f.$on("$destroy",function(){angular.element(c.document.body).unbind("keydown",B)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(a){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(b,c,d,e){var f={},g=e[0],h=e[1],i=e[2];angular.extend(f,a),f.nodesClass&&c.addClass(f.nodesClass),h?(h.scope.$childNodesScope=b,b.$nodeScope=h.scope):i.scope.$nodesScope=b,b.$treeScope=i.scope,g&&(g.$render=function(){g.$modelValue&&angular.isArray(g.$modelValue)||(b.$modelValue=[]),b.$modelValue=g.$modelValue}),b.$watch(d.maxDepth,function(a){"number"==typeof a&&(b.maxDepth=a)}),b.$watch(function(){return d.nodropEnabled},function(a){"undefined"!=typeof a&&(b.nodropEnabled=!0)},!0),d.$observe("horizontal",function(a){b.horizontal="undefined"!=typeof a})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(a,b){return{nodesData:{},setNodeAttribute:function(a,b,c){if(!a.$modelValue)return null;var d=this.nodesData[a.$modelValue.$$hashKey];d||(d={},this.nodesData[a.$modelValue.$$hashKey]=d),d[b]=c},getNodeAttribute:function(a,b){if(!a.$modelValue)return null;var c=this.nodesData[a.$modelValue.$$hashKey];return c?c[b]:null},nodrag:function(a){return"undefined"!=typeof a.attr("data-nodrag")?"false"!==a.attr("data-nodrag"):!1},eventObj:function(a){var b=a;return void 0!==a.targetTouches?b=a.targetTouches.item(0):void 0!==a.originalEvent&&void 0!==a.originalEvent.targetTouches&&(b=a.originalEvent.targetTouches.item(0)),b},dragInfo:function(a){return{source:a,sourceInfo:{cloneModel:a.$treeScope.cloneEnabled===!0?angular.copy(a.$modelValue):void 0,nodeScope:a,index:a.index(),nodesScope:a.$parentNodesScope},index:a.index(),siblings:a.siblings().slice(0),parent:a.$parentNodesScope,moveTo:function(a,b,c){this.parent=a,this.siblings=b.slice(0);var d=this.siblings.indexOf(this.source);d>-1&&(this.siblings.splice(d,1),this.source.index()<c&&c--),this.siblings.splice(c,0,this.source),this.index=c},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(a){return angular.copy(a)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(a,b){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:a,pos:b}},apply:function(){var a=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(a)):(this.source.remove(),this.parent.insertNode(this.index,a)))}}},height:function(a){return a.prop("scrollHeight")},width:function(a){return a.prop("scrollWidth")},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}},positionStarted:function(a,b){var c={};return c.offsetX=a.pageX-this.offset(b).left,c.offsetY=a.pageY-this.offset(b).top,c.startX=c.lastX=a.pageX,c.startY=c.lastY=a.pageY,c.nowX=c.nowY=c.distX=c.distY=c.dirAx=0,c.dirX=c.dirY=c.lastDirX=c.lastDirY=c.distAxX=c.distAxY=0,c},positionMoved:function(a,b,c){b.lastX=b.nowX,b.lastY=b.nowY,b.nowX=a.pageX,b.nowY=a.pageY,b.distX=b.nowX-b.lastX,b.distY=b.nowY-b.lastY,b.lastDirX=b.dirX,b.lastDirY=b.dirY,b.dirX=0===b.distX?0:b.distX>0?1:-1,b.dirY=0===b.distY?0:b.distY>0?1:-1;var d=Math.abs(b.distX)>Math.abs(b.distY)?1:0;return c?(b.dirAx=d,void(b.moving=!0)):(b.dirAx!==d?(b.distAxX=0,b.distAxY=0):(b.distAxX+=Math.abs(b.distX),0!==b.dirX&&b.dirX!==b.lastDirX&&(b.distAxX=0),b.distAxY+=Math.abs(b.distY),0!==b.dirY&&b.dirY!==b.lastDirY&&(b.distAxY=0)),void(b.dirAx=d))}}}])}(),!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodeScope=null,a.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,b){function c(a){var b,e,f=0,g=a.childNodes();for(b=0;b<g.length;b++)e=g[b].$childNodesScope,e&&e.childNodesCount()>0&&(f=1,c(e));d+=f}this.scope=a,a.$element=b,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$apply=!1,a.collapsed=!1,a.init=function(c){var d=c[0];a.$treeScope=c[1]?c[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,a.$modelValue=d.scope.$modelValue[a.$index],a.$parentNodesScope=d.scope,d.scope.initSubNode(a),b.on("$destroy",function(){d.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(b){return a.$parentNodesScope==b.$parentNodesScope},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(b,c){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(b,c)},a.removeNode=function(){var b=a.remove();return a.$callbacks.removed(b),b},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1};var d=0;a.maxSubDepth=function(){return d=0,a.$childNodesScope&&c(a.$childNodesScope),d}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=b):null},a.destroySubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=null):null},a.accept=function(b,c){return a.$treeScope.$callbacks.accept(b,a,c)},a.beforeDrag=function(b){return a.$treeScope.$callbacks.beforeDrag(b)},a.isParent=function(b){return b.$parentNodesScope==a},a.hasChild=function(){return a.$modelValue.length>0},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),b):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.maxDepth||a.$treeScope.maxDepth;return c>0?a.depth()+b.maxSubDepth()+1>c:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodesScope=null,a.$type="uiTree",a.$emptyElm=null,a.$callbacks=null,a.dragEnabled=!0,a.emptyPlaceholderEnabled=!0,a.maxDepth=0,a.dragDelay=0,a.cloneEnabled=!1,a.nodropEnabled=!1,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length},a.place=function(b){a.$nodesScope.$element.append(b),a.$emptyElm.remove()},this.resetEmptyElement=function(){a.$nodesScope.$modelValue&&0!==a.$nodesScope.$modelValue.length||!a.emptyPlaceholderEnabled?a.$emptyElm.remove():b.append(a.$emptyElm)},a.resetEmptyElement=this.resetEmptyElement;var c=function(a,b){var d,e,f=a.childNodes();for(d=0;d<f.length;d++)b?f[d].collapse():f[d].expand(),e=f[d].$childNodesScope,e&&c(e,b)};a.collapseAll=function(){c(a.$nodesScope,!0)},a.expandAll=function(){c(a.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,b){return{restrict:"A",scope:!0,controller:"TreeController",link:function(c,d,e,f){var g={accept:null,beforeDrag:null},h={};angular.extend(h,a),h.treeClass&&d.addClass(h.treeClass),c.$emptyElm=angular.element(b.document.createElement("div")),h.emptyTreeClass&&c.$emptyElm.addClass(h.emptyTreeClass),c.$watch("$nodesScope.$modelValue.length",function(){c.$nodesScope.$modelValue&&f.resetEmptyElement()},!0),c.$watch(e.dragEnabled,function(a){"boolean"==typeof a&&(c.dragEnabled=a)}),c.$watch(e.emptyPlaceholderEnabled,function(a){"boolean"==typeof a&&(c.emptyPlaceholderEnabled=a,f.resetEmptyElement())}),c.$watch(e.nodropEnabled,function(a){"boolean"==typeof a&&(c.nodropEnabled=a)}),c.$watch(e.cloneEnabled,function(a){"boolean"==typeof a&&(c.cloneEnabled=a)}),c.$watch(e.maxDepth,function(a){"number"==typeof a&&(c.maxDepth=a)}),c.$watch(e.dragDelay,function(a){"number"==typeof a&&(c.dragDelay=a)}),g.accept=function(a,b,c){return!(b.nodropEnabled||b.outOfDepth(a))},g.beforeDrag=function(a){return!0},g.removed=function(a){},g.dropped=function(a){},g.dragStart=function(a){},g.dragMove=function(a){},g.dragStop=function(a){},g.beforeDrop=function(a){},c.$watch(e.uiTree,function(a,b){angular.forEach(a,function(a,b){g[b]&&"function"==typeof a&&(g[b]=a)}),c.$callbacks=g},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(a){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(b,c,d,e){var f={};angular.extend(f,a),f.handleClass&&c.addClass(f.handleClass),b!=e.scope&&(b.$nodeScope=e.scope,e.scope.$handleScope=b)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(a,b,c,d,e){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C={},D="ontouchstart"in window,E=null,F=document.body,G=document.documentElement;angular.extend(C,a),C.nodeClass&&g.addClass(C.nodeClass),f.init(i),f.collapsed=!!b.getNodeAttribute(f,"collapsed"),f.sourceOnly=f.nodropEnabled||f.$treeScope.nodropEnabled,f.$watch(h.collapsed,function(a){"boolean"==typeof a&&(f.collapsed=a)}),f.$watch("collapsed",function(a){b.setNodeAttribute(f,"collapsed",a),h.$set("collapsed",a)}),s=function(a){if((D||2!=a.button&&3!=a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e,h,i,s,t,u=angular.element(a.target),v=u.scope(),z=g.clone();if(v&&v.$type&&!("uiTreeNode"!=v.$type&&"uiTreeHandle"!=v.$type||"uiTreeNode"==v.$type&&v.$handleScope||(e=u.prop("tagName").toLowerCase(),"input"==e||"textarea"==e||"button"==e||"select"==e))){for(;u&&u[0]&&u[0]!=g;){if(b.nodrag(u))return;u=u.parent()}f.beforeDrag(f)&&(a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault(),i=b.eventObj(a),j=!0,k=b.dragInfo(f),f.$apply(function(){f.$treeScope.$callbacks.dragStart(k.eventArgs(p,l))}),h=f.$element.prop("tagName"),"tr"===h.toLowerCase()?(m=angular.element(c.document.createElement(h)),s=angular.element(c.document.createElement("td")).addClass(C.placeholderClass),m.append(s)):m=angular.element(c.document.createElement(h)).addClass(C.placeholderClass),n=angular.element(c.document.createElement(h)),C.hiddenClass&&n.addClass(C.hiddenClass),l=b.positionStarted(i,f.$element),m.css("height",b.height(f.$element)+"px"),m.css("width",b.width(f.$element)+"px"),o=angular.element(c.document.createElement(f.$parentNodesScope.$element.prop("tagName"))).addClass(f.$parentNodesScope.$element.attr("class")).addClass(C.dragClass),o.css("width",b.width(f.$element)+"px"),o.css("z-index",9999),t=(f.$element[0].querySelector(".angular-ui-tree-handle")||f.$element[0]).currentStyle,t&&(document.body.setAttribute("ui-tree-cursor",d.find("body").css("cursor")||""),d.find("body").css({cursor:t.cursor+"!important"})),f.sourceOnly&&m.css("display","none"),f.$element.after(m),f.$element.after(n),k.isClone()&&f.sourceOnly?o.append(z):o.append(f.$element),d.find("body").append(o),o.css({left:i.pageX-l.offsetX+"px",top:i.pageY-l.offsetY+"px"}),p={placeholder:m,dragging:o},angular.element(d).bind("touchend",x),angular.element(d).bind("touchcancel",x),angular.element(d).bind("touchmove",w),angular.element(d).bind("mouseup",x),angular.element(d).bind("mousemove",w),angular.element(d).bind("mouseleave",y),q=Math.max(F.scrollHeight,F.offsetHeight,G.clientHeight,G.scrollHeight,G.offsetHeight),r=Math.max(F.scrollWidth,F.offsetWidth,G.clientWidth,G.scrollWidth,G.offsetWidth))}}},t=function(a){var d,e,g,h,i,n,s,t,u,v,w,x,y,z,A,B,D=b.eventObj(a);if(o){if(a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),g=D.pageX-l.offsetX,h=D.pageY-l.offsetY,0>g&&(g=0),0>h&&(h=0),h+10>q&&(h=q-10),g+10>r&&(g=r-10),o.css({left:g+"px",top:h+"px"}),i=window.pageYOffset||c.document.documentElement.scrollTop,n=i+(window.innerHeight||c.document.clientHeight||c.document.clientHeight),n<D.pageY&&q>=n&&window.scrollBy(0,10),i>D.pageY&&window.scrollBy(0,-10),b.positionMoved(a,l,j),j)return void(j=!1);if(l.dirAx&&l.distAxX>=C.levelThreshold&&(l.distAxX=0,l.distX>0&&(d=k.prev(),d&&!d.collapsed&&d.accept(f,d.childNodesCount())&&(d.$childNodesScope.$element.append(m),k.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount()))),l.distX<0&&(e=k.next(),e||(s=k.parentNode(),s&&s.$parentNodesScope.accept(f,s.index()+1)&&(s.$element.after(m),k.moveTo(s.$parentNodesScope,s.siblings(),s.index()+1))))),t=b.offset(o).left-b.offset(m).left>=C.threshold,u=D.pageX-c.document.body.scrollLeft,v=D.pageY-(window.pageYOffset||c.document.documentElement.scrollTop),angular.isFunction(o.hide)?o.hide():(w=o[0].style.display,o[0].style.display="none"),c.document.elementFromPoint(u,v),y=angular.element(c.document.elementFromPoint(u,v)),angular.isFunction(o.show)?o.show():o[0].style.display=w,!l.dirAx){if(x=y.scope(),z=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||m.css("display","block"),"uiTree"==x.$type&&x.dragEnabled&&(z=x.isEmpty()),"uiTreeHandle"==x.$type&&(x=x.$nodeScope),"uiTreeNode"!=x.$type&&!z)return;E&&m.parent()[0]!=E.$element[0]&&(E.resetEmptyElement(),E=null),z?(E=x,x.$nodesScope.accept(f,0)&&(x.place(m),k.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(y=x.$element,A=b.offset(y),B=x.horizontal?D.pageX<A.left+b.width(y)/2:D.pageY<A.top+b.height(y)/2,x.$parentNodesScope.accept(f,x.index())?B?(y[0].parentNode.insertBefore(m[0],y[0]),k.moveTo(x.$parentNodesScope,x.siblings(),x.index())):(y.after(m),k.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!B&&x.accept(f,x.childNodesCount())&&(x.$childNodesScope.$element.append(m),k.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())))}f.$apply(function(){f.$treeScope.$callbacks.dragMove(k.eventArgs(p,l))})}},u=function(a){a.preventDefault(),o&&(f.$treeScope.$apply(function(){f.$treeScope.$callbacks.beforeDrop(k.eventArgs(p,l))}),n.replaceWith(f.$element),m.remove(),o.remove(),o=null,f.$$apply?f.$treeScope.$apply(function(){k.apply(),f.$treeScope.$callbacks.dropped(k.eventArgs(p,l))}):A(),f.$treeScope.$apply(function(){f.$treeScope.$callbacks.dragStop(k.eventArgs(p,l))}),f.$$apply=!1,k=null);var b=document.body.getAttribute("ui-tree-cursor");null!==b&&(d.find("body").css({cursor:b}),document.body.removeAttribute("ui-tree-cursor")),angular.element(d).unbind("touchend",x),angular.element(d).unbind("touchcancel",x),angular.element(d).unbind("touchmove",w),angular.element(d).unbind("mouseup",x),angular.element(d).unbind("mousemove",w),angular.element(c.document.body).unbind("mouseleave",y)},v=function(a){f.dragEnabled()&&s(a)},w=function(a){t(a)},x=function(a){f.$$apply=!0,u(a)},y=function(a){u(a)},z=function(){var a;return{exec:function(b,c){c||(c=0),this.cancel(),a=e(b,c)},cancel:function(){e.cancel(a)}}}(),A=function(){g.bind("touchstart mousedown",function(a){z.exec(function(){v(a)},f.dragDelay||0)}),g.bind("touchend touchcancel mouseup",function(){z.cancel()})},A(),B=function(a){27==a.keyCode&&(f.$$apply=!1,u(a))},angular.element(c.document.body).bind("keydown",B),f.$on("$destroy",function(){angular.element(c.document.body).unbind("keydown",B)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(a){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(b,c,d,e){var f={},g=e[0],h=e[1],i=e[2];angular.extend(f,a),f.nodesClass&&c.addClass(f.nodesClass),h?(h.scope.$childNodesScope=b,b.$nodeScope=h.scope):i.scope.$nodesScope=b,b.$treeScope=i.scope,g&&(g.$render=function(){g.$modelValue&&angular.isArray(g.$modelValue)||(b.$modelValue=[]),b.$modelValue=g.$modelValue}),b.$watch(d.maxDepth,function(a){"number"==typeof a&&(b.maxDepth=a)}),b.$watch(function(){return d.nodropEnabled},function(a){"undefined"!=typeof a&&(b.nodropEnabled=!0)},!0),d.$observe("horizontal",function(a){b.horizontal="undefined"!=typeof a})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(a,b){return{nodesData:{},setNodeAttribute:function(a,b,c){if(!a.$modelValue)return null;var d=this.nodesData[a.$modelValue.$$hashKey];d||(d={},this.nodesData[a.$modelValue.$$hashKey]=d),d[b]=c},getNodeAttribute:function(a,b){if(!a.$modelValue)return null;var c=this.nodesData[a.$modelValue.$$hashKey];return c?c[b]:null},nodrag:function(a){return"undefined"!=typeof a.attr("data-nodrag")?"false"!==a.attr("data-nodrag"):!1},eventObj:function(a){var b=a;return void 0!==a.targetTouches?b=a.targetTouches.item(0):void 0!==a.originalEvent&&void 0!==a.originalEvent.targetTouches&&(b=a.originalEvent.targetTouches.item(0)),
b},dragInfo:function(a){return{source:a,sourceInfo:{cloneModel:a.$treeScope.cloneEnabled===!0?angular.copy(a.$modelValue):void 0,nodeScope:a,index:a.index(),nodesScope:a.$parentNodesScope},index:a.index(),siblings:a.siblings().slice(0),parent:a.$parentNodesScope,moveTo:function(a,b,c){this.parent=a,this.siblings=b.slice(0);var d=this.siblings.indexOf(this.source);d>-1&&(this.siblings.splice(d,1),this.source.index()<c&&c--),this.siblings.splice(c,0,this.source),this.index=c},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(a){return angular.copy(a)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(a,b){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:a,pos:b}},apply:function(){var a=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(a)):(this.source.remove(),this.parent.insertNode(this.index,a)))}}},height:function(a){return a.prop("scrollHeight")},width:function(a){return a.prop("scrollWidth")},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}},positionStarted:function(a,b){var c={};return c.offsetX=a.pageX-this.offset(b).left,c.offsetY=a.pageY-this.offset(b).top,c.startX=c.lastX=a.pageX,c.startY=c.lastY=a.pageY,c.nowX=c.nowY=c.distX=c.distY=c.dirAx=0,c.dirX=c.dirY=c.lastDirX=c.lastDirY=c.distAxX=c.distAxY=0,c},positionMoved:function(a,b,c){b.lastX=b.nowX,b.lastY=b.nowY,b.nowX=a.pageX,b.nowY=a.pageY,b.distX=b.nowX-b.lastX,b.distY=b.nowY-b.lastY,b.lastDirX=b.dirX,b.lastDirY=b.dirY,b.dirX=0===b.distX?0:b.distX>0?1:-1,b.dirY=0===b.distY?0:b.distY>0?1:-1;var d=Math.abs(b.distX)>Math.abs(b.distY)?1:0;return c?(b.dirAx=d,void(b.moving=!0)):(b.dirAx!==d?(b.distAxX=0,b.distAxY=0):(b.distAxX+=Math.abs(b.distX),0!==b.dirX&&b.dirX!==b.lastDirX&&(b.distAxX=0),b.distAxY+=Math.abs(b.distY),0!==b.dirY&&b.dirY!==b.lastDirY&&(b.distAxY=0)),void(b.dirAx=d))}}}])}(),!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodeScope=null,a.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,b){function c(a){var b,e,f=0,g=a.childNodes();for(b=0;b<g.length;b++)e=g[b].$childNodesScope,e&&e.childNodesCount()>0&&(f=1,c(e));d+=f}this.scope=a,a.$element=b,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$apply=!1,a.collapsed=!1,a.init=function(c){var d=c[0];a.$treeScope=c[1]?c[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,a.$modelValue=d.scope.$modelValue[a.$index],a.$parentNodesScope=d.scope,d.scope.initSubNode(a),b.on("$destroy",function(){d.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(b){return a.$parentNodesScope==b.$parentNodesScope},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(b,c){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(b,c)},a.removeNode=function(){var b=a.remove();return a.$callbacks.removed(b),b},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1};var d=0;a.maxSubDepth=function(){return d=0,a.$childNodesScope&&c(a.$childNodesScope),d}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=b):null},a.destroySubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=null):null},a.accept=function(b,c){return a.$treeScope.$callbacks.accept(b,a,c)},a.beforeDrag=function(b){return a.$treeScope.$callbacks.beforeDrag(b)},a.isParent=function(b){return b.$parentNodesScope==a},a.hasChild=function(){return a.$modelValue.length>0},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),b):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.maxDepth||a.$treeScope.maxDepth;return c>0?a.depth()+b.maxSubDepth()+1>c:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodesScope=null,a.$type="uiTree",a.$emptyElm=null,a.$callbacks=null,a.dragEnabled=!0,a.emptyPlaceholderEnabled=!0,a.maxDepth=0,a.dragDelay=0,a.cloneEnabled=!1,a.nodropEnabled=!1,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length},a.place=function(b){a.$nodesScope.$element.append(b),a.$emptyElm.remove()},this.resetEmptyElement=function(){a.$nodesScope.$modelValue&&0!==a.$nodesScope.$modelValue.length||!a.emptyPlaceholderEnabled?a.$emptyElm.remove():b.append(a.$emptyElm)},a.resetEmptyElement=this.resetEmptyElement;var c=function(a,b){var d,e,f=a.childNodes();for(d=0;d<f.length;d++)b?f[d].collapse():f[d].expand(),e=f[d].$childNodesScope,e&&c(e,b)};a.collapseAll=function(){c(a.$nodesScope,!0)},a.expandAll=function(){c(a.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,b){return{restrict:"A",scope:!0,controller:"TreeController",link:function(c,d,e,f){var g={accept:null,beforeDrag:null},h={};angular.extend(h,a),h.treeClass&&d.addClass(h.treeClass),c.$emptyElm=angular.element(b.document.createElement("div")),h.emptyTreeClass&&c.$emptyElm.addClass(h.emptyTreeClass),c.$watch("$nodesScope.$modelValue.length",function(){c.$nodesScope.$modelValue&&f.resetEmptyElement()},!0),c.$watch(e.dragEnabled,function(a){"boolean"==typeof a&&(c.dragEnabled=a)}),c.$watch(e.emptyPlaceholderEnabled,function(a){"boolean"==typeof a&&(c.emptyPlaceholderEnabled=a,f.resetEmptyElement())}),c.$watch(e.nodropEnabled,function(a){"boolean"==typeof a&&(c.nodropEnabled=a)}),c.$watch(e.cloneEnabled,function(a){"boolean"==typeof a&&(c.cloneEnabled=a)}),c.$watch(e.maxDepth,function(a){"number"==typeof a&&(c.maxDepth=a)}),c.$watch(e.dragDelay,function(a){"number"==typeof a&&(c.dragDelay=a)}),g.accept=function(a,b,c){return!(b.nodropEnabled||b.outOfDepth(a))},g.beforeDrag=function(a){return!0},g.removed=function(a){},g.dropped=function(a){},g.dragStart=function(a){},g.dragMove=function(a){},g.dragStop=function(a){},g.beforeDrop=function(a){},c.$watch(e.uiTree,function(a,b){angular.forEach(a,function(a,b){g[b]&&"function"==typeof a&&(g[b]=a)}),c.$callbacks=g},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(a){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(b,c,d,e){var f={};angular.extend(f,a),f.handleClass&&c.addClass(f.handleClass),b!=e.scope&&(b.$nodeScope=e.scope,e.scope.$handleScope=b)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(a,b,c,d,e){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C={},D="ontouchstart"in window,E=null,F=document.body,G=document.documentElement;angular.extend(C,a),C.nodeClass&&g.addClass(C.nodeClass),f.init(i),f.collapsed=!!b.getNodeAttribute(f,"collapsed"),f.sourceOnly=f.nodropEnabled||f.$treeScope.nodropEnabled,f.$watch(h.collapsed,function(a){"boolean"==typeof a&&(f.collapsed=a)}),f.$watch("collapsed",function(a){b.setNodeAttribute(f,"collapsed",a),h.$set("collapsed",a)}),s=function(a){if((D||2!=a.button&&3!=a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e,h,i,s,t,u=angular.element(a.target),v=u.scope(),z=g.clone();if(v&&v.$type&&!("uiTreeNode"!=v.$type&&"uiTreeHandle"!=v.$type||"uiTreeNode"==v.$type&&v.$handleScope||(e=u.prop("tagName").toLowerCase(),"input"==e||"textarea"==e||"button"==e||"select"==e))){for(;u&&u[0]&&u[0]!=g;){if(b.nodrag(u))return;u=u.parent()}f.beforeDrag(f)&&(a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault(),i=b.eventObj(a),j=!0,k=b.dragInfo(f),f.$apply(function(){f.$treeScope.$callbacks.dragStart(k.eventArgs(p,l))}),h=f.$element.prop("tagName"),"tr"===h.toLowerCase()?(m=angular.element(c.document.createElement(h)),s=angular.element(c.document.createElement("td")).addClass(C.placeholderClass),m.append(s)):m=angular.element(c.document.createElement(h)).addClass(C.placeholderClass),n=angular.element(c.document.createElement(h)),C.hiddenClass&&n.addClass(C.hiddenClass),l=b.positionStarted(i,f.$element),m.css("height",b.height(f.$element)+"px"),m.css("width",b.width(f.$element)+"px"),o=angular.element(c.document.createElement(f.$parentNodesScope.$element.prop("tagName"))).addClass(f.$parentNodesScope.$element.attr("class")).addClass(C.dragClass),o.css("width",b.width(f.$element)+"px"),o.css("z-index",9999),t=(f.$element[0].querySelector(".angular-ui-tree-handle")||f.$element[0]).currentStyle,t&&(document.body.setAttribute("ui-tree-cursor",d.find("body").css("cursor")||""),d.find("body").css({cursor:t.cursor+"!important"})),f.sourceOnly&&m.css("display","none"),f.$element.after(m),f.$element.after(n),k.isClone()&&f.sourceOnly?o.append(z):o.append(f.$element),d.find("body").append(o),o.css({left:i.pageX-l.offsetX+"px",top:i.pageY-l.offsetY+"px"}),p={placeholder:m,dragging:o},angular.element(d).bind("touchend",x),angular.element(d).bind("touchcancel",x),angular.element(d).bind("touchmove",w),angular.element(d).bind("mouseup",x),angular.element(d).bind("mousemove",w),angular.element(d).bind("mouseleave",y),q=Math.max(F.scrollHeight,F.offsetHeight,G.clientHeight,G.scrollHeight,G.offsetHeight),r=Math.max(F.scrollWidth,F.offsetWidth,G.clientWidth,G.scrollWidth,G.offsetWidth))}}},t=function(a){var d,e,g,h,i,n,s,t,u,v,w,x,y,z,A,B,D=b.eventObj(a);if(o){if(a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),g=D.pageX-l.offsetX,h=D.pageY-l.offsetY,0>g&&(g=0),0>h&&(h=0),h+10>q&&(h=q-10),g+10>r&&(g=r-10),o.css({left:g+"px",top:h+"px"}),i=window.pageYOffset||c.document.documentElement.scrollTop,n=i+(window.innerHeight||c.document.clientHeight||c.document.clientHeight),n<D.pageY&&q>=n&&window.scrollBy(0,10),i>D.pageY&&window.scrollBy(0,-10),b.positionMoved(a,l,j),j)return void(j=!1);if(l.dirAx&&l.distAxX>=C.levelThreshold&&(l.distAxX=0,l.distX>0&&(d=k.prev(),d&&!d.collapsed&&d.accept(f,d.childNodesCount())&&(d.$childNodesScope.$element.append(m),k.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount()))),l.distX<0&&(e=k.next(),e||(s=k.parentNode(),s&&s.$parentNodesScope.accept(f,s.index()+1)&&(s.$element.after(m),k.moveTo(s.$parentNodesScope,s.siblings(),s.index()+1))))),t=b.offset(o).left-b.offset(m).left>=C.threshold,u=D.pageX-c.document.body.scrollLeft,v=D.pageY-(window.pageYOffset||c.document.documentElement.scrollTop),angular.isFunction(o.hide)?o.hide():(w=o[0].style.display,o[0].style.display="none"),c.document.elementFromPoint(u,v),y=angular.element(c.document.elementFromPoint(u,v)),angular.isFunction(o.show)?o.show():o[0].style.display=w,!l.dirAx){if(x=y.scope(),z=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||m.css("display","block"),"uiTree"==x.$type&&x.dragEnabled&&(z=x.isEmpty()),"uiTreeHandle"==x.$type&&(x=x.$nodeScope),"uiTreeNode"!=x.$type&&!z)return;E&&m.parent()[0]!=E.$element[0]&&(E.resetEmptyElement(),E=null),z?(E=x,x.$nodesScope.accept(f,0)&&(x.place(m),k.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(y=x.$element,A=b.offset(y),B=x.horizontal?D.pageX<A.left+b.width(y)/2:D.pageY<A.top+b.height(y)/2,x.$parentNodesScope.accept(f,x.index())?B?(y[0].parentNode.insertBefore(m[0],y[0]),k.moveTo(x.$parentNodesScope,x.siblings(),x.index())):(y.after(m),k.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!B&&x.accept(f,x.childNodesCount())&&(x.$childNodesScope.$element.append(m),k.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())))}f.$apply(function(){f.$treeScope.$callbacks.dragMove(k.eventArgs(p,l))})}},u=function(a){a.preventDefault(),o&&(f.$treeScope.$apply(function(){f.$treeScope.$callbacks.beforeDrop(k.eventArgs(p,l))}),n.replaceWith(f.$element),m.remove(),o.remove(),o=null,f.$$apply?f.$treeScope.$apply(function(){k.apply(),f.$treeScope.$callbacks.dropped(k.eventArgs(p,l))}):A(),f.$treeScope.$apply(function(){f.$treeScope.$callbacks.dragStop(k.eventArgs(p,l))}),f.$$apply=!1,k=null);var b=document.body.getAttribute("ui-tree-cursor");null!==b&&(d.find("body").css({cursor:b}),document.body.removeAttribute("ui-tree-cursor")),angular.element(d).unbind("touchend",x),angular.element(d).unbind("touchcancel",x),angular.element(d).unbind("touchmove",w),angular.element(d).unbind("mouseup",x),angular.element(d).unbind("mousemove",w),angular.element(c.document.body).unbind("mouseleave",y)},v=function(a){f.dragEnabled()&&s(a)},w=function(a){t(a)},x=function(a){f.$$apply=!0,u(a)},y=function(a){u(a)},z=function(){var a;return{exec:function(b,c){c||(c=0),this.cancel(),a=e(b,c)},cancel:function(){e.cancel(a)}}}(),A=function(){g.bind("touchstart mousedown",function(a){z.exec(function(){v(a)},f.dragDelay||0)}),g.bind("touchend touchcancel mouseup",function(){z.cancel()})},A(),B=function(a){27==a.keyCode&&(f.$$apply=!1,u(a))},angular.element(c.document.body).bind("keydown",B),f.$on("$destroy",function(){angular.element(c.document.body).unbind("keydown",B)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(a){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(b,c,d,e){var f={},g=e[0],h=e[1],i=e[2];angular.extend(f,a),f.nodesClass&&c.addClass(f.nodesClass),h?(h.scope.$childNodesScope=b,b.$nodeScope=h.scope):i.scope.$nodesScope=b,b.$treeScope=i.scope,g&&(g.$render=function(){g.$modelValue&&angular.isArray(g.$modelValue)||(b.$modelValue=[]),b.$modelValue=g.$modelValue}),b.$watch(d.maxDepth,function(a){"number"==typeof a&&(b.maxDepth=a)}),b.$watch(function(){return d.nodropEnabled},function(a){"undefined"!=typeof a&&(b.nodropEnabled=!0)},!0),d.$observe("horizontal",function(a){b.horizontal="undefined"!=typeof a})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(a,b){return{nodesData:{},setNodeAttribute:function(a,b,c){if(!a.$modelValue)return null;var d=this.nodesData[a.$modelValue.$$hashKey];d||(d={},this.nodesData[a.$modelValue.$$hashKey]=d),d[b]=c},getNodeAttribute:function(a,b){if(!a.$modelValue)return null;var c=this.nodesData[a.$modelValue.$$hashKey];return c?c[b]:null},nodrag:function(a){return"undefined"!=typeof a.attr("data-nodrag")?"false"!==a.attr("data-nodrag"):!1},eventObj:function(a){var b=a;return void 0!==a.targetTouches?b=a.targetTouches.item(0):void 0!==a.originalEvent&&void 0!==a.originalEvent.targetTouches&&(b=a.originalEvent.targetTouches.item(0)),b},dragInfo:function(a){return{source:a,sourceInfo:{cloneModel:a.$treeScope.cloneEnabled===!0?angular.copy(a.$modelValue):void 0,nodeScope:a,index:a.index(),nodesScope:a.$parentNodesScope},index:a.index(),siblings:a.siblings().slice(0),parent:a.$parentNodesScope,moveTo:function(a,b,c){this.parent=a,this.siblings=b.slice(0);var d=this.siblings.indexOf(this.source);d>-1&&(this.siblings.splice(d,1),this.source.index()<c&&c--),this.siblings.splice(c,0,this.source),this.index=c},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(a){return angular.copy(a)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(a,b){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:a,pos:b}},apply:function(){var a=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(a)):(this.source.remove(),this.parent.insertNode(this.index,a)))}}},height:function(a){return a.prop("scrollHeight")},width:function(a){return a.prop("scrollWidth")},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}},positionStarted:function(a,b){var c={};return c.offsetX=a.pageX-this.offset(b).left,c.offsetY=a.pageY-this.offset(b).top,c.startX=c.lastX=a.pageX,c.startY=c.lastY=a.pageY,c.nowX=c.nowY=c.distX=c.distY=c.dirAx=0,c.dirX=c.dirY=c.lastDirX=c.lastDirY=c.distAxX=c.distAxY=0,c},positionMoved:function(a,b,c){b.lastX=b.nowX,b.lastY=b.nowY,b.nowX=a.pageX,b.nowY=a.pageY,b.distX=b.nowX-b.lastX,b.distY=b.nowY-b.lastY,b.lastDirX=b.dirX,b.lastDirY=b.dirY,b.dirX=0===b.distX?0:b.distX>0?1:-1,b.dirY=0===b.distY?0:b.distY>0?1:-1;var d=Math.abs(b.distX)>Math.abs(b.distY)?1:0;return c?(b.dirAx=d,void(b.moving=!0)):(b.dirAx!==d?(b.distAxX=0,b.distAxY=0):(b.distAxX+=Math.abs(b.distX),0!==b.dirX&&b.dirX!==b.lastDirX&&(b.distAxX=0),b.distAxY+=Math.abs(b.distY),0!==b.dirY&&b.dirY!==b.lastDirY&&(b.distAxY=0)),void(b.dirAx=d))}}}])}(),!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodeScope=null,a.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,b){function c(a){var b,e,f=0,g=a.childNodes();for(b=0;b<g.length;b++)e=g[b].$childNodesScope,e&&e.childNodesCount()>0&&(f=1,c(e));d+=f}this.scope=a,a.$element=b,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$apply=!1,a.collapsed=!1,a.init=function(c){var d=c[0];a.$treeScope=c[1]?c[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,a.$modelValue=d.scope.$modelValue[a.$index],a.$parentNodesScope=d.scope,d.scope.initSubNode(a),b.on("$destroy",function(){d.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(b){return a.$parentNodesScope==b.$parentNodesScope},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(b,c){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(b,c)},a.removeNode=function(){var b=a.remove();return a.$callbacks.removed(b),b},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1};var d=0;a.maxSubDepth=function(){return d=0,a.$childNodesScope&&c(a.$childNodesScope),d}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=b):null},a.destroySubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=null):null},a.accept=function(b,c){return a.$treeScope.$callbacks.accept(b,a,c)},a.beforeDrag=function(b){return a.$treeScope.$callbacks.beforeDrag(b)},a.isParent=function(b){return b.$parentNodesScope==a},a.hasChild=function(){return a.$modelValue.length>0},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),b):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.maxDepth||a.$treeScope.maxDepth;return c>0?a.depth()+b.maxSubDepth()+1>c:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodesScope=null,a.$type="uiTree",a.$emptyElm=null,a.$callbacks=null,a.dragEnabled=!0,a.emptyPlaceholderEnabled=!0,a.maxDepth=0,a.dragDelay=0,a.cloneEnabled=!1,a.nodropEnabled=!1,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length},a.place=function(b){a.$nodesScope.$element.append(b),a.$emptyElm.remove()},this.resetEmptyElement=function(){a.$nodesScope.$modelValue&&0!==a.$nodesScope.$modelValue.length||!a.emptyPlaceholderEnabled?a.$emptyElm.remove():b.append(a.$emptyElm)},a.resetEmptyElement=this.resetEmptyElement;var c=function(a,b){var d,e,f=a.childNodes();for(d=0;d<f.length;d++)b?f[d].collapse():f[d].expand(),e=f[d].$childNodesScope,e&&c(e,b)};a.collapseAll=function(){c(a.$nodesScope,!0)},a.expandAll=function(){c(a.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,b){return{restrict:"A",scope:!0,controller:"TreeController",link:function(c,d,e,f){var g={accept:null,beforeDrag:null},h={};angular.extend(h,a),h.treeClass&&d.addClass(h.treeClass),c.$emptyElm=angular.element(b.document.createElement("div")),h.emptyTreeClass&&c.$emptyElm.addClass(h.emptyTreeClass),c.$watch("$nodesScope.$modelValue.length",function(){c.$nodesScope.$modelValue&&f.resetEmptyElement()},!0),c.$watch(e.dragEnabled,function(a){"boolean"==typeof a&&(c.dragEnabled=a)}),c.$watch(e.emptyPlaceholderEnabled,function(a){"boolean"==typeof a&&(c.emptyPlaceholderEnabled=a,f.resetEmptyElement())}),c.$watch(e.nodropEnabled,function(a){"boolean"==typeof a&&(c.nodropEnabled=a)}),c.$watch(e.cloneEnabled,function(a){"boolean"==typeof a&&(c.cloneEnabled=a)}),c.$watch(e.maxDepth,function(a){"number"==typeof a&&(c.maxDepth=a)}),c.$watch(e.dragDelay,function(a){"number"==typeof a&&(c.dragDelay=a)}),g.accept=function(a,b,c){return!(b.nodropEnabled||b.outOfDepth(a))},g.beforeDrag=function(a){return!0},g.removed=function(a){},g.dropped=function(a){},g.dragStart=function(a){},g.dragMove=function(a){},g.dragStop=function(a){},g.beforeDrop=function(a){},c.$watch(e.uiTree,function(a,b){angular.forEach(a,function(a,b){g[b]&&"function"==typeof a&&(g[b]=a)}),c.$callbacks=g},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(a){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(b,c,d,e){var f={};angular.extend(f,a),f.handleClass&&c.addClass(f.handleClass),b!=e.scope&&(b.$nodeScope=e.scope,e.scope.$handleScope=b)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(a,b,c,d,e){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C={},D="ontouchstart"in window,E=null,F=document.body,G=document.documentElement;angular.extend(C,a),C.nodeClass&&g.addClass(C.nodeClass),f.init(i),f.collapsed=!!b.getNodeAttribute(f,"collapsed"),f.sourceOnly=f.nodropEnabled||f.$treeScope.nodropEnabled,f.$watch(h.collapsed,function(a){"boolean"==typeof a&&(f.collapsed=a)}),f.$watch("collapsed",function(a){b.setNodeAttribute(f,"collapsed",a),h.$set("collapsed",a)}),s=function(a){if((D||2!=a.button&&3!=a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e,h,i,s,t,u=angular.element(a.target),v=u.scope(),z=g.clone();if(v&&v.$type&&!("uiTreeNode"!=v.$type&&"uiTreeHandle"!=v.$type||"uiTreeNode"==v.$type&&v.$handleScope||(e=u.prop("tagName").toLowerCase(),"input"==e||"textarea"==e||"button"==e||"select"==e))){for(;u&&u[0]&&u[0]!=g;){if(b.nodrag(u))return;u=u.parent()}f.beforeDrag(f)&&(a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault(),i=b.eventObj(a),j=!0,k=b.dragInfo(f),f.$apply(function(){f.$treeScope.$callbacks.dragStart(k.eventArgs(p,l))}),h=f.$element.prop("tagName"),"tr"===h.toLowerCase()?(m=angular.element(c.document.createElement(h)),s=angular.element(c.document.createElement("td")).addClass(C.placeholderClass),m.append(s)):m=angular.element(c.document.createElement(h)).addClass(C.placeholderClass),n=angular.element(c.document.createElement(h)),C.hiddenClass&&n.addClass(C.hiddenClass),l=b.positionStarted(i,f.$element),m.css("height",b.height(f.$element)+"px"),m.css("width",b.width(f.$element)+"px"),o=angular.element(c.document.createElement(f.$parentNodesScope.$element.prop("tagName"))).addClass(f.$parentNodesScope.$element.attr("class")).addClass(C.dragClass),o.css("width",b.width(f.$element)+"px"),o.css("z-index",9999),t=(f.$element[0].querySelector(".angular-ui-tree-handle")||f.$element[0]).currentStyle,t&&(document.body.setAttribute("ui-tree-cursor",d.find("body").css("cursor")||""),d.find("body").css({cursor:t.cursor+"!important"})),f.sourceOnly&&m.css("display","none"),f.$element.after(m),f.$element.after(n),k.isClone()&&f.sourceOnly?o.append(z):o.append(f.$element),d.find("body").append(o),o.css({left:i.pageX-l.offsetX+"px",top:i.pageY-l.offsetY+"px"}),p={placeholder:m,dragging:o},angular.element(d).bind("touchend",x),angular.element(d).bind("touchcancel",x),angular.element(d).bind("touchmove",w),angular.element(d).bind("mouseup",x),angular.element(d).bind("mousemove",w),angular.element(d).bind("mouseleave",y),q=Math.max(F.scrollHeight,F.offsetHeight,G.clientHeight,G.scrollHeight,G.offsetHeight),r=Math.max(F.scrollWidth,F.offsetWidth,G.clientWidth,G.scrollWidth,G.offsetWidth))}}},t=function(a){var d,e,g,h,i,n,s,t,u,v,w,x,y,z,A,B,D=b.eventObj(a);if(o){if(a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),g=D.pageX-l.offsetX,h=D.pageY-l.offsetY,0>g&&(g=0),0>h&&(h=0),h+10>q&&(h=q-10),g+10>r&&(g=r-10),o.css({left:g+"px",top:h+"px"}),i=window.pageYOffset||c.document.documentElement.scrollTop,n=i+(window.innerHeight||c.document.clientHeight||c.document.clientHeight),n<D.pageY&&q>=n&&window.scrollBy(0,10),i>D.pageY&&window.scrollBy(0,-10),b.positionMoved(a,l,j),j)return void(j=!1);if(l.dirAx&&l.distAxX>=C.levelThreshold&&(l.distAxX=0,l.distX>0&&(d=k.prev(),d&&!d.collapsed&&d.accept(f,d.childNodesCount())&&(d.$childNodesScope.$element.append(m),k.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount()))),l.distX<0&&(e=k.next(),e||(s=k.parentNode(),s&&s.$parentNodesScope.accept(f,s.index()+1)&&(s.$element.after(m),k.moveTo(s.$parentNodesScope,s.siblings(),s.index()+1))))),t=b.offset(o).left-b.offset(m).left>=C.threshold,u=D.pageX-c.document.body.scrollLeft,v=D.pageY-(window.pageYOffset||c.document.documentElement.scrollTop),angular.isFunction(o.hide)?o.hide():(w=o[0].style.display,o[0].style.display="none"),c.document.elementFromPoint(u,v),y=angular.element(c.document.elementFromPoint(u,v)),angular.isFunction(o.show)?o.show():o[0].style.display=w,!l.dirAx){if(x=y.scope(),z=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||m.css("display","block"),"uiTree"==x.$type&&x.dragEnabled&&(z=x.isEmpty()),"uiTreeHandle"==x.$type&&(x=x.$nodeScope),"uiTreeNode"!=x.$type&&!z)return;E&&m.parent()[0]!=E.$element[0]&&(E.resetEmptyElement(),E=null),z?(E=x,x.$nodesScope.accept(f,0)&&(x.place(m),k.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(y=x.$element,A=b.offset(y),B=x.horizontal?D.pageX<A.left+b.width(y)/2:D.pageY<A.top+b.height(y)/2,x.$parentNodesScope.accept(f,x.index())?B?(y[0].parentNode.insertBefore(m[0],y[0]),k.moveTo(x.$parentNodesScope,x.siblings(),x.index())):(y.after(m),k.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!B&&x.accept(f,x.childNodesCount())&&(x.$childNodesScope.$element.append(m),k.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())))}f.$apply(function(){f.$treeScope.$callbacks.dragMove(k.eventArgs(p,l))})}},u=function(a){a.preventDefault(),o&&(f.$treeScope.$apply(function(){f.$treeScope.$callbacks.beforeDrop(k.eventArgs(p,l))}),n.replaceWith(f.$element),m.remove(),
o.remove(),o=null,f.$$apply?f.$treeScope.$apply(function(){k.apply(),f.$treeScope.$callbacks.dropped(k.eventArgs(p,l))}):A(),f.$treeScope.$apply(function(){f.$treeScope.$callbacks.dragStop(k.eventArgs(p,l))}),f.$$apply=!1,k=null);var b=document.body.getAttribute("ui-tree-cursor");null!==b&&(d.find("body").css({cursor:b}),document.body.removeAttribute("ui-tree-cursor")),angular.element(d).unbind("touchend",x),angular.element(d).unbind("touchcancel",x),angular.element(d).unbind("touchmove",w),angular.element(d).unbind("mouseup",x),angular.element(d).unbind("mousemove",w),angular.element(c.document.body).unbind("mouseleave",y)},v=function(a){f.dragEnabled()&&s(a)},w=function(a){t(a)},x=function(a){f.$$apply=!0,u(a)},y=function(a){u(a)},z=function(){var a;return{exec:function(b,c){c||(c=0),this.cancel(),a=e(b,c)},cancel:function(){e.cancel(a)}}}(),A=function(){g.bind("touchstart mousedown",function(a){z.exec(function(){v(a)},f.dragDelay||0)}),g.bind("touchend touchcancel mouseup",function(){z.cancel()})},A(),B=function(a){27==a.keyCode&&(f.$$apply=!1,u(a))},angular.element(c.document.body).bind("keydown",B),f.$on("$destroy",function(){angular.element(c.document.body).unbind("keydown",B)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(a){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(b,c,d,e){var f={},g=e[0],h=e[1],i=e[2];angular.extend(f,a),f.nodesClass&&c.addClass(f.nodesClass),h?(h.scope.$childNodesScope=b,b.$nodeScope=h.scope):i.scope.$nodesScope=b,b.$treeScope=i.scope,g&&(g.$render=function(){g.$modelValue&&angular.isArray(g.$modelValue)||(b.$modelValue=[]),b.$modelValue=g.$modelValue}),b.$watch(d.maxDepth,function(a){"number"==typeof a&&(b.maxDepth=a)}),b.$watch(function(){return d.nodropEnabled},function(a){"undefined"!=typeof a&&(b.nodropEnabled=!0)},!0),d.$observe("horizontal",function(a){b.horizontal="undefined"!=typeof a})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(a,b){return{nodesData:{},setNodeAttribute:function(a,b,c){if(!a.$modelValue)return null;var d=this.nodesData[a.$modelValue.$$hashKey];d||(d={},this.nodesData[a.$modelValue.$$hashKey]=d),d[b]=c},getNodeAttribute:function(a,b){if(!a.$modelValue)return null;var c=this.nodesData[a.$modelValue.$$hashKey];return c?c[b]:null},nodrag:function(a){return"undefined"!=typeof a.attr("data-nodrag")?"false"!==a.attr("data-nodrag"):!1},eventObj:function(a){var b=a;return void 0!==a.targetTouches?b=a.targetTouches.item(0):void 0!==a.originalEvent&&void 0!==a.originalEvent.targetTouches&&(b=a.originalEvent.targetTouches.item(0)),b},dragInfo:function(a){return{source:a,sourceInfo:{cloneModel:a.$treeScope.cloneEnabled===!0?angular.copy(a.$modelValue):void 0,nodeScope:a,index:a.index(),nodesScope:a.$parentNodesScope},index:a.index(),siblings:a.siblings().slice(0),parent:a.$parentNodesScope,moveTo:function(a,b,c){this.parent=a,this.siblings=b.slice(0);var d=this.siblings.indexOf(this.source);d>-1&&(this.siblings.splice(d,1),this.source.index()<c&&c--),this.siblings.splice(c,0,this.source),this.index=c},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(a){return angular.copy(a)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(a,b){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:a,pos:b}},apply:function(){var a=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(a)):(this.source.remove(),this.parent.insertNode(this.index,a)))}}},height:function(a){return a.prop("scrollHeight")},width:function(a){return a.prop("scrollWidth")},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}},positionStarted:function(a,b){var c={};return c.offsetX=a.pageX-this.offset(b).left,c.offsetY=a.pageY-this.offset(b).top,c.startX=c.lastX=a.pageX,c.startY=c.lastY=a.pageY,c.nowX=c.nowY=c.distX=c.distY=c.dirAx=0,c.dirX=c.dirY=c.lastDirX=c.lastDirY=c.distAxX=c.distAxY=0,c},positionMoved:function(a,b,c){b.lastX=b.nowX,b.lastY=b.nowY,b.nowX=a.pageX,b.nowY=a.pageY,b.distX=b.nowX-b.lastX,b.distY=b.nowY-b.lastY,b.lastDirX=b.dirX,b.lastDirY=b.dirY,b.dirX=0===b.distX?0:b.distX>0?1:-1,b.dirY=0===b.distY?0:b.distY>0?1:-1;var d=Math.abs(b.distX)>Math.abs(b.distY)?1:0;return c?(b.dirAx=d,void(b.moving=!0)):(b.dirAx!==d?(b.distAxX=0,b.distAxY=0):(b.distAxX+=Math.abs(b.distX),0!==b.dirX&&b.dirX!==b.lastDirX&&(b.distAxX=0),b.distAxY+=Math.abs(b.distY),0!==b.dirY&&b.dirY!==b.lastDirY&&(b.distAxY=0)),void(b.dirAx=d))}}}])}();
//# sourceMappingURL=angular-ui-tree.min.js.map