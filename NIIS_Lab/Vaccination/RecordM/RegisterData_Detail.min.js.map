{"version":3,"sources":["RegisterData_Detail.src.js"],"names":["changeYellowCardUpdateRecord","info","$","text","controllerElement","document","querySelector","controllerScope","angular","element","scope","$apply","VM","u","HY","hide","show","changeStoolCard","Add","TM","scAry","push","forEach","item","index","I","SC","CD","changeCaseUserRemark","on","e","location","href","preventDefault","history","go","module","controller","$scope","PageProvider","TPM","$http","PM","data","tbAry","fnAry","uJson","title","publishState","FN","isCheck","length","prop","openStool","i","obj","CC","openWindowWithPost","goStool","s","postData","method","url","param","headers","Content-Type","success","status","config","error","goFlu","f","goAddYellowCard","record","goAddRemark","goChooseCate","RID","SRVC","SRVID","AD","goDetail","encodeURIComponent","AE","goAddVaccine","getClass","rtn","goPrint","html","popPrint","getRecordDataID","keepGoing","SCode","VBID","AddApplyRecord","VB","ID","ON","getNewVaccine","Vobj","YMID","P","OI","CT","IR","thisIndex","splice"],"mappings":"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","file":"RegisterData_Detail.min.js","sourcesContent":["\r\nvar changeYellowCardUpdateRecord = function (info) {\r\n    $(\"#YellowCardUpdateRecord\").text(info);\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        controllerScope.VM.u.HY = 1;\r\n        $(\"#NoYellowCardUpdateRecord\").hide();\r\n        $(\"#YellowCardUpdateRecord\").show();\r\n    });\r\n};\r\n\r\nvar changeStoolCard = function (info) {\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        if (info.Add == 1) {\r\n            controllerScope.TM.scAry.push(info);\r\n        }\r\n        else {\r\n            angular.forEach(controllerScope.TM.scAry, function (item, index) {\r\n                if (item.I == info.I) {\r\n                    item.SC = info.SC;\r\n                    item.CD = info.CD;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n};\r\n\r\nvar changeCaseUserRemark = function (info) {\r\n    $(\"#CaseUserRemark\").text(info);\r\n};\r\n\r\n$(function () {\r\n    $(document).on(\"click\", \"#addBtn\", function (e) {\r\n        location.href = \"/Vaccination/RecordM/RegisterData_Add.aspx\";\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#lastBtn\", function (e) {\r\n        history.go(-1);\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\",\"FilterM\",\"ToolM\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\",'ToolProvider', \"$http\", function ($scope, PageProvider,TPM, $http) {\r\n\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.TM.data = tbAry;\r\n\r\n             $scope.TM.scAry = scAry;\r\n             $scope.TM.fnAry = fnAry;\r\n           \r\n             $scope.VM = {};\r\n             $scope.VM.u = uJson;\r\n             if ($scope.VM.u.HY)\r\n             {\r\n                 $(\"#YellowCardUpdateRecord\").show();\r\n             }\r\n             else\r\n             {\r\n                 $scope.VM.u.HY = 0;\r\n                 $(\"#NoYellowCardUpdateRecord\").show();\r\n             }\r\n             $scope.VM.title = \"\";\r\n             $scope.VM.publishState = \"0\";\r\n             $scope.VM.u.FN = \"0\";\r\n\r\n             $scope.TM.fnAry = $scope.TM.fnAry || [];\r\n             var isCheck = false;\r\n             if ($scope.TM.fnAry.length > 0) {\r\n                 $scope.VM.u.FN = \"1\";\r\n                 isCheck = true;\r\n\r\n             }\r\n             else\r\n             {\r\n                 $scope.VM.u.FN = \"0\";\r\n                 isCheck = false;\r\n             }\r\n             $(\"#cbEver\").prop(\"checked\", isCheck);\r\n\r\n             $scope.openStool = function (i) {\r\n                 var obj = {};\r\n                 obj['c'] = CC;\r\n                 obj['i'] = i;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/RegisterData_Detail_StoolCard.aspx\", \"RegisterData_Detail_StoolCard\", 610, 300,obj);\r\n             };\r\n\r\n             $scope.goStool = function (s) {\r\n                 var postData = {};\r\n                 postData[\"s\"] = s;\r\n                 postData[\"c\"] = CC;\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Vaccination/RecordM/RegisterData_Detail_StoolOP.aspx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.goFlu = function (f) {\r\n                 var postData = {};\r\n                 postData[\"f\"] = $scope.VM.u.FN == true ? 1 : 0;\r\n                 postData[\"c\"] = CC;\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Vaccination/RecordM/RegisterData_Detail_FluOP.aspx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.goAddYellowCard = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/YellowCard_Add.aspx\", \"YellowCard_Add\", 610, 300, obj);\r\n             };\r\n\r\n             $scope.goAddRemark = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/CaseUserRemark_Add.aspx\", \"CaseUserRemark_Add\", 610, 300, obj);\r\n             };\r\n\r\n             $scope.goChooseCate = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 obj[\"i\"] = record.RID;\r\n                 obj[\"r\"] = record.SRVC;\r\n                 obj[\"ri\"] = record.SRVID;\r\n                 obj[\"a\"] = record.AD;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/ChooseCate.aspx\", \"ChooseCate\", 610, 300, obj);\r\n             };\r\n\r\n             $scope.goDetail = function (record) {\r\n                 var obj = {};\r\n                 var values = [];\r\n                 obj[\"c\"] = CC;\r\n                 obj[\"i\"] = record.RID;\r\n                 obj[\"r\"] = record.SRVC;\r\n                 obj[\"a\"] = record.AD;\r\n                 obj[\"ae\"] = encodeURIComponent(record.AE);\r\n                 //var x = record.AE;\r\n                 //console.log($('<div/>').text(x).html());\r\n                 //values[4] = htmlEncode(record.AE);\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/RecordDetail.aspx\", \"RecordDetail\", 930, 450, obj);\r\n             };\r\n\r\n             $scope.goAddVaccine = function (record) {\r\n                 var data = [];\r\n                 angular.forEach($scope.TM.data, function (item, index) {\r\n                     data.push(item.SRVC);\r\n                 });\r\n                 var obj = [];\r\n                 obj[\"a\"] = data;\r\n                 obj[\"c\"] = CC;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/AddVaccine.aspx\", \"AddVaccine\", 930, 450, obj);\r\n             };\r\n\r\n            \r\n             $scope.getClass = function (record) {\r\n                 var rtn='';\r\n                 switch (record.CC) {\r\n                     case 1:\r\n                         rtn = 'yellowcolor';\r\n                       \r\n                         break;\r\n                     case 2:\r\n                         rtn = 'pinkcolor';\r\n                         break;\r\n                 }\r\n\r\n                 return rtn;\r\n             };\r\n\r\n             function htmlEncode(value) {\r\n                 //create a in-memory div, set it's inner text(which jQuery automatically encodes)\r\n                 //then grab the encoded contents back out.  The div never exists on the page.\r\n                 return $('<div/>').text(value).html();\r\n             }\r\n\r\n             function htmlDecode(value) {\r\n                 return $('<div/>').html(value).text();\r\n             }\r\n\r\n             $scope.goPrint = function () {\r\n                 var data = '<section class=\"Content\"><div class=\"listTb\">';\r\n                 data += $(\"section:first\").html();\r\n                 data += '</section></div>';\r\n                 TPM.popPrint(data, [\"/css/design.css\"]);\r\n             };\r\n\r\n         }]);\r\n\r\nvar getRecordDataID = function (obj) {\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        var keepGoing = true;\r\n        angular.forEach(controllerScope.TM.data, function (item, index) {\r\n            if (keepGoing) {\r\n                if (obj.SCode == item.SRVC) {\r\n                    item.RID = obj.RID;\r\n                    item.VBID = obj.VBID;\r\n                    keepGoing = false;\r\n                }\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nvar AddApplyRecord = function (obj) {\r\n    if (obj == null)\r\n        return;\r\n\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        var keepGoing = true;\r\n        angular.forEach(controllerScope.TM.data, function (item, index) {\r\n            if (keepGoing) {\r\n\r\n                if (item.RID == obj.RID) {\r\n                    item.CD = obj.CD;\r\n                    item.VB = obj.VB;\r\n                    item.ID = obj.ID;\r\n                    item.ON = obj.ON;\r\n                }\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nvar getNewVaccine = function (obj) {\r\n\r\n    var Vobj =\r\n    {\r\n        \"YMID\": 0,\r\n        \"RID\": obj[\"I\"],\r\n        \"AE\": \"\",\r\n        \"P\": 0,\r\n        \"SRVID\": 0,\r\n        \"SRVC\": obj[\"R\"],\r\n        \"ID\": null,\r\n        \"CD\": null,\r\n        \"OI\": 0,\r\n        \"CT\": \"\",\r\n        \"VB\": \"\",\r\n        \"AD\": null,\r\n        \"ON\": \"\",\r\n        \"CC\": 0,\r\n        \"IR\": false\r\n    };\r\n\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        var thisIndex = 0;\r\n        angular.forEach(controllerScope.TM.data, function (item, index) {\r\n            if(thisIndex ==0 && item.ID!=null){\r\n                var thisIndex = index;\r\n            }\r\n        });\r\n        controllerScope.TM.data.splice(thisIndex, 0, Vobj);\r\n    });\r\n};"]}