{"version":3,"sources":["ApplyRecord.src.js"],"names":["$","document","on","e","window","close","preventDefault","reasonValue","val","show","hide","angular","module","controller","$scope","TPM","$http","TM","VM","agency","agencyID","SelectVacc","picVM","VaccAry","concat","tbAry","openSelectAgency","openWindowWithPost","refresh","setTimeout","$apply","chagneSelect","selectedIndex","openAddVaccine","obj","v","RR","getAgency","code","AN","I","trigger","addVaccine","console","log","scope","element","push","onbeforeunload","opener","popOpenedWindows"],"mappings":";;AAOAA,EAAE,WAEEA,EAAEC,UAAUC,GAAG,QAAS,YAAa,SAAUC,GAG3C,MAFAC,QAAOC,QACPF,EAAEG,kBACK,IAeXN,EAAEC,UAAUC,GAAG,SAAU,cAAe,SAAUC,GAC9C,GAAII,GAAcP,EAAE,eAAeQ,KAChB,MAAfD,GAAqC,KAAfA,GAAqC,KAAfA,EAC5CP,EAAE,WAAWS,OAGbT,EAAE,WAAWU,WAKzBC,QAAQC,OAAO,SAAU,UAAU,UACzBC,WAAW,gBAAiB,SAAS,eAAgB,QAAS,SAAUC,EAAOC,EAAKC,GAEjFF,EAAOG,MAEPH,EAAOI,MAEPJ,EAAOI,GAAGC,OAASA,OACnBL,EAAOI,GAAGE,SAAWA,SACrBN,EAAOI,GAAGG,WAAa,IAEvBP,EAAOI,GAAGI,SAEVR,EAAOI,GAAGK,WAAaC,OAAOC,OAE9BX,EAAOY,iBAAmB,WACtBX,EAAIY,mBAAmB,qDAAsD,eAAgB,IAAK,MAGtGb,EAAOc,QAAU,WACb,GAAIT,GAASnB,EAAE,aAAaQ,MACxBY,EAAWpB,EAAE,eAAeQ,KAEhCqB,YAAW,WACPf,EAAOgB,OAAO,WACVhB,EAAOI,GAAGC,OAASA,EACnBL,EAAOI,GAAGE,SAAWA,KAE1B,IAIPN,EAAOiB,aAAe,WAElBjB,EAAOI,GAAGI,MAAQR,EAAOI,GAAGK,QAAQvB,EAAE,eAAe,GAAGgC,gBAG5DlB,EAAOmB,eAAiB,WACpB,GAAIC,KACJA,GAAIC,EAAIC,GACRrB,EAAIY,mBAAmB,mDAAoD,yBAA0B,IAAK,IAAKO,MAIhI,IAAIG,WAAY,SAAUC,GACtBtC,EAAE,aAAaQ,IAAI8B,EAAKC,IACxBvC,EAAE,eAAeQ,IAAI8B,EAAKE,GAC1BxC,EAAE,eAAeyC,QAAQ,UAGzBC,WAAa,SAAUR,GACvBS,QAAQC,IAAIV,EACZ,IAAIW,GAAQlC,QAAQmC,QAAQ9C,EAAE,WAAW,IAAI6C,OAC7CA,GAAMf,OAAO,WACTe,EAAM3B,GAAGK,QAAQwB,KAAKb,KAO9B9B,QAAO4C,eAAiB,WACpB5C,OAAO6C,OAAOC,iBAAiB","file":"ApplyRecord.min.js","sourcesContent":["//change opener to '/Vaccination/RecordM/RegisterData_Detail.aspx'\r\n//if (window.opener.location.pathname != '\"/Vaccination/RecordM/RegisterData_Detail.aspx\"') {\r\n//    window.opener = window.opener.window.opener;\r\n//}\r\n\r\n//var rootWin = window.opener;\r\n\r\n$(function () {\r\n\r\n    $(document).on(\"click\", \"#closeBtn\", function (e) {\r\n        window.close();\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    //$(document).on(\"click\", \"#btnSave\", function (e) {\r\n    //    var reasonValue = $(\"#ddlReason1\").val();\r\n    //    if (reasonValue == \"1\" || reasonValue == \"2\" || reasonValue == \"4\")\r\n    //    {\r\n    //        if ($(\"#tbFile\").val() == \"\") {\r\n    //            alert('需檢附上傳接種紀錄影本');\r\n    //            e.preventDefault();\r\n    //            return false;\r\n    //        }\r\n    //    }\r\n    //});\r\n\r\n    $(document).on(\"change\", \"#ddlReason1\", function (e) {\r\n        var reasonValue = $(\"#ddlReason1\").val();\r\n        if (reasonValue == \"1\" || reasonValue == \"2\" || reasonValue == \"4\") {\r\n            $(\"#tbFile\").show();\r\n        }\r\n        else {\r\n            $(\"#tbFile\").hide();\r\n        }\r\n    });\r\n});\r\n\r\nangular.module(\"MyApp\", [\"FilterM\",\"ToolM\"])\r\n         .controller(\"MyController\", [\"$scope\",\"ToolProvider\", \"$http\", function ($scope,TPM, $http) {\r\n\r\n             $scope.TM = {};\r\n             //$scope.TM.isHide = true;\r\n             $scope.VM = {};\r\n\r\n             $scope.VM.agency = agency;\r\n             $scope.VM.agencyID = agencyID;\r\n             $scope.VM.SelectVacc = \"0\";\r\n             //$scope.VM.picVM = [{ VI: '0', BI: \"無\", AD: null, BB: \"\", DP: 0, FD: \"\" }];\r\n             $scope.VM.picVM = [];\r\n             //$scope.VM.VaccAry = [{ VI: '0', BI: \"無\", AD: null, BB: \"\", DP: 0, FD: \"\" }].concat(tbAry);\r\n             $scope.VM.VaccAry = [].concat(tbAry);\r\n\r\n             $scope.openSelectAgency = function () {\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/ApplyRecord_SelectAgency.aspx\", \"SelectAgency\", 930, 450);\r\n             };\r\n\r\n             $scope.refresh = function () {\r\n                 var agency = $('#tbAgency').val();\r\n                 var agencyID = $('#hfAgencyID').val();\r\n\r\n                 setTimeout(function () {\r\n                     $scope.$apply(function () {\r\n                         $scope.VM.agency = agency;\r\n                         $scope.VM.agencyID = agencyID;\r\n                     });\r\n                 }, 1);\r\n\r\n             };\r\n\r\n             $scope.chagneSelect = function () {\r\n                 //console.log($(\"#SelectVacc\")[0].selectedIndex);\r\n                 $scope.VM.picVM = $scope.VM.VaccAry[$(\"#SelectVacc\")[0].selectedIndex];\r\n             };\r\n\r\n             $scope.openAddVaccine = function () {\r\n                 var obj = {};\r\n                 obj.v = RR;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/ApplyRecord_AddVaccine.aspx\", \"ApplyRecord_AddVaccine\", 920, 450, obj);\r\n             };\r\n         }]);\r\n\r\nvar getAgency = function (code) {\r\n    $(\"#tbAgency\").val(code.AN);\r\n    $(\"#hfAgencyID\").val(code.I);\r\n    $('#refreshBtn').trigger('click');\r\n};\r\n\r\nvar addVaccine = function (obj) {\r\n    console.log(obj);\r\n    var scope = angular.element($('section')[0]).scope();\r\n    scope.$apply(function () {\r\n        scope.VM.VaccAry.push(obj);\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nwindow.onbeforeunload = function () {\r\n    window.opener.popOpenedWindows(\"ApplyRecord\");\r\n};"]}