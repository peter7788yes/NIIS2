/*! NIIS 2016-05-09 */

$(function(){0!=CC&&0!=II&&""!=RR||0==UU&&(alert("資料取得失敗"),window.close()),$(document).on("click","#closeBtn",function(a){return window.close(),a.preventDefault(),!1}),$(document).on("click","#saveBtn",function(a){var b={};b.cc=CC,b.ad=$("#tbDate").val(),b.aw=0,b.au=$("#selectUser")[0].value,b.aun=$("#selectUser").find("option:selected").text(),b.os=$("#tbOther").val(),b.rd=II,b.ah="",b.sf=0,b.uu=UU,b.ri=RRI,$("#rbAllow").prop("checked")&&(b.aw=1),$("#cbSelf").prop("checked")&&(b.sf=1),$("#cbFamily").prop("checked")&&(b.sf=2);var c=[];return $.each($(".cbs"),function(a,b){1==$(b).prop("checked")&&c.push($(b).val())}),b.ah=c.toString(),$.ajax({cache:!1,type:"POST",url:"/Vaccination/RecordM/ApplyHealth_AddOP.aspx",data:b}).done(function(a){a.chk>0?(void 0!=UU&&null!=UU&&0!=UU&&window.opener.refreshHealth(a.obj),alert("儲存成功"),window.close()):alert("儲存失敗")}).fail(function(a,b){}),a.preventDefault(),!1}),$.each(userAry,function(a,b){var c=$("<option/>");c.val(b.U),c.text(b.N),$($("#selectUser")[0]).append(c)});var a=stateAry.length,b="";$.each(stateAry.reverse(),function(c,d){switch(a){case 1:b="一";break;case 2:b="二";break;case 3:b="三";break;case 4:b="四";break;case 5:b="五";break;case 6:b="六";break;case 7:b="七";break;case 8:b="八";break;case 9:b="九";break;case 10:b="十"}var e=$("<tr/>"),f=$("<td/>"),g=$("<input class='cbs' type='checkbox'/>"),h=$("<label/>");if(g=g.val(d.EV),"四"!=b)h.append(g).append(b+"."+d.EN);else{d.EN=d.EN||" ： ";var i=d.EN.split("："),j=i[0]+" <label><input id='cbSelf' type='checkbox'/>本人</label> 或 <label><input id='cbFamily' type='checkbox'/>家屬</label> "+i[1];h.append(g).append(b+"."+j)}f.append(h),e.append(f),$("#tb").prepend(e),a--}),UUdata.AUID&&$("#selectUser").val(UUdata.AUID),1==UUdata.SOF&&$("#cbSelf").prop("checked",!0),2==UUdata.SOF&&$("#cbFamily").prop("checked",!0),UUdata.AS&&$.each(UUdata.AS.split(","),function(a,b){b&&$("input.cbs[value='"+b+"']").prop("checked",!0)}),UUdata.AW&&$("#rbAllow").prop("checked",!0)}),window.onbeforeunload=function(){window.opener.popOpenedWindows("ApplyHealth")};
//# sourceMappingURL=ApplyHealth.min.js.map