{"version":3,"sources":["ApplyHealth.src.js"],"names":["$","CC","II","RR","UU","alert","window","close","document","on","e","preventDefault","postData","val","value","find","text","RRI","prop","AH","each","index","item","push","toString","ajax","cache","type","url","data","done","chk","undefined","opener","refreshHealth","obj","fail","jqXHR","textStatus","userAry","$option","U","N","append","aryLengh","stateAry","length","aryNumber","reverse","$tr","$td","$input","$label","EV","EN","ary","split","element","prepend","UUdata","AUID","SOF","AS","AW","onbeforeunload","popOpenedWindows"],"mappings":"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","file":"ApplyHealth.min.js","sourcesContent":["$(function () {\r\n   \r\n    //if (CC == 0 || II == 0 || RR == \"\" || AA == \"\") {\r\n    if (CC == 0 || II == 0 || RR == \"\") {\r\n        if (UU == 0) {\r\n            alert('資料取得失敗'); window.close();\r\n        }\r\n    }\r\n   \r\n    $(document).on(\"click\", \"#closeBtn\", function (e) {\r\n        window.close();\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#saveBtn\", function (e) {\r\n        var postData = {};\r\n        postData[\"cc\"] = CC;\r\n        postData[\"ad\"] = $(\"#tbDate\").val();\r\n        //postData[\"aw\"] = $(\"#cbAllow\").prop(\"checked\");\r\n        postData[\"aw\"] = 0;\r\n        postData[\"au\"] = $(\"#selectUser\")[0].value;\r\n        postData[\"aun\"] = $(\"#selectUser\").find(\"option:selected\").text();\r\n        //postData[\"aun\"] = $(\"#selectUser\")[0].options[$(\"#selectUser\")[0].selectedIndex].text\r\n        postData[\"os\"] = $(\"#tbOther\").val();\r\n        postData[\"rd\"] = II;\r\n        postData[\"ah\"] = \"\";\r\n        postData[\"sf\"] = 0;\r\n        postData[\"uu\"] = UU;\r\n        postData[\"ri\"] = RRI;\r\n\r\n        if ($(\"#rbAllow\").prop(\"checked\"))\r\n        {\r\n            postData[\"aw\"] = 1;\r\n        }\r\n        if ($(\"#cbSelf\").prop(\"checked\"))\r\n        {\r\n            postData[\"sf\"] = 1;\r\n        }\r\n        if ($(\"#cbFamily\").prop(\"checked\")) {\r\n            postData[\"sf\"] = 2;\r\n        }\r\n        var AH = [];\r\n        $.each($(\".cbs\"), function (index, item) {\r\n            if ($(item).prop(\"checked\") == true) {\r\n                AH.push($(item).val());\r\n            }\r\n        });\r\n        postData[\"ah\"] = AH.toString();\r\n        //console.log(postData);\r\n\r\n\r\n            $.ajax({\r\n                cache: false,\r\n                type: \"POST\",\r\n                url: \"/Vaccination/RecordM/ApplyHealth_AddOP.aspx\",\r\n                data: postData\r\n            })\r\n           .done(function (data) {\r\n               if(data.chk>0)\r\n               {\r\n                   if (UU != undefined && UU != null && UU != 0) {\r\n                       window.opener.refreshHealth(data.obj);\r\n                   }\r\n                   alert('儲存成功');\r\n                   window.close();\r\n               }\r\n               else\r\n               {\r\n                   alert('儲存失敗');\r\n               }\r\n           })\r\n           .fail(function (jqXHR, textStatus) {\r\n\r\n           });\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $.each(userAry, function (index, item) {\r\n        var $option = $(\"<option/>\");\r\n        $option.val(item.U);\r\n        $option.text(item.N);\r\n        //console.log($option);\r\n        $($(\"#selectUser\")[0]).append($option);\r\n    });\r\n\r\n    var aryLengh = stateAry.length;\r\n    var aryNumber =\"\";\r\n    $.each(stateAry.reverse(), function (index, item) {\r\n        switch (aryLengh)\r\n        {\r\n            case 1:\r\n                aryNumber = \"一\";\r\n                break;\r\n            case 2:\r\n                aryNumber = \"二\";\r\n                break;\r\n            case 3:\r\n                aryNumber = \"三\";\r\n                break;\r\n            case 4:\r\n                aryNumber = \"四\";\r\n                break;\r\n            case 5:\r\n                aryNumber = \"五\";\r\n                break;\r\n            case 6:\r\n                aryNumber = \"六\";\r\n                break;\r\n            case 7:\r\n                aryNumber = \"七\";\r\n                break;\r\n            case 8:\r\n                aryNumber = \"八\";\r\n                break;\r\n            case 9:\r\n                aryNumber = \"九\";\r\n                break;\r\n            case 10:\r\n                aryNumber = \"十\";\r\n                break;\r\n\r\n        }\r\n        var $tr = $(\"<tr/>\");\r\n        var $td = $(\"<td/>\");\r\n        var $input = $(\"<input class='cbs' type='checkbox'/>\");\r\n        var $label = $(\"<label/>\");\r\n        $input = $input.val(item.EV);\r\n        if (aryNumber != \"四\") {\r\n            $label.append($input).append(aryNumber + \".\" + item.EN);\r\n        }\r\n        else\r\n        {\r\n            item.EN = item.EN || \" ： \";\r\n            var ary = item.EN.split(\"：\");\r\n            var element = ary[0] + \" <label><input id='cbSelf' type='checkbox'/>本人</label> 或 <label><input id='cbFamily' type='checkbox'/>家屬</label> \" + ary[1];\r\n            $label.append($input).append(aryNumber + \".\" + element);\r\n        }\r\n        \r\n        $td.append($label);\r\n        $tr.append($td);\r\n        $(\"#tb\").prepend($tr);\r\n        aryLengh--;\r\n    });\r\n\r\n\r\n    if (UUdata.AUID)\r\n        $(\"#selectUser\").val(UUdata.AUID);\r\n\r\n    if (UUdata.SOF == 1)\r\n        $(\"#cbSelf\").prop(\"checked\", true);\r\n\r\n    if (UUdata.SOF == 2)\r\n        $(\"#cbFamily\").prop(\"checked\", true);\r\n\r\n    if(UUdata.AS)\r\n    {\r\n        $.each(UUdata.AS.split(\",\"), function (index, item) {\r\n            if(item)\r\n                $(\"input.cbs[value='\" + item + \"']\").prop('checked', true);\r\n        });\r\n        \r\n    }\r\n\r\n    if(UUdata.AW)\r\n    {\r\n        $(\"#rbAllow\").prop(\"checked\", true);\r\n    }\r\n\r\n});\r\n\r\nwindow.onbeforeunload = function () {\r\n    window.opener.popOpenedWindows(\"ApplyHealth\");\r\n};"]}