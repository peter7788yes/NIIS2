{"version":3,"sources":["RegisterData_Detail_StoolCard.src.js"],"names":["changeYellowCardUpdateRecord","info","$","text","changeCaseUserRemark","document","on","e","location","href","preventDefault","history","go","angular","module","controller","$scope","PageProvider","TPM","$http","PM","TM","data","tbAry","VM","u","uJson","title","publishState","openStool","postData","CC","method","url","param","headers","Content-Type","success","status","config","error","goStool","s","goFlu","f","FN","goAddYellowCard","record","obj","openWindowWithPost","goAddRemark","goChooseCate","RID","SRVC","AD","goDetail","encodeURIComponent","AE","goAddVaccine","forEach","item","index","push","getClass","rtn","getRecordDataID","controllerElement","querySelector","controllerScope","element","scope","$apply","keepGoing","SCode","VBID","console","log","AddApplyRecord","CD","VB","ID","ON","getNewVaccine","Vobj","YMID","P","SRVID","OI","CT","IR","thisIndex","splice"],"mappings":"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","file":"RegisterData_Detail_StoolCard.min.js","sourcesContent":["\r\nvar changeYellowCardUpdateRecord = function (info) {\r\n    $(\"#YellowCardUpdateRecord\").text(info);\r\n};\r\n\r\n\r\nvar changeCaseUserRemark = function (info) {\r\n    $(\"#CaseUserRemark\").text(info);\r\n};\r\n\r\n$(function () {\r\n    $(document).on(\"click\", \"#addBtn\", function (e) {\r\n        location.href = \"/Vaccination/RecordM/RegisterData_Add.aspx\";\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#lastBtn\", function (e) {\r\n        history.go(-1);\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\",\"FilterM\",\"ToolM\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", \"ToolProvider\", \"$http\", function ($scope, PageProvider,TPM, $http) {\r\n\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.TM.data = tbAry;\r\n\r\n             $scope.VM = {};\r\n             $scope.VM.u = uJson;\r\n             $scope.VM.title = \"\";\r\n             $scope.VM.publishState = \"0\";\r\n            \r\n             $scope.openStool = function () {\r\n                 var postData = {};\r\n                 postData[\"c\"] = CC;\r\n                 //console.log(record.I);\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Vaccination/RecordM/RegisterData_Detail_StoolOP.aspx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.goStool = function (s) {\r\n                 var postData = {};\r\n                 postData[\"s\"] = s;\r\n                 postData[\"c\"] = CC;\r\n                 //console.log(record.I);\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Vaccination/RecordM/RegisterData_Detail_StoolOP.aspx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.goFlu = function (f) {\r\n                 var postData = {};\r\n                 postData[\"f\"] = $scope.VM.u.FN == true ? 1 : 0;\r\n                 postData[\"c\"] = CC;\r\n                 //console.log(record.I);\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Vaccination/RecordM/RegisterData_Detail_FluOP.aspx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.goAddYellowCard = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/YellowCard_Add.aspx\", \"YellowCard_Add\", 610, 300, obj);\r\n             };\r\n\r\n             $scope.goAddRemark = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/CaseUserRemark_Add.aspx\", \"CaseUserRemark_Add\", 610, 300, obj);\r\n             };\r\n\r\n             $scope.goChooseCate = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 obj[\"i\"] = record.RID;\r\n                 obj[\"r\"] = record.SRVC;\r\n                 obj[\"a\"] = record.AD;\r\n                 TPM.openWindowWithPost(\"/Vaccination/RecordM/ChooseCate.aspx\", \"ChooseCate\", 610, 300,  obj);\r\n             };\r\n\r\n             $scope.goDetail = function (record) {\r\n                 var obj = {};\r\n                 obj[\"c\"] = CC;\r\n                 obj[\"i\"] = record.RID;\r\n                 obj[\"r\"] = record.SRVC;\r\n                 obj[\"a\"] = record.AD;\r\n                 obj['ae'] = encodeURIComponent(record.AE);\r\n                 //var x = record.AE;\r\n                 //console.log($('<div/>').text(x).html());\r\n                 //values[4] = htmlEncode(record.AE);\r\n                 openWindowWithPost(\"/Vaccination/RecordM/RecordDetail.aspx\", \"RecordDetail\", 930, 450, obj);\r\n             };\r\n\r\n             $scope.goAddVaccine = function (record) {\r\n                 //popUpWindow(\"/Vaccination/RecordM/AddVaccine.aspx?i=1\", \"AddVaccine\", 930, 450);\r\n                 var data = [];\r\n                 angular.forEach($scope.TM.data, function (item, index) {\r\n                     data.push(item.SRVC);\r\n                 });\r\n                 var obj = {};\r\n                 obj[\"a\"] = data;\r\n                 obj[\"c\"] = CC;\r\n                 openWindowWithPost(\"/Vaccination/RecordM/AddVaccine.aspx\", \"AddVaccine\", 930, 450, obj);\r\n             };\r\n\r\n             $scope.getClass = function (record) {\r\n                 var rtn='';\r\n                 switch (record.CC) {\r\n                     case 1:\r\n                         rtn = 'yellowcolor';\r\n                       \r\n                         break;\r\n                     case 2:\r\n                         rtn = 'pinkcolor';\r\n                         break;\r\n                 }\r\n\r\n                 return rtn;\r\n             };\r\n\r\n             function htmlEncode(value) {\r\n                 //create a in-memory div, set it's inner text(which jQuery automatically encodes)\r\n                 //then grab the encoded contents back out.  The div never exists on the page.\r\n                 return $('<div/>').text(value).html();\r\n             }\r\n\r\n             function htmlDecode(value) {\r\n                 return $('<div/>').html(value).text();\r\n             }\r\n         }]);\r\n\r\nvar getRecordDataID = function (obj) {\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        var keepGoing = true;\r\n        angular.forEach(controllerScope.TM.data, function (item, index) {\r\n            if (keepGoing) {\r\n                if (obj.SCode == item.SRVC) {\r\n                    item.RID = obj.RID;\r\n                    item.VBID = VBID;\r\n                    keepGoing = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        console.log(controllerScope.TM.data);\r\n    });\r\n};\r\n\r\n\r\nvar AddApplyRecord =function(obj)\r\n{\r\n    //console.log(obj);\r\n    //alert(54321);\r\n    if (obj == null)\r\n        return;\r\n\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        var keepGoing = true;\r\n        angular.forEach(controllerScope.TM.data, function (item, index) {\r\n            if (keepGoing) {\r\n              \r\n                if (item.RID == obj.RID) {\r\n                    item.CD = obj.CD;\r\n                    item.VB = obj.VB;\r\n                    item.ID = obj.ID;\r\n                    item.ON = obj.ON;\r\n                }\r\n            }\r\n        });\r\n\r\n        //console.log(controllerScope.TM.data);\r\n    });\r\n}\r\nvar getNewVaccine = function (obj) {\r\n\r\n    var Vobj =\r\n    {\r\n        \"YMID\": 0,\r\n        \"RID\": obj[\"I\"],\r\n        \"AE\": \"\",\r\n        \"P\": 0,\r\n        \"SRVID\": 0,\r\n        \"SRVC\": obj[\"R\"],\r\n        \"ID\": null,\r\n        \"CD\": null,\r\n        \"OI\": 0,\r\n        \"CT\": \"\",\r\n        \"VB\": 0,\r\n        \"AD\": null,\r\n        \"ON\": ON,\r\n        \"CC\": 0,\r\n        \"IR\": false\r\n    };\r\n\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        var thisIndex = 0;\r\n        angular.forEach(controllerScope.TM.data, function (item, index) {\r\n            if(thisIndex ==0 && item.ID!=null){\r\n                var thisIndex = index;\r\n            }\r\n        });\r\n\r\n        controllerScope.TM.data.splice(thisIndex, 0, Vobj);\r\n    });\r\n   \r\n\r\n};"]}