{"version":3,"sources":["RegisterData.src.js"],"names":["jQuery","$","extend","form","url","data","method","attr","action","css","display","addData","name","isArray","i","length","value","key","hasOwnProperty","append","type","String","appendTo","document","on","e","location","href","preventDefault","angular","module","controller","$scope","PageProvider","TPM","$http","PM","TM","VM","CountyAry","SelectCounty","TownAry","SelectTown","changePage","pageIndex","show","pgData","genPageData","postData","BirthDateS","val","BirthDateE","CaseName","CaseIdNo","HouseNo","ContactName","ContactIdNo","ContactBirthDate","filterPageData","message","$apply","goDetail","record","obj","doPOST","querySelector","SelectCountyChange","param","headers","Content-Type","success","status","config","concat","error","BindCounty","openOrgs","popUpWindow","refresh","locationID","setTimeout","getCode","code","text","id","trigger"],"mappings":";;AAAAA,OAAO,SAAUC,GACbA,EAAEC,QACEC,KAAM,SAAUC,EAAKC,EAAMC,GACT,MAAVA,IAAgBA,EAAS,QACjB,MAARD,IAAcA,KAElB,IAAIF,GAAOF,EAAE,6BAA6BM,MACtCD,OAAQA,EACRE,OAAQJ,IACTK,KACCC,QAAS,SAGTC,EAAU,SAAUC,EAAMP,GAC1B,GAAIJ,EAAEY,QAAQR,GACV,IAAK,GAAIS,GAAI,EAAGA,EAAIT,EAAKU,OAAQD,IAAK,CAClC,GAAIE,GAAQX,EAAKS,EACjBH,GAAQC,EAAO,KAAMI,OAEtB,IAAoB,gBAATX,GACd,IAAK,GAAIY,KAAOZ,GACRA,EAAKa,eAAeD,IACpBN,EAAQC,EAAO,IAAMK,EAAM,IAAKZ,EAAKY,QAG9B,OAARZ,GACPF,EAAKgB,OAAOlB,EAAE,WAAWM,MACrBa,KAAM,SACNR,KAAMS,OAAOT,GACbI,MAAOK,OAAOhB,MAK1B,KAAK,GAAIY,KAAOZ,GACRA,EAAKa,eAAeD,IACpBN,EAAQM,EAAKZ,EAAKY,GAI1B,OAAOd,GAAKmB,SAAS,aAKjCrB,EAAE,WACEA,EAAEsB,UAAUC,GAAG,QAAS,UAAW,SAAUC,GAGzC,MAFAC,UAASC,KAAO,iCAChBF,EAAEG,kBACK,IAGX3B,EAAEsB,UAAUC,GAAG,QAAS,aAAc,SAAUC,GAG5C,MADAA,GAAEG,kBACK,MAKfC,QAAQC,OAAO,SAAU,QAAS,UAAU,UAClCC,WAAW,gBAAiB,SAAU,eAAgB,eAAgB,QAAS,SAAUC,EAAQC,EAAaC,EAAKC,GAEhHH,EAAOI,GAAKH,EACZD,EAAOK,MACPL,EAAOM,MAEPN,EAAOM,GAAGC,aACVP,EAAOM,GAAGE,aAAe,IAEzBR,EAAOM,GAAGG,WACVT,EAAOM,GAAGI,WAAa,IAEvBV,EAAOW,WAAa,SAAUC,GAC1B3C,EAAE,YAAY4C,MACd,IAAIC,GAASd,EAAOI,GAAGW,YAAYH,GAC/BI,IAEJA,GAASC,WAAahD,EAAE,eAAeiD,MACvCF,EAASG,WAAalD,EAAE,eAAeiD,MACvCF,EAASI,SAAWnD,EAAE,aAAaiD,MACnCF,EAASK,SAAWpD,EAAE,aAAaiD,MACnCF,EAASM,QAAUrD,EAAE,YAAYiD,MAEjCF,EAASO,YAActD,EAAE,gBAAgBiD,MACzCF,EAASQ,YAAcvD,EAAE,gBAAgBiD,MACzCF,EAASS,iBAAmBxD,EAAE,qBAAqBiD,MAEnDF,EAAWhB,EAAOI,GAAGsB,eAAeZ,EAAQE,GAE5ChB,EAAOI,GAAGO,WAAW,2CAA4CK,EAAU,SAAU3C,GACjF2B,EAAOK,GAAGhC,KAAOA,EAAKsD,QACtB3B,EAAO4B,OAAO,iBAItB5B,EAAOW,WAAW,GAElBX,EAAO6B,SAAW,SAAUC,GACxB,GAAIC,KACJA,GAAO,EAAID,EAAU,EACrB5B,EAAI8B,OAAO,gDAAiDD,EAAIxC,SAAS0C,cAAc,aAI3FjC,EAAOkC,mBAAqB,WACxB,GAAIlB,KACJA,GAAY,EAAI,OAChBA,EAAY,EAAI/C,EAAE,iBAAiBiD,MAGnCf,GACI7B,OAAQ,OACRF,IAAK,8BACLC,KAAMJ,EAAEkE,MAAMnB,GACdoB,SAAWC,eAAgB,uCAE5BC,QAAQ,SAAUjE,EAAMkE,EAAQH,EAASI,GACtCnE,EAAOA,MACHA,EAAKU,OAAS,GACdiB,EAAOM,GAAGG,WAAagC,OAAOpE,GAC9B2B,EAAOM,GAAGI,WAAa,MAGvBV,EAAOM,GAAGG,WACVT,EAAOM,GAAGI,WAAa,OAG9BgC,MAAM,SAAUrE,EAAMkE,EAAQH,EAASI,OAI9CxC,EAAO2C,WAAa,WAChB,GAAI3B,KACJA,GAAY,EAAI,SAEhBb,GACI7B,OAAQ,OACRF,IAAK,8BACLC,KAAMJ,EAAEkE,MAAMnB,GACdoB,SAAWC,eAAgB,uCAE7BC,QAAQ,SAAUjE,EAAMkE,EAAQH,EAASI,GACtCnE,EAAOA,MACHA,EAAKU,OAAS,GACdiB,EAAOM,GAAGC,aAAekC,OAAOpE,GAChC2B,EAAOM,GAAGE,aAAe,MAGzBR,EAAOM,GAAGC,aACVP,EAAOM,GAAGE,aAAe,OAIhCkC,MAAM,SAAUrE,EAAMkE,EAAQH,EAASI,OAM7CxC,EAAO2C,aAEP3C,EAAO4C,SAAW,SAAUd,GACxB5B,EAAI2C,YAAY,wBAAyB,kBAAmB,IAAK,MAIrE7C,EAAO8C,QAAU,WACb,GAAIpD,GAAWzB,EAAE,eAAeiD,MAC5B6B,EAAa9E,EAAE,iBAAiBiD,KACpC8B,YAAW,WACPhD,EAAO4B,OAAO,WACV5B,EAAOM,GAAGZ,SAAWA,EACrBM,EAAOM,GAAGyC,WAAaA,KAE5B,MAOpB,IAAIE,SAAU,SAAUC,GACXjF,EAAE,eAAeiD,IAAIgC,EAAKC,MAC1BlF,EAAE,iBAAiBiD,IAAIgC,EAAKE,IAC5BnF,EAAE,eAAeoF,QAAQ","file":"RegisterData.min.js","sourcesContent":["jQuery(function ($) {\r\n    $.extend({\r\n        form: function (url, data, method) {\r\n            if (method == null) method = 'POST';\r\n            if (data == null) data = {};\r\n\r\n            var form = $('<form autocomplete=\"off\">').attr({\r\n                method: method,\r\n                action: url\r\n            }).css({\r\n                display: 'none'\r\n            });\r\n\r\n            var addData = function (name, data) {\r\n                if ($.isArray(data)) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        var value = data[i];\r\n                        addData(name + '[]', value);\r\n                    }\r\n                } else if (typeof data === 'object') {\r\n                    for (var key in data) {\r\n                        if (data.hasOwnProperty(key)) {\r\n                            addData(name + '[' + key + ']', data[key]);\r\n                        }\r\n                    }\r\n                } else if (data != null) {\r\n                    form.append($('<input>').attr({\r\n                        type: 'hidden',\r\n                        name: String(name),\r\n                        value: String(data)\r\n                    }));\r\n                }\r\n            };\r\n\r\n            for (var key in data) {\r\n                if (data.hasOwnProperty(key)) {\r\n                    addData(key, data[key]);\r\n                }\r\n            }\r\n\r\n            return form.appendTo('body');\r\n        }\r\n    });\r\n});\r\n\r\n$(function () {\r\n    $(document).on(\"click\", \"#AddBtn\", function (e) {\r\n        location.href = \"/CaseMaintain/UserProfile.aspx\";\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#SearchBtn\", function (e) {\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\", \"FilterM\",\"ToolM\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", 'ToolProvider', '$http', function ($scope, PageProvider,TPM, $http) {\r\n\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.VM = {};\r\n\r\n             $scope.VM.CountyAry = [];\r\n             $scope.VM.SelectCounty = \"0\";\r\n\r\n             $scope.VM.TownAry = [];\r\n             $scope.VM.SelectTown = \"0\";\r\n\r\n             $scope.changePage = function (pageIndex) {\r\n                 $(\"#tmBlock\").show();\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n\r\n                 postData.BirthDateS = $(\"#BirthDateS\").val();\r\n                 postData.BirthDateE = $(\"#BirthDateE\").val();\r\n                 postData.CaseName = $(\"#CaseName\").val();\r\n                 postData.CaseIdNo = $(\"#CaseIdNo\").val();\r\n                 postData.HouseNo = $(\"#HouseNo\").val();\r\n\r\n                 postData.ContactName = $(\"#ContactName\").val();\r\n                 postData.ContactIdNo = $(\"#ContactIdNo\").val();\r\n                 postData.ContactBirthDate = $(\"#ContactBirthDate\").val();\r\n\r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 //console.log(postData);\r\n                 $scope.PM.changePage(\"/Vaccination/RecordM/RegisterDataOP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n                     $scope.$apply(function () { });\r\n                 });\r\n             };\r\n\r\n             $scope.changePage(1);\r\n\r\n             $scope.goDetail = function (record) {\r\n                 var obj = {};\r\n                 obj[\"i\"] = record[\"C\"];\r\n                 TPM.doPOST(\"/Vaccination/RecordM/RegisterData_Detail.aspx\", obj,document.querySelector(\"#MyForm\"));\r\n             };\r\n\r\n\r\n             $scope.SelectCountyChange = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"Town\";\r\n                 postData[\"p\"] = $(\"#SelectCounty\").val();\r\n\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                   .success(function (data, status, headers, config) {\r\n                       data = data || [];\r\n                       if (data.length > 0) {\r\n                           $scope.VM.TownAry = [].concat(data);;\r\n                           $scope.VM.SelectTown = \"0\";\r\n                       }\r\n                       else {\r\n                           $scope.VM.TownAry = [];\r\n                           $scope.VM.SelectTown = \"0\";\r\n                       }\r\n                   })\r\n                   .error(function (data, status, headers, config) {\r\n                   });\r\n             };\r\n\r\n             $scope.BindCounty = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"County\";\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                  .success(function (data, status, headers, config) {\r\n                      data = data || [];\r\n                      if (data.length > 0) {\r\n                          $scope.VM.CountyAry = [].concat(data);\r\n                          $scope.VM.SelectCounty = \"0\";\r\n                      }\r\n                      else {\r\n                          $scope.VM.CountyAry = [];\r\n                          $scope.VM.SelectCounty = \"0\";\r\n                      }\r\n\r\n                  })\r\n                  .error(function (data, status, headers, config) {\r\n                  });\r\n\r\n             };\r\n\r\n\r\n             $scope.BindCounty();\r\n\r\n             $scope.openOrgs = function (record) {\r\n                 TPM.popUpWindow(\"/SelectSingleOrg.aspx\", \"SelectSingleOrg\", 620, 450);\r\n             };\r\n\r\n\r\n             $scope.refresh = function () {\r\n                 var location = $('#tbLocation').val();\r\n                 var locationID = $('#hfLocationID').val();\r\n                 setTimeout(function () {\r\n                     $scope.$apply(function () {\r\n                         $scope.VM.location = location;\r\n                         $scope.VM.locationID = locationID;\r\n                     });\r\n                 }, 1);\r\n\r\n             };\r\n}]);\r\n\r\n\r\n\r\nvar getCode = function (code) {\r\n             $(\"#tbLocation\").val(code.text);\r\n             $(\"#hfLocationID\").val(code.id);\r\n             $('#refreshBtn').trigger('click');\r\n};\r\n\r\n\r\n\r\n\r\n"]}