/*! NIIS 2016-05-09 */

$(function(){$(document).on("click","#addBtn",function(a){return location.href="/Vaccination/RecordM/StudentRecord_Add.aspx",a.preventDefault(),!1}),$(document).on("click","#uploadBtn",function(a){return location.href="/Vaccination/RecordM/StudentRecord_Upload.aspx",a.preventDefault(),!1})}),angular.module("MyApp",["PageM","FilterM","ToolM","cfp.hotkeys"]).controller("MyController",["$scope","PageProvider","ToolProvider","hotkeys",function(a,b,c,d){if(a.PM=b,a.TM={},a.VM={},a.VM.locationObj={},a.VM.locationObj.text="",a.VM.locationObj.id=0,a.VM.title="",sAry=sAry||[],a.VM.sAry=[].concat(sAry),a.VM.selectSchool="",a.changePage=function(b,c){$("#tmBlock").show();var d=a.PM.genPageData(b),e={};e.s="",e.e="",e.lid=window.getOrgID(),""==window.getOrgName()&&(e.oid=0),e.s=$("#tbDateStart").val().replace(/年/g,""),e.e=$("#tbDateEnd").val().replace(/年/g,""),e.ei=a.VM.selectSchool,e=a.PM.filterPageData(d,e),a.PM.changePage("/Vaccination/RecordM/StudentRecordOP.aspx",e,function(b){a.TM.data=b.message,a.$apply(function(){})})},d.add({combo:"enter",description:"Description goes here",allowIn:["INPUT","BUTTON","SELECT","TEXTAREA"],callback:function(b,c){var d=document.activeElement.type;"text"!=d&&"select-one"!=d||a.changePage(1)}}),a.goDetail=function(b){a.save();var d=[];d.i=b.I,c.doPOST("/Vaccination/RecordM/StudentRecord_Detail.aspx",d,document.querySelector("#MyForm"))},a.save=function(){var b={};return b.OrgID=window.getOrgID(),b.OrgName=window.getOrgName(),b.tbDateStart=$("#tbDateStart").val().replace(/年/g,""),b.tbDateEnd=$("#tbDateEnd").val().replace(/年/g,""),b.pgNow=a.PM.pgNow,b.selectSchool=a.VM.selectSchool,c.setData(b),JSON.stringify(b)},a.doReset=function(){$("#tbDateStart").val(""),$("#tbDateEnd").val(""),a.VM.selectSchool="",$("#tmBlock").hide(),a.PM.reset(),window.setOrgID(defaultOrgID),window.setOrgName(defaultOrgName)},location.hash.length>0){var e=c.getData();$("#ucOrgID").val(e.OrgID),$("#ucOrgName").val(e.OrgName),$("#tbDateStart").val(e.tbDateStart+"年"),$("#tbDateEnd").val(e.tbDateEnd+"年"),a.VM.selectSchool.val(e.selectSchool),a.changePage(e.pgNow)}else a.doReset()}]);
//# sourceMappingURL=StudentRecord.min.js.map