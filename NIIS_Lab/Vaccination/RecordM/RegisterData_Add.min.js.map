{"version":3,"sources":["RegisterData_Add.src.js"],"names":["jQuery","$","extend","form","url","data","method","attr","action","css","display","addData","name","isArray","i","length","value","key","hasOwnProperty","append","type","String","appendTo","document","on","e","location","href","preventDefault","angular","module","controller","$scope","PageProvider","$http","PM","TM","VM","CountyAry","I","N","SelectCounty","TownAry","SelectTown","changePage","pageIndex","show","pgData","genPageData","postData","BirthDateS","val","BirthDateE","CaseName","CaseIdNo","HouseNo","ContactName","ContactIdNo","ContactBirthDate","filterPageData","message","$apply","goDetail","record","obj","TPM","doPOST","querySelector","SelectCountyChange","param","headers","Content-Type","success","status","config","concat","error","BindCounty","openOrgs","popUpWindow"],"mappings":"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","file":"RegisterData_Add.min.js","sourcesContent":["jQuery(function ($) {\r\n    $.extend({\r\n        form: function (url, data, method) {\r\n            if (method == null) method = 'POST';\r\n            if (data == null) data = {};\r\n\r\n            var form = $('<form autocomplete=\"off\">').attr({\r\n                method: method,\r\n                action: url\r\n            }).css({\r\n                display: 'none'\r\n            });\r\n\r\n            var addData = function (name, data) {\r\n                if ($.isArray(data)) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        var value = data[i];\r\n                        addData(name + '[]', value);\r\n                    }\r\n                } else if (typeof data === 'object') {\r\n                    for (var key in data) {\r\n                        if (data.hasOwnProperty(key)) {\r\n                            addData(name + '[' + key + ']', data[key]);\r\n                        }\r\n                    }\r\n                } else if (data != null) {\r\n                    form.append($('<input>').attr({\r\n                        type: 'hidden',\r\n                        name: String(name),\r\n                        value: String(data)\r\n                    }));\r\n                }\r\n            };\r\n\r\n            for (var key in data) {\r\n                if (data.hasOwnProperty(key)) {\r\n                    addData(key, data[key]);\r\n                }\r\n            }\r\n\r\n            return form.appendTo('body');\r\n        }\r\n    });\r\n});\r\n\r\n$(function () {\r\n    $(document).on(\"click\", \"#AddBtn\", function (e) {\r\n        location.href = \"/CaseMaintain/UserProfile.aspx\";\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#SearchBtn\", function (e) {\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\", \"FilterM\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\",'$http', function ($scope, PageProvider, $http) {\r\n\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.VM = {};\r\n\r\n             $scope.VM.CountyAry = [{ I: '0', N: \"全部\" }];\r\n             $scope.VM.SelectCounty = \"0\";\r\n\r\n             $scope.VM.TownAry = [{ I: '0', N: \"全部\" }];\r\n             $scope.VM.SelectTown = \"0\";\r\n\r\n\r\n             $scope.changePage = function (pageIndex) {\r\n                 $(\"#tmBlock\").show();\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n\r\n                 postData.BirthDateS = $(\"#BirthDateS\").val();\r\n                 postData.BirthDateE = $(\"#BirthDateE\").val();\r\n                 postData.CaseName = $(\"#CaseName\").val();\r\n                 postData.CaseIdNo = $(\"#CaseIdNo\").val();\r\n                 postData.HouseNo = $(\"#HouseNo\").val();\r\n\r\n                 postData.ContactName = $(\"#ContactName\").val();\r\n                 postData.ContactIdNo = $(\"#ContactIdNo\").val();\r\n                 postData.ContactBirthDate = $(\"#ContactBirthDate\").val();\r\n\r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 //console.log(postData);\r\n                 $scope.PM.changePage(\"/Vaccination/RecordM/RegisterDataOP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n                     $scope.$apply(function () { });\r\n                 });\r\n             };\r\n\r\n             $scope.changePage(1);\r\n           \r\n             $scope.goDetail = function (record) {\r\n                 var obj = {};\r\n                 obj[\"i\"] = record[\"C\"];\r\n                 TPM.doPOST(\"/Vaccination/RecordM/RegisterData_Detail.aspx\", obj,document.querySelector(\"#MyForm\"));\r\n             };\r\n\r\n             $scope.SelectCountyChange = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"Town\";\r\n                 postData[\"p\"] = $(\"#SelectCounty\").val();\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                  .success(function (data, status, headers, config) {\r\n                      data = data || [];\r\n                      if (data.length > 0) {\r\n                          $scope.VM.TownAry = [{ I: '0', N: \"全部\" }].concat(data);;\r\n                          $scope.VM.SelectTown = \"0\";\r\n                      }\r\n                      else {\r\n                          $scope.VM.TownAry = [{ I: '0', N: \"全部\" }];\r\n                          $scope.VM.SelectTown = \"0\";\r\n                      }\r\n                  })\r\n                  .error(function (data, status, headers, config) {\r\n                  });\r\n             };\r\n\r\n             $scope.BindCounty = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"County\";\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                 .success(function (data, status, headers, config) {\r\n                     data = data || [];\r\n                     if (data.length > 0) {\r\n                         $scope.VM.CountyAry = [{ I: '0', N: \"全部\" }].concat(data);\r\n                         $scope.VM.SelectCounty = \"0\";\r\n                     }\r\n                     else {\r\n                         $scope.VM.CountyAry = [{ I: '0', N: \"全部\" }];\r\n                         $scope.VM.SelectCounty = \"0\";\r\n                     }\r\n                 })\r\n                 .error(function (data, status, headers, config) {\r\n                 });\r\n             };\r\n\r\n             $scope.BindCounty();\r\n\r\n             $scope.openOrgs = function (record) {\r\n                 TPM.popUpWindow(\"/SelectSingleOrg.aspx\", \"SelectSingleOrg\", 620, 450);\r\n             };\r\n}]);\r\n\r\n\r\n\r\n\r\n\r\n"]}