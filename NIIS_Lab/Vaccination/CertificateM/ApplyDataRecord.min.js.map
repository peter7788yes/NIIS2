{"version":3,"sources":["ApplyDataRecord.src.js"],"names":["$","document","on","e","location","href","preventDefault","angular","module","controller","$scope","PageProvider","PM","TM","VM","u","uJson","CountyAry","I","N","SelectCounty","TownAry","SelectTown","changePage","pageIndex","show","pgData","genPageData","postData","i","filterPageData","data","message","forEach","item","index","ary","message2","item2","index2","AI","push","$apply","goDownload","record","obj","TPM","doPOST","querySelector","refresh","val","locationID","setTimeout","getCode","code","text","id","trigger"],"mappings":";;AAAAA,EAAE,WACEA,EAAEC,UAAUC,GAAG,QAAS,WAAY,SAAUC,GAG1C,MAFAC,UAASC,KAAO,kDAChBF,EAAEG,kBACK,MAIfC,QAAQC,OAAO,SAAU,QAAS,YACxBC,WAAW,gBAAiB,SAAU,eAAgB,SAAUC,EAAQC,GAErED,EAAOE,GAAKD,EACZD,EAAOG,MAEPH,EAAOI,MACPJ,EAAOI,GAAGC,EAAIC,MACdN,EAAOI,GAAGG,YAAeC,EAAG,IAAKC,EAAG,OACpCT,EAAOI,GAAGM,aAAe,IAEzBV,EAAOI,GAAGO,UAAaH,EAAG,IAAKC,EAAG,OAClCT,EAAOI,GAAGQ,WAAa,IAEvBZ,EAAOa,WAAa,SAAUC,GAC1BxB,EAAE,YAAYyB,MACd,IAAIC,GAAShB,EAAOE,GAAGe,YAAYH,GAC/BI,IACJA,GAAY,EAAIC,EAChBD,EAAWlB,EAAOE,GAAGkB,eAAeJ,EAAQE,GAC5ClB,EAAOE,GAAGW,WAAW,mDAAoDK,EAAU,SAAUG,GACzFrB,EAAOG,GAAGkB,KAAOA,EAAKC,QAEtBzB,QAAQ0B,QAAQF,EAAKC,QAAS,SAAUE,EAAMC,GAC1CD,EAAKE,OACL7B,QAAQ0B,QAAQF,EAAKM,SAAU,SAAUC,EAAOC,GACxCL,EAAKhB,GAAKoB,EAAME,IAChBN,EAAKE,IAAIK,KAAKH,OAI1B5B,EAAOgC,OAAO,iBAItBhC,EAAOa,WAAW,GAElBb,EAAOiC,WAAa,SAAUC,GAC1B,GAAIC,KACJA,GAAO,EAAID,EAAW,GACtBE,IAAIC,OAAO,4DAA6DF,EAAI5C,SAAS+C,cAAc,aAGvGtC,EAAOuC,QAAU,WACb,GAAI7C,GAAWJ,EAAE,eAAekD,MAC5BC,EAAanD,EAAE,iBAAiBkD,KACpCE,YAAW,WACP1C,EAAOgC,OAAO,WACVhC,EAAOI,GAAGV,SAAWA,EACrBM,EAAOI,GAAGqC,WAAaA,KAE5B,MAOpB,IAAIE,SAAU,SAAUC,GACpBtD,EAAE,eAAekD,IAAII,EAAKC,MAC1BvD,EAAE,iBAAiBkD,IAAII,EAAKE,IAC5BxD,EAAE,eAAeyD,QAAQ","file":"ApplyDataRecord.min.js","sourcesContent":["$(function () {\r\n    $(document).on(\"click\", \"#lastBtn\", function (e) {\r\n        location.href = \"/Vaccination/CertificateM/PrintCertificate.aspx\";\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\", \"FilterM\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", function ($scope, PageProvider) {\r\n\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n\r\n             $scope.VM = {};\r\n             $scope.VM.u = uJson;\r\n             $scope.VM.CountyAry = [{ I: '0', N: \"全部\" }];\r\n             $scope.VM.SelectCounty = \"0\";\r\n\r\n             $scope.VM.TownAry = [{ I: '0', N: \"全部\" }];\r\n             $scope.VM.SelectTown = \"0\";\r\n\r\n             $scope.changePage = function (pageIndex) {\r\n                 $(\"#tmBlock\").show();\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n                 postData[\"i\"] = i;\r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 $scope.PM.changePage(\"/Vaccination/CertificateM/ApplyDataRecordOP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n\r\n                     angular.forEach(data.message, function (item, index) {\r\n                         item.ary = [];\r\n                         angular.forEach(data.message2, function (item2, index2) {\r\n                             if (item.I == item2.AI) {\r\n                                 item.ary.push(item2);\r\n                             }\r\n                         });\r\n                     });\r\n                     $scope.$apply(function () { });\r\n                 });\r\n             };\r\n\r\n             $scope.changePage(1);\r\n\r\n             $scope.goDownload = function (record) {\r\n                 var obj = [];\r\n                 obj['i'] = record[\"FI\"];\r\n                 TPM.doPOST(\"/Vaccination/CertificateM/ApplyDataRecord_DownloadOP.aspx\", obj,document.querySelector('#MyForm'));\r\n             };\r\n\r\n             $scope.refresh = function () {\r\n                 var location = $('#tbLocation').val();\r\n                 var locationID = $('#hfLocationID').val();\r\n                 setTimeout(function () {\r\n                     $scope.$apply(function () {\r\n                         $scope.VM.location = location;\r\n                         $scope.VM.locationID = locationID;\r\n                     });\r\n                 }, 1);\r\n\r\n             };\r\n\r\n           \r\n         }]);\r\n\r\nvar getCode = function (code) {\r\n    $(\"#tbLocation\").val(code.text);\r\n    $(\"#hfLocationID\").val(code.id);\r\n    $('#refreshBtn').trigger('click');\r\n};\r\n\r\n\r\n"]}