{"version":3,"sources":["LocationSetting_Detail.src.js"],"names":["$","document","on","e","history","go","preventDefault","window","close","UP","prop","stateAry","length","each","reverse","index","item","$input","val","EV","$label","append","EN","prepend","this","tbOtherIDs","split","tbOther","ary","push","encodeURIComponent","JSON","stringify","angular","element","scope","VM","DayTime","attr","fillssee","click","module","controller","$scope","TPM","$http","Vaccine","VaccineIDs","d1","d2","d3","d4","d5","d6","d7","timeAry","ss","ee","ddListOutAry","CountyAry","I","N","concat","countyJson","TownAry","townJson","VillageAry","villageJson","SelectCounty","county","SelectTown","town","SelectVillage","village","ddlAgState","AgencyState","show","BindCounty","postData","method","url","data","param","headers","Content-Type","success","status","config","error","SelectCountyChange","SelectTownChange","addDay","addTime","Day$index","clickDayTime","isStart","$parent$index","$index","WdatePicker","maxDate","el","dateFmt","lang","minDate","refresh","location","setTimeout","$apply","openAddVaccine","i","obj","openWindowWithPost","removeDay","splice","removeTime","$event","target","value","getIds","rtn","text","ids","trigger"],"mappings":"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","file":"LocationSetting_Detail.min.js","sourcesContent":["$(function () {\r\n    $(document).on(\"click\", \"#lastBtn\", function (e) {\r\n        history.go(-1);\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#cancelBtn\", function (e) {\r\n        window.close();\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    if(UP==false)\r\n    {\r\n        $(\"#SelectCounty\").prop(\"disabled\", true);\r\n        $(\"#SelectTown\").prop(\"disabled\", true);\r\n        $(\"#SelectVillage\").prop(\"disabled\", true);\r\n    }\r\n\r\n    var aryLengh = stateAry.length;\r\n    var aryNumber = \"\";\r\n    $.each(stateAry.reverse(), function (index, item) {\r\n        var $input = $(\"<input class='cbs' type='checkbox'/>\").val(item.EV);\r\n        var $label = $(\"<label/>\");\r\n        $label.append($input).append(item.EN);\r\n        $(\"#td\").prepend($label);\r\n    });\r\n    $(\"#td\").append(\"<br/><label><input id='cbOther'  type='checkbox'/>其他(請說明)：<input id='tbOther'  name='tbOther' class='text02' type='text'/>科</label>\");\r\n\r\n    $(document).on(\"change\", \"#tbOther\", function (e) {\r\n        if ($(this).val() == \"\")\r\n        {\r\n            $(\"#cbOther\").prop('checked', false);\r\n        }\r\n        else\r\n        {\r\n            $(\"#cbOther\").prop('checked', true);\r\n        }\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $.each(tbOtherIDs.split(\",\"), function (index, item) {\r\n        $(\"input:checkbox[value='\" + item + \"']\").prop(\"checked\", true);\r\n    });\r\n\r\n    $(\"#tbOther\").val(tbOther);\r\n\r\n    if ($(\"#tbOther\").val() == \"\")\r\n    {\r\n        $(\"#cbOther\").prop('checked', false);\r\n    }\r\n    else\r\n    {\r\n        $(\"#cbOther\").prop('checked', true);\r\n    }\r\n\r\n    $(document).on(\"submit\", \"form\", function (e) {\r\n        var ary = [];\r\n        $.each($(\".cbs\"), function (index, item) {\r\n            if ($(item).prop(\"checked\") == true) {\r\n                ary.push($(item).val());\r\n            }\r\n        });\r\n        $(\"#did\").val(ary);\r\n        $(\"#daytime\").val(encodeURIComponent(JSON.stringify(angular.element($('section')[0]).scope().VM.DayTime)));\r\n    });\r\n\r\n    //$(document).on(\"change\", \"#ddAgState\", function (e) {\r\n    //    if($(this).val()==\"2\")\r\n    //    {\r\n    //        $('.tbDates').show();\r\n    //    }\r\n    //    else\r\n    //    {\r\n    //       $('.tbDates').hide();\r\n    //    }\r\n    //});\r\n\r\n    $('#rb1,#rb2,#rb3,#rb4,#rbB1,#rbB2').attr('required', 'required');\r\n});\r\n\r\nvar fillssee = function (element) {\r\n    element.click();\r\n};\r\n\r\nangular.module(\"MyApp\", ['ToolM'])\r\n         .controller(\"MyController\", [\"$scope\",\"ToolProvider\",\"$http\", function ($scope,TPM,$http) {\r\n             $scope.VM = {};\r\n\r\n             $scope.VM.Vaccine = \"\";\r\n             $scope.VM.VaccineIDs = \"\";\r\n            \r\n             $scope.VM.DayTime = [{ d1: false, d2: false, d3: false, d4: false, d5: false, d6: false, d7: false, timeAry: [{ ss: \"\", ee: \"\" }] }];\r\n\r\n             ddListOutAry = ddListOutAry || [];\r\n             if (ddListOutAry.length > 0)\r\n                 $scope.VM.DayTime = ddListOutAry;\r\n\r\n             $scope.VM.CountyAry = [{ I: '0', N: \"縣市\" }].concat(countyJson);\r\n             $scope.VM.TownAry = [{ I: '0', N: \"鄉鎮\" }].concat(townJson);\r\n             $scope.VM.VillageAry = [{ I: \"0\", N: \"村里\" }].concat(villageJson);\r\n             \r\n             $scope.VM.SelectCounty = county;\r\n             $scope.VM.SelectTown = town;\r\n             $scope.VM.SelectVillage = village;;\r\n\r\n             $scope.VM.ddlAgState = AgencyState;\r\n\r\n             $(\"#SelectCounty\").show();\r\n             $(\"#SelectTown\").show();\r\n             $(\"#SelectVillage\").show();\r\n             \r\n             $scope.BindCounty = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"County\";\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n                            data = data || [];\r\n                            if (data.length > 0) {\r\n                                $scope.VM.CountyAry = [{ I: '0', N: \"全部\" }].concat(data);\r\n                                $scope.VM.SelectCounty = \"0\";\r\n                            }\r\n                            else {\r\n                                $scope.VM.CountyAry = [{ I: '0', N: \"全部\" }];\r\n                                $scope.VM.SelectCounty = \"0\";\r\n                            }\r\n                 })\r\n                 .error(function (data, status, headers, config) {\r\n                 });\r\n             };\r\n\r\n             $scope.SelectCountyChange = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"Town\";\r\n                 postData[\"p\"] = $(\"#SelectCounty\").val();\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n               .success(function (data, status, headers, config) {\r\n                   data = data || [];\r\n                           if (data.length > 0) {\r\n                               $scope.VM.TownAry = [{ I: '0', N: \"全部\" }].concat(data);;\r\n                               $scope.VM.SelectTown = \"0\";\r\n                           }\r\n                           else {\r\n                               $scope.VM.TownAry = [{ I: '0', N: \"全部\" }];\r\n                               $scope.VM.SelectTown = \"0\";\r\n                           }\r\n\r\n                           $scope.VM.VillageAry = [{ I: \"0\", N: \"全部\" }];\r\n                           $scope.VM.SelectVillage = \"0\";\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.SelectTownChange = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"Village\";\r\n                 postData[\"p\"] = $(\"#SelectTown\").val();\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n               .success(function (data, status, headers, config) {\r\n                   data = data || [];\r\n                           if (data.length > 0) {\r\n                               $scope.VM.VillageAry = [{ I: \"0\", N: \"全部\" }].concat(data);\r\n                           }\r\n                           else {\r\n                               $scope.VM.VillageAry = [{ I: \"0\", N: \"全部\" }];\r\n                           }\r\n                           $scope.VM.SelectVillage = \"0\";\r\n\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.addDay = function () {\r\n                 $scope.VM.DayTime.push({ d1: false, d2: false, d3: false, d4: false, d5: false, d6: false, d7: false, timeAry: [{ ss: \"\", ee: \"\" }] });\r\n             };\r\n             $scope.addTime = function (Day$index) {\r\n                 $scope.VM.DayTime[Day$index].timeAry.push({ ss: \"\", ee: \"\" });\r\n             };\r\n\r\n             $scope.clickDayTime = function (isStart, $parent$index, $index) {\r\n                 if (isStart==true)\r\n                     WdatePicker({ maxDate: '#F{$dp.$D(\\'' + 'ee' + $parent$index + $index + '\\')}', el: 'ss' + $parent$index + $index, dateFmt: 'HH:mm', lang: 'zh-tw' });\r\n                 else\r\n                     WdatePicker({ minDate: '#F{$dp.$D(\\'' + 'ss' + $parent$index + $index + '\\')}', el: 'ee' + $parent$index + $index, dateFmt: 'HH:mm', lang: 'zh-tw' });\r\n             };\r\n\r\n             $scope.refresh = function () {\r\n                 var location = $('#tbLocation').val();\r\n                 var Vaccine = $('#tbVaccine').val();\r\n                 var VaccineIDs = $('#hfVaccineIDs').val();\r\n\r\n                 setTimeout(function () {\r\n                     $scope.$apply(function () {\r\n                         $scope.VM.location = location;\r\n                         $scope.VM.Vaccine = Vaccine;\r\n                         $scope.VM.VaccineIDs = VaccineIDs;\r\n                     });\r\n                 }, 1);\r\n             };\r\n\r\n             $scope.openAddVaccine = function (i) {\r\n                 var obj = {};\r\n                 obj[\"i\"] = i;\r\n                 obj[\"is\"] = $('#hfVaccineIDs').val();\r\n                 TPM.openWindowWithPost(\"/Vaccination/ParameterM/LocationSetting_AddVaccine.aspx\", \"LocationSetting_AddVaccine\", 910, 600, obj);\r\n             };\r\n\r\n             $scope.removeDay = function ($index) {\r\n                 $scope.VM.DayTime.splice($index, 1);\r\n                 //_.pullAt($scope.VM.DayTime[Day$index].timeAry, $index);\r\n             };\r\n\r\n\r\n             $scope.removeTime = function (Day$index, $index) {\r\n                 $scope.VM.DayTime[Day$index].timeAry.splice($index, 1);\r\n                 //_.pullAt($scope.VM.DayTime[Day$index].timeAry, $index);\r\n             };\r\n\r\n             $scope.fillssee = function (Day$index, $index,$event) {\r\n                 $scope.VM.DayTime[Day$index].timeAry[$index] = $event.target.value;\r\n                 //_.pullAt($scope.VM.DayTime[Day$index].timeAry, $index);\r\n             };\r\n}]);\r\n\r\nvar getIds = function (rtn) {\r\n    $(\"#tbVaccine\").val(rtn.text);\r\n    $(\"#hfVaccineIDs\").val(rtn.ids);\r\n    $('#refreshBtn').trigger('click');\r\n};\r\n\r\n"]}