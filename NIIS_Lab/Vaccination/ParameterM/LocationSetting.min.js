/*! NIIS 2016-05-09 */

$(function(){$(document).on("click","#addBtn",function(a){return location.href="/Vaccination/ParameterM/LocationSetting_Add.aspx",a.preventDefault(),!1}),$(document).on("click","#searchBtn",function(a){return a.preventDefault(),!1}),$(document).on("keydown","select",function(a){return 13==a.keyCode?($(window).focus(),a.preventDefault(),!1):void 0}),$(document).on("submit","#MyForm",function(a){return a.preventDefault(),!1})}),angular.module("MyApp",["PageM","ToolM","cfp.hotkeys"]).controller("MyController",["$scope","PageProvider","ToolProvider","$http","hotkeys",function(a,b,c,d,e){if(a.PM=b,a.TM={},a.VM={},a.VM.locationObj={},a.VM.locationObj.text="",a.VM.locationObj.id=0,a.VM.agencyObj={},a.VM.agencyObj.AN="",a.VM.agencyObj.I=0,a.VM.title="",a.VM.publishStateAry=[].concat(AgState),a.VM.CountyAry=[],a.VM.TownAry=[],a.VM.VillageAry=[],a.VM.publishState="",a.VM.SelectCounty="0",a.VM.SelectTown="0",a.VM.SelectVillage="0",a.doReset=function(){var b=document.querySelector("#ucOrgName");b.value="";var b=document.querySelector("#ucAgencyName");b.value="",a.VM.SelectCounty="0",a.VM.SelectTown="0",a.VM.SelectVillage="0",a.VM.publishState="",a.VM.agencyObj.AN="",a.VM.locationObj.id=0,$("#tmBlock").hide(),a.PM.reset(),$("#divFunc").hide(),window.setOrgID(defaultOrgID),window.setOrgName(defaultOrgName)},a.queryClick=function(){$("#btnSubmit").trigger("click"),document.querySelector("#MyForm").checkValidity()&&a.changePage(1)},a.changePage=function(b,c){$("#tmBlock").show(),$("#divFunc").show();var d=a.PM.genPageData(b),e={};e.oid=window.getOrgID(),""==window.getOrgName()&&(e.oid=0),e.ac=a.VM.SelectCounty,e.at=a.VM.SelectTown,e.av=a.VM.SelectVillage,e.an=window.getAgencyName(),e.as=a.VM.publishState,e=a.PM.filterPageData(d,e),a.PM.changePage("/Vaccination/ParameterM/LocationSettingOP.aspx",e,function(d){a.TM.data=d.message,a.$apply(function(){}),history.pushState&&void 0==c&&(b>1||location.hash.length>0?history.pushState({pageIndex:b},document.title,location.href.split("?")[0]+"?#h"):history.replaceState({pageIndex:1},document.title,location.href))})},e.add({combo:"enter",description:"Description goes here",allowIn:["INPUT","BUTTON","SELECT","TEXTAREA"],callback:function(b,c){var d=document.activeElement.type;"text"!=d&&"select-one"!=d||($("#btnSubmit").trigger("click"),document.querySelector("#MyForm").checkValidity()&&a.changePage(1))}}),a.BindCounty=function(){var b={};b.a="County",d({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.CountyAry=[].concat(b),a.VM.SelectCounty="0"):(a.VM.CountyAry=[],a.VM.SelectCounty="0")}).error(function(a,b,c,d){})},a.BindCounty(),a.SelectCountyChange=function(){var b={};b.a="Town",b.p=a.VM.SelectCounty,d({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.TownAry=[].concat(b),a.VM.SelectTown="0"):(a.VM.TownAry=[],a.VM.SelectTown="0"),a.VM.VillageAry=[],a.VM.SelectVillage="0"}).error(function(a,b,c,d){})},a.SelectTownChange=function(){var b={};b.a="Village",b.p=a.VM.SelectTown,d({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?a.VM.VillageAry=[].concat(b):a.VM.VillageAry=[],a.VM.SelectVillage="0"}).error(function(a,b,c,d){})},a.goDetail=function(b){var d=a.save()||"",e={};e.i=b.I,e.hash=encodeURIComponent(d),$(document).on("click","form"),c.doPOST("/Vaccination/ParameterM/LocationSetting_Detail.aspx",e,document.querySelector("#MyForm"))},a.goPrint=function(){var a='<section class="Content"><div class="listTb">';a+=$("#tmBlock").html(),a+="</section></div>",c.popPrint(a,["/css/design.css"])},a.save=function(){var b={};return b.OrgID=window.getOrgID(),b.OrgName=window.getOrgName(),b.AgencyID=window.getAgencyID(),b.AgencyName=window.getAgencyName(),b.publishState=a.VM.publishState,b.SelectCounty=a.VM.SelectCounty,b.SelectTown=a.VM.SelectTown,b.SelectVillage=a.VM.SelectVillage,b.pgNow=a.PM.pgNow,c.setData(b),JSON.stringify(b)},location.hash.length>0){var f=c.getData();a.VM.SelectCounty=f.SelectCounty,a.VM.SelectTown=f.SelectTown,a.VM.SelectVillage=f.SelectVillage,a.VM.publishState=f.publishState,$("#ucOrgID").val(f.OrgID),$("#ucOrgName").val(f.OrgName),$("#ucAgencyID").val(f.AgencyID),$("#ucAgencyName").val(f.AgencyName),a.changePage(f.pgNow)}else a.doReset()}]);
//# sourceMappingURL=LocationSetting.min.js.map