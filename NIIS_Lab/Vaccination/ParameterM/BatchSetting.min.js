/*! NIIS 2016-05-09 */

$(function(){$(document).on("click","#addBtn",function(a){return location.href="/Vaccination/RecordM/RegisterData_Add.aspx",a.preventDefault(),!1})});var onSelectSingleOrg=function(){var a=document.querySelector("section"),b=angular.element(a).scope();b.$apply(function(){b.changeVaccine()})};angular.module("MyApp",["FilterM","ToolM"]).controller("MyController",["$scope","ToolProvider","$http",function(a,b,c){a.VM={},a.VM.locationObj={},a.VM.locationObj.text="",a.VM.locationObj.id=0,a.VM.VaccineSelect=[],a.VM.selectCheck="0",a.TM=[],a.TM.tbData1=[],a.TM.tbData2=[],a.changeVaccine=function(){var b={};b.i=window.getOrgID(),c({method:"POST",url:"/Vaccination/ParameterM/BatchSetting_VaccineOP.aspx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b.list1=b.list1||[],b.list1.length>0?(a.VM.VaccineSelect=b.list1,a.VM.selectCheck=b.list1[0].I,$("#dv").show()):(a.VM.VaccineSelect=[],a.VM.selectCheck="0",a.TM.tbData1=[],$("#dv").hide()),a.TM.tbData1=[],a.TM.tbData2=[],a.TM.tbData1=b.list2,angular.forEach(a.TM.tbData1,function(b,c){b.DBVID>0&&a.TM.tbData2.push(b)})}).error(function(a,b,c,d){})},a.changeSelect=function(){a.VM.selectCheck=a.VM.selectCheck||0;var b={};b.i=a.VM.selectCheck,c({method:"POST",url:"/Vaccination/ParameterM/BatchSetting_xGetDefaultBatchVaccineOP.aspx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){a.TM.tbData1=b}).error(function(a,b,c,d){})},a.goSetting=function(b){if(console.log(b),0==b.DBVID){var d={};d.b=b.VBID,d.d=b.I,c({method:"POST",url:"/Vaccination/ParameterM/BatchSetting_AddOP.aspx",data:$.param(d),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(c,d,e,f){c.chk=c.chk||0,c.chk>0?(b.DBVID=c.chk,a.TM.tbData2.push(b)):alert("儲存失敗")}).error(function(a,b,c,d){})}else{var d={};d.d=b.DBVID,c({method:"POST",url:"/Vaccination/ParameterM/BatchSetting_RemoveOP.aspx",data:$.param(d),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(c,d,e,f){c.chk=c.chk||0,c.chk>0?(angular.forEach(a.TM.tbData2,function(c,d){c.DBVID==b.DBVID&&a.TM.tbData2.splice(d,1)}),b.DBVID=0):alert("儲存失敗")}).error(function(a,b,c,d){})}},a.goRemove=function(b){var d={};d.d=b.DBVID,c({method:"POST",url:"/Vaccination/ParameterM/BatchSetting_RemoveOP.aspx",data:$.param(d),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(c,d,e,f){c.chk=c.chk||0,c.chk>0?(angular.forEach(a.TM.tbData2,function(c,d){c.DBVID==b.DBVID&&a.TM.tbData2.splice(d,1)}),b.DBVID=0):alert("儲存失敗")}).error(function(a,b,c,d){})}}]);
//# sourceMappingURL=BatchSetting.min.js.map