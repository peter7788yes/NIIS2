/*! NIIS 2016-05-09 */

$(function(){$(document).on("click","#lastBtn",function(a){return history.go(-1),a.preventDefault(),!1}),$(document).on("click","#cancelBtn",function(a){return window.close(),a.preventDefault(),!1}),0==UP&&($("#SelectCounty").prop("disabled",!0),$("#SelectTown").prop("disabled",!0),$("#SelectVillage").prop("disabled",!0));stateAry.length;$.each(stateAry.reverse(),function(a,b){var c=$("<input class='cbs' type='checkbox'/>").val(b.EV),d=$("<label/>");d.append(c).append(b.EN),$("#td").prepend(d)}),$("#td").append("<br/><label><input id='cbOther'  type='checkbox'/>其他(請說明)：<input id='tbOther'  name='tbOther' class='text02' type='text'/>科</label>"),$(document).on("change","#tbOther",function(a){return""==$(this).val()?$("#cbOther").prop("checked",!1):$("#cbOther").prop("checked",!0),a.preventDefault(),!1}),$.each(tbOtherIDs.split(","),function(a,b){$("input:checkbox[value='"+b+"']").prop("checked",!0)}),$("#tbOther").val(tbOther),""==$("#tbOther").val()?$("#cbOther").prop("checked",!1):$("#cbOther").prop("checked",!0),$(document).on("submit","form",function(a){var b=[];$.each($(".cbs"),function(a,c){1==$(c).prop("checked")&&b.push($(c).val())}),$("#did").val(b),$("#daytime").val(encodeURIComponent(JSON.stringify(angular.element($("section")[0]).scope().VM.DayTime)))}),$("#rb1,#rb2,#rb3,#rb4,#rbB1,#rbB2").attr("required","required")});var fillssee=function(a){a.click()};angular.module("MyApp",["ToolM"]).controller("MyController",["$scope","ToolProvider","$http",function(a,b,c){a.VM={},a.VM.Vaccine="",a.VM.VaccineIDs="",a.VM.DayTime=[{d1:!1,d2:!1,d3:!1,d4:!1,d5:!1,d6:!1,d7:!1,timeAry:[{ss:"",ee:""}]}],ddListOutAry=ddListOutAry||[],ddListOutAry.length>0&&(a.VM.DayTime=ddListOutAry),a.VM.CountyAry=[{I:"0",N:"縣市"}].concat(countyJson),a.VM.TownAry=[{I:"0",N:"鄉鎮"}].concat(townJson),a.VM.VillageAry=[{I:"0",N:"村里"}].concat(villageJson),a.VM.SelectCounty=county,a.VM.SelectTown=town,a.VM.SelectVillage=village,a.VM.ddlAgState=AgencyState,$("#SelectCounty").show(),$("#SelectTown").show(),$("#SelectVillage").show(),a.BindCounty=function(){var b={};b.a="County",c({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.CountyAry=[{I:"0",N:"全部"}].concat(b),a.VM.SelectCounty="0"):(a.VM.CountyAry=[{I:"0",N:"全部"}],a.VM.SelectCounty="0")}).error(function(a,b,c,d){})},a.SelectCountyChange=function(){var b={};b.a="Town",b.p=$("#SelectCounty").val(),c({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.TownAry=[{I:"0",N:"全部"}].concat(b),a.VM.SelectTown="0"):(a.VM.TownAry=[{I:"0",N:"全部"}],a.VM.SelectTown="0"),a.VM.VillageAry=[{I:"0",N:"全部"}],a.VM.SelectVillage="0"}).error(function(a,b,c,d){})},a.SelectTownChange=function(){var b={};b.a="Village",b.p=$("#SelectTown").val(),c({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?a.VM.VillageAry=[{I:"0",N:"全部"}].concat(b):a.VM.VillageAry=[{I:"0",N:"全部"}],a.VM.SelectVillage="0"}).error(function(a,b,c,d){})},a.addDay=function(){a.VM.DayTime.push({d1:!1,d2:!1,d3:!1,d4:!1,d5:!1,d6:!1,d7:!1,timeAry:[{ss:"",ee:""}]})},a.addTime=function(b){a.VM.DayTime[b].timeAry.push({ss:"",ee:""})},a.clickDayTime=function(a,b,c){1==a?WdatePicker({maxDate:"#F{$dp.$D('ee"+b+c+"')}",el:"ss"+b+c,dateFmt:"HH:mm",lang:"zh-tw"}):WdatePicker({minDate:"#F{$dp.$D('ss"+b+c+"')}",el:"ee"+b+c,dateFmt:"HH:mm",lang:"zh-tw"})},a.refresh=function(){var b=$("#tbLocation").val(),c=$("#tbVaccine").val(),d=$("#hfVaccineIDs").val();setTimeout(function(){a.$apply(function(){a.VM.location=b,a.VM.Vaccine=c,a.VM.VaccineIDs=d})},1)},a.openAddVaccine=function(a){var c={};c.i=a,c.is=$("#hfVaccineIDs").val(),b.openWindowWithPost("/Vaccination/ParameterM/LocationSetting_AddVaccine.aspx","LocationSetting_AddVaccine",910,600,c)},a.removeDay=function(b){a.VM.DayTime.splice(b,1)},a.removeTime=function(b,c){a.VM.DayTime[b].timeAry.splice(c,1)},a.fillssee=function(b,c,d){a.VM.DayTime[b].timeAry[c]=d.target.value}}]);var getIds=function(a){$("#tbVaccine").val(a.text),$("#hfVaccineIDs").val(a.ids),$("#refreshBtn").trigger("click")};
//# sourceMappingURL=LocationSetting_Detail.min.js.map