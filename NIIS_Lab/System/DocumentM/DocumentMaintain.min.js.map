{"version":3,"sources":["DocumentMaintain.src.js"],"names":["$","angular","module","controller","$scope","PageProvider","TPM","hotkeys","PM","TM","VM","title","publishState","changePage","pageIndex","noHistory","show","pgData","genPageData","postData","filterPageData","data","message","$apply","add","combo","description","allowIn","callback","event","hotkey","focusType","document","activeElement","type","name","goDetail","record","save","obj","encodeURIComponent","doPOST","querySelector","doReset","hide","reset","goAdd","pgNow","setData","JSON","stringify","location","hash","length","getData"],"mappings":";;AAAAA,EAAE,cAGFC,QAAQC,OAAO,SAAU,QAAQ,UAAU,QAAS,gBAC1CC,WAAW,gBAAiB,SAAU,eAAgB,eAAgB,UAAW,SAAUC,EAAQC,EAAaC,EAAKC,GAkElH,GAjEAH,EAAOI,GAAKH,EACZD,EAAOK,MACPL,EAAOM,MACPN,EAAOM,GAAGC,MAAQ,GAClBP,EAAOM,GAAGE,aAAe,IAEzBR,EAAOS,WAAa,SAAUC,EAAWC,GACrCf,EAAE,YAAYgB,MACd,IAAIC,GAASb,EAAOI,GAAGU,YAAYJ,GAC/BK,IACJA,GAAY,EAAIf,EAAOM,GAAGC,MAC1BQ,EAAY,EAAIf,EAAOM,GAAGE,aAC1BO,EAAWf,EAAOI,GAAGY,eAAeH,EAAQE,GAC5Cf,EAAOI,GAAGK,WAAW,4CAA6CM,EAAU,SAAUE,GAClFjB,EAAOK,GAAGY,KAAOA,EAAKC,QACtBlB,EAAOmB,OAAO,iBAItBhB,EAAQiB,KACJC,MAAO,QACPC,YAAa,wBACbC,SAAU,QAAQ,SAAU,SAAU,YACtCC,SAAU,SAAUC,EAAOC,GACvB,GAAIC,GAAYC,SAASC,cAAcC,MACtB,QAAbH,GAAoC,cAAbA,GAA2C,UAAbA,GAAwD,aAA/BC,SAASC,cAAcE,OAErG/B,EAAOS,WAAW,MAK9BT,EAAOgC,SAAW,SAAUC,GACxB,GAAIhB,GAAOjB,EAAOkC,QAAU,GAExBC,IACJA,GAAO,EAAIF,EAAU,EACrBE,EAAU,KAAIC,mBAAmBnB,GACjCf,EAAImC,OAAO,iDAAkDF,EAAIP,SAASU,cAAc,aAG5FtC,EAAOuC,QAAU,WACbvC,EAAOM,GAAGE,aAAe,IACzBR,EAAOM,GAAGC,MAAQ,GAClBX,EAAE,YAAY4C,OACdxC,EAAOI,GAAGqC,SAGdzC,EAAO0C,MAAQ,WACX,GAAIzB,GAAOjB,EAAOkC,QAAU,GAExBC,IACJA,GAAU,KAAIC,mBAAmBnB,GACjCf,EAAImC,OAAO,8CAA+CF,EAAKP,SAASU,cAAc,aAG1FtC,EAAOkC,KAAO,WACV,GAAIjB,KAKJ,OAJAA,GAAY,MAAIjB,EAAOM,GAAGC,MAC1BU,EAAmB,aAAIjB,EAAOM,GAAGE,aACjCS,EAAY,MAAIjB,EAAOI,GAAGuC,MAC1BzC,EAAI0C,QAAQ3B,GACL4B,KAAKC,UAAU7B,IAGtB8B,SAASC,KAAKC,OAAS,EAAG,CAC1B,GAAIhC,GAAOf,EAAIgD,SACflD,GAAOM,GAAGC,MAAQU,EAAKV,MACvBP,EAAOM,GAAGE,aAAeS,EAAKT,aAC9BR,EAAOS,WAAWQ,EAAK0B,WAIvB3C,GAAOuC","file":"DocumentMaintain.min.js","sourcesContent":["$(function () {\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\",\"FilterM\",\"ToolM\", 'cfp.hotkeys'])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", \"ToolProvider\", \"hotkeys\", function ($scope, PageProvider,TPM, hotkeys) {\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.VM = {};\r\n             $scope.VM.title = \"\";\r\n             $scope.VM.publishState = \"0\";\r\n\r\n             $scope.changePage = function (pageIndex, noHistory) {\r\n                 $(\"#tmBlock\").show();\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n                 postData['d'] = $scope.VM.title;\r\n                 postData['p'] = $scope.VM.publishState;\r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 $scope.PM.changePage(\"/System/DocumentM/DocumentMaintainOP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n                     $scope.$apply(function () { });\r\n                 });\r\n             };\r\n\r\n             hotkeys.add({\r\n                 combo: 'enter',\r\n                 description: 'Description goes here',\r\n                 allowIn: ['INPUT',\"BUTTON\", 'SELECT', 'TEXTAREA'],\r\n                 callback: function (event, hotkey) {\r\n                     var focusType = document.activeElement.type;\r\n                     if (focusType == \"text\" || focusType == \"select-one\" || (focusType == \"button\" && document.activeElement.name == \"searchBtn\"))\r\n                     {\r\n                         $scope.changePage(1);\r\n                     }\r\n                 }\r\n             });\r\n\r\n             $scope.goDetail = function (record) {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj[\"i\"] = record[\"I\"];\r\n                 obj['hash'] = encodeURIComponent(data);\r\n                 TPM.doPOST(\"/System/DocumentM/DocumentMaintain_Detail.aspx\", obj,document.querySelector(\"#MyForm\"));\r\n             };\r\n\r\n             $scope.doReset = function () {\r\n                 $scope.VM.publishState = \"0\";\r\n                 $scope.VM.title = \"\";\r\n                 $(\"#tmBlock\").hide();\r\n                 $scope.PM.reset();\r\n             };\r\n\r\n             $scope.goAdd = function () {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj['hash'] = encodeURIComponent(data);\r\n                 TPM.doPOST(\"/System/DocumentM/DocumentMaintain_Add.aspx\", obj, document.querySelector(\"#MyForm\"));\r\n             };\r\n\r\n             $scope.save = function () {\r\n                 var data = {};\r\n                 data[\"title\"] = $scope.VM.title;\r\n                 data['publishState'] = $scope.VM.publishState;\r\n                 data['pgNow'] = $scope.PM.pgNow;\r\n                 TPM.setData(data);\r\n                 return JSON.stringify(data);\r\n             };\r\n\r\n             if (location.hash.length > 0) {\r\n                 var data = TPM.getData();\r\n                 $scope.VM.title = data.title;\r\n                 $scope.VM.publishState = data.publishState;\r\n                 $scope.changePage(data.pgNow);\r\n\r\n             }\r\n             else {\r\n                 $scope.doReset();\r\n             }\r\n}]);"]}