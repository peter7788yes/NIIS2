{"version":3,"sources":["RolePowerSetting.src.js"],"names":["$","sessionStorage","removeItem","angular","module","controller","$scope","PageProvider","TPM","hotkeys","PM","TM","VM","title","powerAry","concat","powerData","selectSystem","spc","changePage","pageIndex","noHistory","show","pgData","genPageData","postData","filterPageData","data","message","$apply","add","combo","description","allowIn","callback","event","hotkey","focusType","document","activeElement","type","changeName","record","save","obj","encodeURIComponent","doPOST","querySelector","changePower","changeSystem","changeAdd","pgNow","setData","JSON","stringify","location","hash","length","getData"],"mappings":";;AAAAA,EAAE,WACEC,eAAeC,WAAW,YAC1BD,eAAeC,WAAW,cAC1BD,eAAeC,WAAW,WAC1BD,eAAeC,WAAW,UAC1BD,eAAeC,WAAW,UAC1BD,eAAeC,WAAW,WAC1BD,eAAeC,WAAW,UAG9BC,QAAQC,OAAO,SAAU,QAAQ,QAAS,gBAChCC,WAAW,gBAAiB,SAAU,eAAgB,eAAgB,UAAW,SAAUC,EAAQC,EAAaC,EAAKC,GA8FlH,GA5FAH,EAAOI,GAAKH,EACZD,EAAOK,MACPL,EAAOM,MACPN,EAAOM,GAAGC,MAAQ,GAClBP,EAAOM,GAAGE,YAAcC,OAAOC,WAC/BV,EAAOM,GAAGK,aAAeC,IASzBZ,EAAOa,WAAa,SAAUC,EAAWC,GACrCrB,EAAE,YAAYsB,MACd,IAAIC,GAASjB,EAAOI,GAAGc,YAAYJ,GAC/BK,IACJA,GAAa,GAAInB,EAAOM,GAAGK,aAC3BQ,EAAWnB,EAAOI,GAAGgB,eAAeH,EAAQE,GAC5CnB,EAAOI,GAAGS,WAAW,yCAA0CM,EAAU,SAAUE,GAC/ErB,EAAOK,GAAGgB,KAAOA,EAAKC,QACtBtB,EAAOuB,OAAO,iBAatBpB,EAAQqB,KACJC,MAAO,QACPC,YAAa,wBACbC,SAAU,QAAQ,SAAU,SAAU,YACtCC,SAAU,SAAUC,EAAOC,GACvB,GAAIC,GAAYC,SAASC,cAAcC,IACtB,SAAbH,GAAoC,cAAbA,GAEvB/B,EAAOa,WAAW,MAO9Bb,EAAOmC,WAAa,SAAUC,GAC1B,GAAIf,GAAOrB,EAAOqC,QAAU,GAExBC,IACJA,GAAO,EAAIF,EAAU,EACrBE,EAAU,KAAIC,mBAAmBlB,GACjCnB,EAAIsC,OAAO,8CAA+CF,EAAKN,SAASS,cAAc,aAI1FzC,EAAO0C,YAAc,SAAUN,GAC3B,GAAIf,GAAOrB,EAAOqC,QAAU,GAExBC,IACJA,GAAO,EAAIF,EAAU,EACrBE,EAAU,KAAIC,mBAAmBlB,GACjCnB,EAAIsC,OAAO,mDAAoDF,EAAKN,SAASS,cAAc,aAI/FzC,EAAO2C,aAAe,SAAUP,GAC5BpC,EAAOa,WAAW,IAGtBb,EAAO4C,UAAY,SAAUR,GACzB,GAAIf,GAAOrB,EAAOqC,QAAU,GAExBC,IACJA,GAAQ,GAAItC,EAAOM,GAAGK,aACtB2B,EAAU,KAAIC,mBAAmBlB,GACjCnB,EAAIsC,OAAO,2CAA2CF,EAAIN,SAASS,cAAc,aAIrFzC,EAAOqC,KAAO,WACV,GAAIhB,KAIJ,OAHAA,GAAmB,aAAIrB,EAAOM,GAAGK,aACjCU,EAAY,MAAIrB,EAAOI,GAAGyC,MAC1B3C,EAAI4C,QAAQzB,GACL0B,KAAKC,UAAU3B,IAGtB4B,SAASC,KAAKC,OAAS,EAAG,CAC1B,GAAI9B,GAAOnB,EAAIkD,SACfpD,GAAOM,GAAGK,aAAeU,EAAKV,aAC9BX,EAAOa,WAAWQ,EAAKwB,WAGvB7C,GAAOa,WAAW","file":"RolePowerSetting.min.js","sourcesContent":["$(function () {\r\n    sessionStorage.removeItem(\"hfCateID\");\r\n    sessionStorage.removeItem(\"hfCateName\");\r\n    sessionStorage.removeItem(\"rbLevel\");\r\n    sessionStorage.removeItem(\"tbName\");\r\n    sessionStorage.removeItem(\"tbDesp\");\r\n    sessionStorage.removeItem(\"rbLevel\");\r\n    sessionStorage.removeItem(\"hash\");\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\",\"ToolM\", \"cfp.hotkeys\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", 'ToolProvider', \"hotkeys\", function ($scope, PageProvider,TPM, hotkeys) {\r\n\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.VM = {};\r\n             $scope.VM.title = \"\";\r\n             $scope.VM.powerAry = [].concat(powerData);\r\n             $scope.VM.selectSystem = spc;\r\n\r\n             //$(\"#tmBlock\").show();\r\n             //$scope.PM.changePage(\"\", tbData, function (data) {\r\n             //    $scope.TM.data = data.message;\r\n             //    history.replaceState({ \"pageIndex\": 1 }, document.title, location.href);\r\n             //});\r\n             //$scope.changePage(1);\r\n\r\n             $scope.changePage = function (pageIndex, noHistory) {\r\n                 $(\"#tmBlock\").show();\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n                 postData[\"rc\"] = $scope.VM.selectSystem; \r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 $scope.PM.changePage(\"/System/PowerM/RolePowerSettingOP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n                     $scope.$apply(function () { });\r\n\r\n                     //if (history.pushState && noHistory == undefined) {\r\n                     //    if (pageIndex > 1 || location.hash.length > 0) {\r\n                     //        history.pushState({ \"pageIndex\": pageIndex }, document.title, location.href.split(\"?\")[0] + \"?#h\");\r\n                     //    }\r\n                     //    else {\r\n                     //        history.replaceState({ \"pageIndex\": 1 }, document.title, location.href);\r\n                     //    }\r\n                     //}\r\n                 });\r\n             };\r\n\r\n             hotkeys.add({\r\n                 combo: 'enter',\r\n                 description: 'Description goes here',\r\n                 allowIn: ['INPUT',\"BUTTON\", 'SELECT', 'TEXTAREA'],\r\n                 callback: function (event, hotkey) {\r\n                     var focusType = document.activeElement.type;\r\n                     if (focusType == \"text\" || focusType == \"select-one\")\r\n                     {\r\n                         $scope.changePage(1);\r\n                     }\r\n                 }\r\n             });\r\n\r\n             //$scope.changePage(1);\r\n\r\n             $scope.changeName = function (record) {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj['i'] = record[\"I\"];\r\n                 obj['hash'] = encodeURIComponent(data);\r\n                 TPM.doPOST(\"/System/PowerM/RolePowerSetting_Detail.aspx\", obj, document.querySelector(\"#MyForm\"));\r\n                 //location.href = \"/System/PowerM/RolePowerSetting_Update.aspx?i=\" + record[\"I\"];\r\n             };\r\n\r\n             $scope.changePower = function (record) {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj['i'] = record[\"I\"];\r\n                 obj['hash'] = encodeURIComponent(data);\r\n                 TPM.doPOST(\"/System/PowerM/RolePowerSetting_ChangePower.aspx\", obj, document.querySelector(\"#MyForm\"));\r\n                 //location.href = \"/System/PowerM/RolePowerSetting_UpdatePower.aspx?i=\" + record[\"I\"];\r\n             };\r\n\r\n             $scope.changeSystem = function (record) {\r\n                 $scope.changePage(1);\r\n             };\r\n\r\n             $scope.changeAdd = function (record) {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj['sc'] = $scope.VM.selectSystem;\r\n                 obj['hash'] = encodeURIComponent(data);\r\n                 TPM.doPOST(\"/System/PowerM/RolePowerSetting_Add.aspx\",obj,document.querySelector(\"#MyForm\"));\r\n                 //location.href = \"/System/PowerM/RolePowerSetting_UpdatePower.aspx?i=\" + record[\"I\"];\r\n             };\r\n\r\n             $scope.save = function () {\r\n                 var data = {};\r\n                 data[\"selectSystem\"] = $scope.VM.selectSystem;\r\n                 data['pgNow'] = $scope.PM.pgNow;\r\n                 TPM.setData(data);\r\n                 return JSON.stringify(data);\r\n             };\r\n\r\n             if (location.hash.length > 0) {\r\n                 var data = TPM.getData();\r\n                 $scope.VM.selectSystem = data.selectSystem;\r\n                 $scope.changePage(data.pgNow);\r\n             }\r\n             else {\r\n                 $scope.changePage(1);\r\n             }\r\n}]);\r\n\r\n"]}