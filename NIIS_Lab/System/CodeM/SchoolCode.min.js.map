{"version":3,"sources":["SchoolCode.src.js"],"names":["$","angular","module","controller","$scope","PageProvider","TPM","$http","hotkeys","PM","TM","VM","AN","ChooseAddress","enableStateAry","concat","EnState","CountyAry","TownAry","VillageAry","enableState","SelectCounty","SelectTown","SelectVillage","BindCounty","postData","method","url","data","param","headers","Content-Type","success","status","config","length","SelectCountyChange","error","SelectTownChange","changePage","pageIndex","noHistory","show","pgData","genPageData","SN","filterPageData","message","$apply","add","combo","description","allowIn","callback","event","hotkey","focusType","document","activeElement","type","goDetail","record","pgNow","setData","obj","encodeURIComponent","JSON","stringify","doPOST","querySelector","doReset","hide","reset","getAddress","rtn","goAdd","location","hash","getData"],"mappings":"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","file":"SchoolCode.min.js","sourcesContent":["$(function () {\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\",\"ToolM\", \"cfp.hotkeys\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", \"ToolProvider\", \"$http\", \"hotkeys\", function ($scope, PageProvider,TPM, $http, hotkeys) {\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.VM = {};\r\n             \r\n             $scope.VM.AN = \"\";\r\n             $scope.VM.ChooseAddress = false;\r\n             $scope.VM.enableStateAry = [].concat(EnState);\r\n             $scope.VM.CountyAry = [];\r\n             $scope.VM.TownAry = [];\r\n             $scope.VM.VillageAry = [];\r\n\r\n             $scope.VM.enableState = \"\";\r\n             $scope.VM.SelectCounty = \"\";\r\n             $scope.VM.SelectTown = \"\";\r\n             $scope.VM.SelectVillage = \"\";\r\n\r\n             $scope.BindCounty = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"County\";\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n                    data = data || [];\r\n                    if (data.length > 0) {\r\n                        $scope.VM.CountyAry = [].concat(data);\r\n                        if (!$scope.VM.ChooseAddress) {\r\n                            $scope.VM.SelectCounty = \"\";\r\n                        }\r\n                        else\r\n                        {\r\n                            $scope.SelectCountyChange();\r\n                        }\r\n                    }\r\n                    else {\r\n                        $scope.VM.CountyAry = [];\r\n                        $scope.VM.SelectCounty = \"\";\r\n                    }\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.BindCounty();\r\n\r\n             $scope.SelectCountyChange = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"Town\";\r\n                 postData[\"p\"] = $scope.VM.SelectCounty;\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                .success(function (data, status, headers, config) {\r\n                    data = data || [];\r\n                    if (data.length > 0) {\r\n                        $scope.VM.TownAry = [].concat(data);;\r\n                        if (!$scope.VM.ChooseAddress) {\r\n                            $scope.VM.SelectTown = \"\";\r\n                        }\r\n                        else {\r\n                            $scope.SelectTownChange();\r\n                        }\r\n                    }\r\n                    else {\r\n                        $scope.VM.TownAry = [];\r\n                        $scope.VM.SelectTown = \"\";\r\n                    }\r\n                })\r\n                .error(function (data, status, headers, config) {\r\n                });\r\n             };\r\n\r\n             $scope.SelectTownChange = function () {\r\n                 var postData = {};\r\n                 postData[\"a\"] = \"Village\";\r\n                 postData[\"p\"] = $scope.VM.SelectTown;\r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/Ashx/SystemAreaCodeOP.ashx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n               .success(function (data, status, headers, config) {\r\n                   data = data || [];\r\n                   if (data.length > 0) {\r\n                       $scope.VM.VillageAry = [].concat(data);\r\n                       if (!$scope.VM.ChooseAddress) {\r\n                           $scope.VM.SelectVillage = \"\";\r\n                       }\r\n                       else\r\n                       {\r\n                           $scope.VM.ChooseAddress = false;\r\n                       }\r\n                   }\r\n                   else {\r\n                       $scope.VM.VillageAry = [];\r\n                   }\r\n               })\r\n               .error(function (data, status, headers, config) {\r\n               });\r\n             };\r\n\r\n             $scope.changePage = function (pageIndex, noHistory) {\r\n                 $(\"#tmBlock\").show();\r\n\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n\r\n                 postData[\"sc\"] = $scope.VM.SelectCounty;\r\n                 postData[\"st\"] = $scope.VM.SelectTown;\r\n                 postData[\"sv\"] = $scope.VM.SelectVillage;\r\n                 postData[\"sn\"] = $scope.VM.SN;\r\n                 postData[\"es\"] = $scope.VM.enableState;\r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 $scope.PM.changePage(\"/System/CodeM/SchoolCodeOP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n                     $scope.$apply(function () { });\r\n                 });\r\n             };\r\n\r\n             hotkeys.add({\r\n                 combo: 'enter',\r\n                 description: 'Description goes here',\r\n                 allowIn: ['INPUT', \"BUTTON\", 'SELECT', 'TEXTAREA'],\r\n                 callback: function (event, hotkey) {\r\n                     var focusType = document.activeElement.type;\r\n                     if (focusType == \"text\" || focusType == \"select-one\") {\r\n                         $scope.changePage(1);\r\n                     }\r\n                 }\r\n             });\r\n\r\n             $scope.goDetail = function (record) {\r\n                 var data = {};\r\n                 data[\"SelectCounty\"] = $scope.VM.SelectCounty;\r\n                 data[\"SelectTown\"] = $scope.VM.SelectTown;\r\n                 data[\"SelectVillage\"] = $scope.VM.SelectVillage;\r\n                 data[\"enableState\"] = $scope.VM.enableState;\r\n                 data[\"SN\"] = $scope.VM.SN;\r\n                 data['pgNow'] = $scope.PM.pgNow;\r\n                 TPM.setData(data);\r\n\r\n                 var obj = {};\r\n                 obj['i'] = record[\"I\"];\r\n                 obj['hash'] = encodeURIComponent(JSON.stringify(data));\r\n                 TPM.doPOST(\"/System/CodeM/SchoolCode_Detail.aspx\",obj,document.querySelector(\"#MyForm\"));\r\n             };\r\n\r\n             $scope.doReset = function () {\r\n                $scope.VM.SelectCounty=\"\";\r\n                $scope.VM.SelectTown = \"\";\r\n                $scope.VM.SelectVillage = \"\";\r\n                $scope.VM.SN = \"\";\r\n                $scope.VM.enableState = \"\";\r\n                $(\"#tmBlock\").hide();\r\n                $scope.PM.reset();\r\n             };\r\n\r\n             $scope.getAddress = function (record) {\r\n                 var rtn = \"\";\r\n                 if (record[\"SC\"]) rtn += record[\"SC\"];\r\n                 if (record[\"ST\"]) rtn += record[\"ST\"];\r\n                 if (record[\"SV\"]) rtn += record[\"SV\"];\r\n                 if (record[\"SA\"]) rtn += record[\"SA\"];\r\n                 return rtn;\r\n             };\r\n\r\n             $scope.goAdd = function () {\r\n                 var obj = {};\r\n                 TPM.doPOST(\"/System/CodeM/SchoolCode_Add.aspx\",obj,document.querySelector(\"#MyForm\"));\r\n             };\r\n\r\n             if (location.hash.length > 0) {\r\n                 var data = TPM.getData();\r\n                 $scope.VM.ChooseAddress=true;\r\n                 $scope.VM.SelectCounty = data.SelectCounty;\r\n                 $scope.VM.SelectTown = data.SelectTown;\r\n                 $scope.VM.SelectVillage = data.SelectVillage;\r\n                 $scope.VM.enableState = data.enableState;\r\n                 $scope.VM.SN = data.SN;\r\n                 $scope.changePage(data.pgNow);\r\n             }\r\n             else {\r\n                 $scope.doReset();\r\n             }\r\n}]);\r\n\r\n"]}