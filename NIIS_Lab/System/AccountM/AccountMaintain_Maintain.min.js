/*! NIIS 2016-05-09 */

$(function(){$(document).on("click","#lastBtn",function(a){return history.go(-1),a.preventDefault(),!1}),$("#tmBlock").show()}),angular.module("MyApp",["FilterM","ToolM"]).controller("MyController",["$scope","ToolProvider","$http","$filter",function(a,b,c,d){a.TM={},a.VM={},a.VM.Uname="",a.VM.Oname="",a.VM.fList=[],a.VM.fAry=fAry,a.VM.iAry=iAry;var e=0;angular.forEach(a.VM.fAry,function(b,c){var d={};d.F=b,d.I=a.VM.iAry[e],a.VM.fList.push(d),e++}),$("#tmBlock").show(),a.getCheck=function(b){var c="";return $.each(a.VM.checkAry,function(a,d){d.EV==b.C&&(c=d.EN)}),c},a.goDownload=function(a){var c={};c.i=iAry[a],b.openWindowWithPost("/System/AccountM/AccountMaintain_Maintain_DownloadOP.aspx","_blank",0,0,c)},a.goDelete=function(b,f){if(a.VM.fList.length<=1)return void alert("最少需要一個附檔，所以無法刪除");var g={};g.i=b.I,g.ui=e,c({method:"POST",url:"/System/AccountM/AccountCheck_Detail_DeleteDocFileOP.aspx",data:$.param(g),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(c,e,f,g){c.FileCount=c.FileCount||0,c.Chk=c.Chk||0,0==c.FileCount?alert("無附檔，刪除失敗"):1==c.FileCount?alert("最少需要一個附檔，所以無法刪除"):c.Chk>0?(alert("刪除成功"),a.VM.fList=d("filter")(a.VM.fList,{I:"!"+b.I}),a.$apply(function(){})):alert("刪除失敗")}).error(function(a,b,c,d){})}}]);
//# sourceMappingURL=AccountMaintain_Maintain.min.js.map