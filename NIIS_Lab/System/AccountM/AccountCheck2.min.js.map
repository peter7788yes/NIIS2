{"version":3,"sources":["AccountCheck2.src.js"],"names":["$","checkPWD","val1","val","val2","show","hide","document","on","e","preventDefault","angular","module","controller","$scope","PageProvider","TPM","hotkeys","PM","TM","VM","Oname","checkResultAry","concat","checkResultData","yearSeasonAry","yearSeasonData","selectCheckResult","selectYearSeason","changePage","pageIndex","pgData","genPageData","postData","Uname","replace","filterPageData","data","message","$apply","add","combo","description","allowIn","callback","event","hotkey","focusType","activeElement","type","openOrgs","record","popUpWindow","openDetail","save","obj","encodeURIComponent","sessionStorage","setItem","openWindowWithPost","openUpload","window","getOrgName","getOrgID","pgNow","setData","JSON","stringify","location","hash","length","getData","OrgID","OrgName","tbDate","doReset","setOrgID","defaultOrgID","setOrgName","defaultOrgName","reset","getCode","code","element","querySelector","value","text","focus","controllerElement","controllerScope","scope","locationObj"],"mappings":"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","file":"AccountCheck2.min.js","sourcesContent":["$(function () {\r\n    var checkPWD = function () {\r\n        var val1 = $(\"#tbPWD\").val();\r\n        var val2 = $(\"#tbPWD2\").val();\r\n        if (val1 != val2) {\r\n            $(\"#notPWD\").show();\r\n        }\r\n        else {\r\n            $(\"#notPWD\").hide();\r\n        }\r\n    };\r\n\r\n    $(document).on(\"blur\", \"#tbPWD\", function (e) {\r\n\r\n        checkPWD();\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"blur\", \"#tbPWD2\", function (e) {\r\n        checkPWD();\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n});\r\n\r\nangular.module(\"MyApp\", [\"PageM\",\"ToolM\", \"cfp.hotkeys\", \"FilterM\"])\r\n         .controller(\"MyController\", [\"$scope\", \"PageProvider\", \"ToolProvider\", \"hotkeys\", function ($scope, PageProvider, TPM, hotkeys) {\r\n             $scope.PM = PageProvider;\r\n             $scope.TM = {};\r\n             $scope.VM = {};\r\n             $scope.VM.Oname = \"\";\r\n             $scope.VM.checkResultAry = [].concat(checkResultData);\r\n             $scope.VM.yearSeasonAry = [].concat(yearSeasonData);\r\n             $scope.VM.selectCheckResult = \"\";\r\n             $scope.VM.selectYearSeason = \"\";\r\n\r\n             //$(\"#tmBlock\").show();\r\n             //$scope.PM.changePage(\"\", tbData, function (data) {\r\n             //    $scope.TM.data = data.message;\r\n             //    history.replaceState({ \"pageIndex\": 1 }, document.title, location.href);\r\n             //});\r\n\r\n             //$scope.changePage(1);\r\n\r\n             $scope.changePage = function (pageIndex) {\r\n                 $(\"#tmBlock\").show();\r\n                 var pgData = $scope.PM.genPageData(pageIndex);\r\n                 var postData = {};\r\n                 postData[\"an\"] = $scope.VM.Uname;\r\n                 postData[\"on\"] = $scope.VM.Oname;\r\n                 postData[\"cy\"] = $('#tbDate').val().replace(/年/ig, \"\");\r\n                 postData[\"ys\"] = $scope.VM.selectYearSeason;\r\n                 postData[\"cp\"] = $scope.VM.selectCheckResult;\r\n                 postData = $scope.PM.filterPageData(pgData, postData);\r\n                 $scope.PM.changePage(\"/System/AccountM/AccountCheck2OP.aspx\", postData, function (data) {\r\n                     $scope.TM.data = data.message;\r\n                     $scope.$apply(function () { });\r\n                 });\r\n             };\r\n\r\n             //$scope.changePage(1);\r\n\r\n             hotkeys.add({\r\n                 combo: 'enter',\r\n                 description: 'Description goes here',\r\n                 allowIn: ['INPUT', \"BUTTON\", 'SELECT', 'TEXTAREA'],\r\n                 callback: function (event, hotkey) {\r\n                     var focusType = document.activeElement.type;\r\n                     if (focusType == \"text\" || focusType == \"select-one\") {\r\n                         $scope.changePage(1);\r\n                     }\r\n                 }\r\n             });\r\n\r\n             $scope.openOrgs = function (record) {\r\n                 TPM.popUpWindow(\"/SelectSingleOrg.aspx\", \"SelectSingleOrg\", 620, 450);\r\n\r\n             };\r\n\r\n             $scope.openDetail = function (record) {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj['i'] = record[\"I\"];\r\n                 obj['hash'] = encodeURIComponent(data);\r\n                 sessionStorage.setItem(\"AccountCheck2_on\", record[\"CON\"]);\r\n                 sessionStorage.setItem(\"AccountCheck2_cy\", record[\"CY\"]);\r\n                 TPM.openWindowWithPost(\"/System/AccountM/AccountCheck2_Detail.aspx\", \"AccountCheck2_Detail\", 620, 450, obj);\r\n             };\r\n\r\n             $scope.openUpload = function (record) {\r\n                 var data = $scope.save() || \"\";\r\n\r\n                 var obj = {};\r\n                 obj['i'] = record[\"I\"];\r\n                 obj['on'] = window.getOrgName();\r\n                 obj['y'] = record[\"CY\"];\r\n                 TPM.openWindowWithPost(\"/System/AccountM/AccountCheck2_Upload.aspx\", \"AccountCheck2_Upload\", 620, 450, obj);\r\n             };\r\n\r\n             $scope.save = function () {\r\n                 var data = {};\r\n                 data[\"OrgID\"] = window.getOrgID();\r\n                 data[\"OrgName\"] = window.getOrgName();\r\n                 data['pgNow'] = $scope.PM.pgNow;\r\n                 data[\"selectCheckResult\"] = $scope.VM.selectCheckResult;\r\n                 data[\"Uname\"] = $scope.VM.Uname\r\n                 data[\"selectYearSeason\"] = $scope.VM.selectYearSeason;\r\n                 data[\"tbDate\"] = $('#tbDate').val().replace(/年/ig, \"\");\r\n                 \r\n                 TPM.setData(data);\r\n                 return JSON.stringify(data);\r\n             };\r\n\r\n             if (location.hash.length > 0) {\r\n                 var data = TPM.getData();\r\n                 $scope.VM.Uname = data.Uname;\r\n                 $(\"#ucOrgID\").val(data.OrgID);\r\n                 $(\"#ucOrgName\").val(data.OrgName);\r\n                 $('#tbDate').val(data.tbDate+'年');\r\n                 $scope.VM.selectYearSeason = data.selectYearSeason;\r\n                 $scope.VM.selectCheckResult = data.selectCheckResult;\r\n                 \r\n                 $scope.changePage(data.pgNow);\r\n             }\r\n             //else {\r\n             //    $scope.changePage(1);\r\n             //}\r\n\r\n             $scope.doReset = function () {\r\n                 $('#tbDate').val('');\r\n                 $scope.VM.selectCheckResult = \"\";\r\n                 $scope.VM.selectYearSeason = \"\";\r\n                 window.setOrgID(defaultOrgID);\r\n                 window.setOrgName(defaultOrgName);\r\n                 $(\"#tmBlock\").hide();\r\n                 $scope.PM.reset();\r\n             };\r\n\r\n}]);\r\n\r\n\r\nvar getCode = function (code) {\r\n    var element = document.querySelector('#tbLocation');\r\n    element.value = code.text;\r\n    element.focus();\r\n    var controllerElement = document.querySelector('section');\r\n    var controllerScope = angular.element(controllerElement).scope();\r\n    controllerScope.$apply(function () {\r\n        controllerScope.VM.locationObj = code;\r\n        controllerScope.VM.Oname = code.text;\r\n    });\r\n};"]}