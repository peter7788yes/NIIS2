{"version":3,"sources":["LeftMenu_tab.src.js"],"names":["$","heightLightAry","leftMenuOrigin","sessionStorage","getItem","data","myHtml","html","removeClass","each","dataObj","index","item","PageUrl","push","ID","PID","append","ModuleName","parent","length","children","addClass","css","setItem","document","on","e","self","this","url","attr","undefined","liAry","parents","setTimeout","moving","animate","scrollTop","offset","top","get","reverse","text","href","window","getElementById","src","preventDefault","p","trigger","changeMenuPath","pathname","purePathname","replace","isFound","isLoop","$myA","index2","item2","divElement","frames","getElementsByClassName","innerHTML","pathObjString","pathObj","JSON","parse","lastPage","lastPageID","menuPath","menuPathID","stringify"],"mappings":"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","file":"LeftMenu_tab.min.js","sourcesContent":["$(function () {\r\n    var heightLightAry = [];\r\n\r\n    var leftMenuOrigin = sessionStorage.getItem(\"leftMenuOrigin\");\r\n\r\n    if (leftMenuOrigin == data) {\r\n        var myHtml = sessionStorage.getItem(\"leftMenu\", data);\r\n        $(\"#ulRoot\").html(myHtml);\r\n        $(\"a\").removeClass(\"here\");\r\n        $(\"li\").removeClass(\"hereblock\");\r\n    }\r\n    else {\r\n        $.each(dataObj, function (index, item) {\r\n            //var myStyle = \"\";\r\n            if (item.PageUrl != \"\") {\r\n                //myStyle = \"color:blue;\";\r\n                heightLightAry.push(\"x\" + item.ID);\r\n            }\r\n\r\n            if (item.PID == 0) {\r\n                //$(\"#ulRoot\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\" style=\"' + myStyle + '\"' + ' pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n                $(\"#ulRoot\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\" pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n            }\r\n            else {\r\n                var parent = $(\"#x\" + item.PID + \" ul\");\r\n                if (parent.length == 0) {\r\n                    $(\"#x\" + item.PID).append('<ul class=\"line\"></ul>');\r\n                }\r\n                //$(\"#x\" + item.PID + \" ul:first\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\" style=\"' + myStyle + '\"' + ' pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n                $(\"#x\" + item.PID + \" ul:first\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\"  pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n            }\r\n        });\r\n\r\n        $.each($(\"li\"), function (index, item) {\r\n            if ($(item).children('ul').length != 0) {\r\n                $(item).addClass('less');\r\n            }\r\n        });\r\n    }\r\n\r\n    $.each(heightLightAry, function (index, item) {\r\n        $(\"#\" + item).children('a:first').css(\"color\", \"blue\");\r\n    });\r\n\r\n    //sessionStorage.removeItem(\"leftMenuOrigin\");\r\n    //sessionStorage.removeItem(\"leftMenu\");\r\n    sessionStorage.setItem(\"leftMenuOrigin\", data);\r\n    sessionStorage.setItem(\"leftMenu\", $(\"#ulRoot\").html());\r\n\r\n    $(document).on(\"click\", \"a\", function (e) {\r\n        var self = $(this);\r\n        var url = self.attr(\"pageurl\");\r\n        if (url == \"\" || url == undefined) {\r\n            return;\r\n        }\r\n        var myHtml = \"\";\r\n        var liAry = $(this).parents('li');\r\n\r\n        try {\r\n            setTimeout(function () {\r\n                if (moving == false) {\r\n                    moving = true;\r\n                    $('html, body').animate({\r\n                        scrollTop: self.offset().top - 200\r\n                    }, 1000, function () {\r\n                        moving = false;\r\n                    });\r\n                }\r\n            }, 0);\r\n        }\r\n        catch (e) {\r\n        }\r\n\r\n        //var liAry = $(this).closest('li');\r\n        $.each(liAry.get().reverse(), function (index, item) {\r\n            var PageUrl = $(item).children('a:first').attr(\"pageurl\");\r\n            var ModuleName = $(item).children('a:first').text();\r\n            var href = PageUrl == \"\" ? \"javascript:void(0);\" : PageUrl;\r\n            if (index != liAry.length - 1)\r\n                myHtml += '<a href=\"' + href + '\">' + ModuleName + \"</a>\";\r\n            else\r\n                myHtml += ModuleName;\r\n        });\r\n        //sessionStorage.removeItem(\"menuPath\");\r\n        //var lastPage = sessionStorage.getItem(\"menuPath\");\r\n        //if (lastPage !== undefined) {\r\n        //    sessionStorage.setItem(\"lastMenuPath\", lastPage);\r\n        //}\r\n\r\n        //sessionStorage.setItem(\"menuPath\", myHtml + '<img id=\"loading\" alt=\"載入中...\" src=\"/images/loading001.gif\" style=\"display:none;margin-left:5px;\" />');\r\n        //window.location.replace('url');\r\n        window.parent.document.getElementById('mainFrame').src = $(this).attr(\"pageurl\");\r\n        $(\"a\").removeClass(\"here\");\r\n        $(\"li\").removeClass(\"hereblock\");\r\n        $(this).addClass(\"here\");\r\n        $(this).parents('ul:first').parents('li:first').addClass(\"hereblock\");\r\n        //$(this).closest('ul').closest('li').addClass(\"hereblock\");\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \".add\", function (e) {\r\n        $(this).removeClass(\"add\");\r\n        $(this).addClass(\"less\");\r\n        $(this).children(\"ul:first\").removeClass(\"hidden\");\r\n        sessionStorage.setItem(\"leftMenu\", $(\"#ulRoot\").html());\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \".less\", function (e) {\r\n        $(this).removeClass(\"less\");\r\n        $(this).addClass(\"add\");\r\n        $(this).children(\"ul:first\").addClass(\"hidden\");\r\n        sessionStorage.setItem(\"leftMenu\", $(\"#ulRoot\").html());\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    if (p != \"\") {\r\n        $(\"a[pageurl='\" + p + \"']\").trigger(\"click\");\r\n    }\r\n});\r\n\r\nvar moving = false;\r\n\r\nvar changeMenuPath = function (pathname) {\r\n    pathname = pathname || \"\";\r\n    var purePathname = pathname.replace(/\\//g, \"\").replace(/\\./g, \"\").replace(/_/g, \"\").replace(/-/g, \"\");\r\n    var isFound = false;\r\n    var isLoop = true;\r\n\r\n    $.each(dataObj, function (index, item) {\r\n        if (isLoop == true && pathname == item.PageUrl) {\r\n            isFound = true;\r\n            var $myA = $('#x' + item.ID).children('a:first');\r\n            var self = $($myA);\r\n            $(\"a\").removeClass(\"here\");\r\n            $(\"li\").removeClass(\"hereblock\");\r\n            $myA.addClass(\"here\");\r\n            $myA.parents('ul:first').parents('li:first').addClass(\"hereblock\");\r\n\r\n            try {\r\n                setTimeout(function () {\r\n                    if (moving == false) {\r\n                        moving = true;\r\n                        $('html, body').animate({\r\n                            scrollTop: self.offset().top - 200\r\n                        }, 1000, function () {\r\n                            moving = false;\r\n                        });\r\n                    }\r\n                }, 0);\r\n            }\r\n            catch (e) {\r\n            }\r\n\r\n            var myHtml = \"\";\r\n            var liAry = $myA.parents('li');\r\n\r\n            $.each(liAry.get().reverse(), function (index2, item2) {\r\n                var PageUrl = $(item2).children('a:first').attr(\"pageurl\");\r\n                var ModuleName = $(item2).children('a:first').text();\r\n                var href = PageUrl == \"\" ? \"javascript:void(0);\" : PageUrl;\r\n                if (index2 != liAry.length - 1)\r\n                    myHtml += '<a href=\"' + href + '\">' + ModuleName + \"</a>\";\r\n                else\r\n                    myHtml += ModuleName;\r\n            });\r\n            // remeber last menupath\r\n            try {\r\n                var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                myHtml += '<img id=\"loading\" alt=\"載入中...\" src=\"/images/loading001.gif\" style=\"display:none;margin-left:5px;\" />'\r\n                //myHtml += '<img id=\"loading\" class=\"lazy\" data-original=\"/images/loading001.gif\"  style=\"display:none;margin-left:5px;\" />'\r\n                divElement.innerHTML = myHtml;\r\n                sessionStorage.setItem(\"menuPath\", myHtml);\r\n                sessionStorage.setItem(\"menuPathID\", item.ID);\r\n            }\r\n            catch (e) {\r\n            }\r\n            isLoop = false;\r\n        }\r\n    });\r\n\r\n    if (isFound == false) {\r\n        var pathObjString = sessionStorage.getItem(\"pathObjString\");\r\n        if (pathObjString != null) {\r\n            try {\r\n                var pathObj = JSON.parse(pathObjString);\r\n                if (pathObj[purePathname] == undefined) {\r\n                    var lastPage = sessionStorage.getItem(\"menuPath\");\r\n                    var lastPageID = sessionStorage.getItem(\"menuPathID\");\r\n                    var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                    divElement.innerHTML = lastPage;\r\n                    pathObj[purePathname] = {};\r\n                    pathObj[purePathname].menuPath = lastPage;\r\n                    pathObj[purePathname].menuPathID = lastPageID;\r\n                    sessionStorage.setItem(\"pathObjString\", JSON.stringify(pathObj));\r\n                }\r\n                else {\r\n                    var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                    divElement.innerHTML = pathObj[purePathname].menuPath;\r\n                    var $myA = $('#x' + pathObj[purePathname].menuPathID).children('a:first');\r\n                    $(\"a\").removeClass(\"here\");\r\n                    $(\"li\").removeClass(\"hereblock\");\r\n                    $myA.addClass(\"here\");\r\n                    $myA.parents('ul:first').parents('li:first').addClass(\"hereblock\");\r\n                    var self = $($myA);\r\n                    try {\r\n                        setTimeout(function () {\r\n                            if (moving == false) {\r\n                                moving = true;\r\n                                $('html, body').animate({\r\n                                    scrollTop: self.offset().top - 200\r\n                                }, 1000, function () {\r\n                                    moving = false;\r\n                                });\r\n                            }\r\n                        }, 0);\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        else {\r\n            try {\r\n                var pathObj = {};\r\n                var lastPage = sessionStorage.getItem(\"menuPath\");\r\n                var lastPageID = sessionStorage.getItem(\"menuPathID\");\r\n                var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                divElement.innerHTML = lastPage;\r\n                pathObj[purePathname] = {};\r\n                pathObj[purePathname].menuPath = lastPage;\r\n                pathObj[purePathname].menuPathID = lastPageID;\r\n                sessionStorage.setItem(\"pathObjString\", JSON.stringify(pathObj));\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n//$(function () {\r\n//    //$(\"img\").lazyload({ effect: \"fadeIn\" });\r\n//    $(\"img.lazy\").lazyload();\r\n//});"]}