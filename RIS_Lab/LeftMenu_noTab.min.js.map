{"version":3,"sources":["LeftMenu_noTab.src.js"],"names":["$","heightLightAry","leftMenuOrigin","sessionStorage","getItem","data","myHtml","html","removeClass","each","dataObj","index","item","PageUrl","push","ID","PID","append","ModuleName","parent","length","children","addClass","css","setItem","document","on","e","self","this","url","attr","undefined","parents","setTimeout","moving","animate","scrollTop","offset","top","window","getElementById","src","preventDefault","p","trigger","changeMenuPath","pathname","purePathname","replace","isFound","isLoop","$myA","liAry","get","reverse","index2","item2","text","divElement","frames","getElementsByClassName","innerHTML","pathObjString","pathObj","JSON","parse","lastPage","lastPageID","menuPath","menuPathID","stringify"],"mappings":";;AAAAA,EAAE,WACE,GAAIC,MAEAC,EAAiBC,eAAeC,QAAQ,iBAE5C,IAAIF,GAAkBG,KAAM,CACxB,GAAIC,GAASH,eAAeC,QAAQ,WAAYC,KAChDL,GAAE,WAAWO,KAAKD,GAClBN,EAAE,QAAQQ,YAAY,QACtBR,EAAE,MAAMQ,YAAY,iBAGpBR,GAAES,KAAKC,QAAS,SAAUC,EAAOC,GAO7B,GALoB,IAAhBA,EAAKC,SAELZ,EAAea,KAAK,IAAMF,EAAKG,IAGnB,GAAZH,EAAKI,IAGLhB,EAAE,WAAWiB,OAAO,YAAcL,EAAKG,GAAK,yCAA2CH,EAAKC,QAAU,KAAOD,EAAKM,WAAa,oBAE9H,CACD,GAAIC,GAASnB,EAAE,KAAOY,EAAKI,IAAM,MACZ,IAAjBG,EAAOC,QAEPpB,EAAE,KAAOY,EAAKI,KAAKC,OAAO,0BAG9BjB,EAAE,KAAOY,EAAKI,IAAM,aAAaC,OAAO,YAAcL,EAAKG,GAAK,yCAA2CH,EAAKC,QAAU,KAAOD,EAAKM,WAAa,mBAI3JlB,EAAES,KAAKT,EAAE,MAAO,SAAUW,EAAOC,GACQ,GAAjCZ,EAAEY,GAAMS,SAAS,MAAMD,QACvBpB,EAAEY,GAAMU,SAAS,SAK7BtB,GAAES,KAAKR,EAAgB,SAAUU,EAAOC,GACpCZ,EAAE,IAAMY,GAAMS,SAAS,cAAcE,IAAI,QAAS,UAKtDpB,eAAeqB,QAAQ,iBAAkBnB,MACzCF,eAAeqB,QAAQ,WAAYxB,EAAE,WAAWO,QAEhDP,EAAEyB,UAAUC,GAAG,QAAS,OAAQ,SAAUC,GACtC,GAAIC,GAAO5B,EAAE6B,MACTC,EAAMF,EAAKG,KAAK,UACpB,IAAW,IAAPD,GAAoBE,QAAPF,EAAjB,CAIY9B,EAAE6B,MAAMI,QAAQ,KAE5B,KACIC,WAAW,WACO,GAAVC,SACAA,QAAS,EACTnC,EAAE,cAAcoC,SACZC,UAAWT,EAAKU,SAASC,IAAM,KAChC,IAAM,WACLJ,QAAS,MAGlB,GAEP,MAAOR,IAgCP,MARAa,QAAOrB,OAAOM,SAASgB,eAAe,aAAaC,IAAM1C,EAAE6B,MAAME,KAAK,WACtE/B,EAAE,QAAQQ,YAAY,QACtBR,EAAE,MAAMQ,YAAY,aACpBR,EAAE6B,MAAMP,SAAS,QACjBtB,EAAE6B,MAAMI,QAAQ,YAAYA,QAAQ,YAAYX,SAAS,aAGzDK,EAAEgB,kBACK,KAGX3C,EAAEyB,UAAUC,GAAG,QAAS,OAAQ,SAAUC,GAMtC,MALA3B,GAAE6B,MAAMrB,YAAY,OACpBR,EAAE6B,MAAMP,SAAS,QACjBtB,EAAE6B,MAAMR,SAAS,YAAYb,YAAY,UACzCL,eAAeqB,QAAQ,WAAYxB,EAAE,WAAWO,QAChDoB,EAAEgB,kBACK,IAGX3C,EAAEyB,UAAUC,GAAG,QAAS,QAAS,SAAUC,GAMvC,MALA3B,GAAE6B,MAAMrB,YAAY,QACpBR,EAAE6B,MAAMP,SAAS,OACjBtB,EAAE6B,MAAMR,SAAS,YAAYC,SAAS,UACtCnB,eAAeqB,QAAQ,WAAYxB,EAAE,WAAWO,QAChDoB,EAAEgB,kBACK,IAGF,IAALC,GACA5C,EAAE,cAAgB4C,EAAI,MAAMC,QAAQ,UAI5C,IAAIV,SAAS,EAETW,eAAiB,SAAUC,GAC3BA,EAAWA,GAAY,EACvB,IAAIC,GAAeD,EAASE,QAAQ,MAAO,IAAIA,QAAQ,MAAO,IAAIA,QAAQ,KAAM,IAAIA,QAAQ,KAAM,IAC9FC,GAAU,EACVC,GAAS,CAyDb,IAvDAnD,EAAES,KAAKC,QAAS,SAAUC,EAAOC,GAC7B,GAAc,GAAVuC,GAAkBJ,GAAYnC,EAAKC,QAAS,CAC5CqC,GAAU,CACV,IAAIE,GAAOpD,EAAE,KAAOY,EAAKG,IAAIM,SAAS,cAClCO,EAAO5B,EAAEoD,EACbpD,GAAE,QAAQQ,YAAY,QACtBR,EAAE,MAAMQ,YAAY,aACpB4C,EAAK9B,SAAS,QACd8B,EAAKnB,QAAQ,YAAYA,QAAQ,YAAYX,SAAS,YAEtD,KACIY,WAAW,WACO,GAAVC,SACAA,QAAS,EACTnC,EAAE,cAAcoC,SACZC,UAAWT,EAAKU,SAASC,IAAM,KAChC,IAAM,WAELJ,QAAS,MAGlB,GAEP,MAAOR,IAGP,GAAIrB,GAAS,GACT+C,EAAQD,EAAKnB,QAAQ,KAEzBjC,GAAES,KAAK4C,EAAMC,MAAMC,UAAW,SAAUC,EAAQC,GAC5C,GACIvC,IADUlB,EAAEyD,GAAOpC,SAAS,cAAcU,KAAK,WAClC/B,EAAEyD,GAAOpC,SAAS,cAAcqC,OAI7CpD,IAFAkD,GAAUH,EAAMjC,OAAS,EAEf,8BAAgCF,EAAa,UAE7CA,GAIlB,KACI,GAAIyC,GAAanB,OAAOrB,OAAOqB,OAAOoB,OAAkB,UAAEpB,OAAOf,SAASoC,uBAAuB,QAAQ,EACzGvD,IAAU,0FAEVqD,EAAWG,UAAYxD,EACvBH,eAAeqB,QAAQ,WAAYlB,GACnCH,eAAeqB,QAAQ,aAAcZ,EAAKG,IAE9C,MAAOY,IAEPwB,GAAS,KAIF,GAAXD,EAAkB,CAClB,GAAIa,GAAgB5D,eAAeC,QAAQ,gBAC3C,IAAqB,MAAjB2D,EACA,IACI,GAAIC,GAAUC,KAAKC,MAAMH,EACzB,IAA6B/B,QAAzBgC,EAAQhB,GAA4B,CACpC,GAAImB,GAAWhE,eAAeC,QAAQ,YAClCgE,EAAajE,eAAeC,QAAQ,cACpCuD,EAAanB,OAAOrB,OAAOqB,OAAOoB,OAAkB,UAAEpB,OAAOf,SAASoC,uBAAuB,QAAQ,EACzGF,GAAWG,UAAYK,EACvBH,EAAQhB,MACRgB,EAAQhB,GAAcqB,SAAWF,EACjCH,EAAQhB,GAAcsB,WAAaF,EACnCjE,eAAeqB,QAAQ,gBAAiByC,KAAKM,UAAUP,QAEtD,CACD,GAAIL,GAAanB,OAAOrB,OAAOqB,OAAOoB,OAAkB,UAAEpB,OAAOf,SAASoC,uBAAuB,QAAQ,EACzGF,GAAWG,UAAYE,EAAQhB,GAAcqB,QAC7C,IAAIjB,GAAOpD,EAAE,KAAOgE,EAAQhB,GAAcsB,YAAYjD,SAAS,aAC/DrB,GAAE,QAAQQ,YAAY,QACtBR,EAAE,MAAMQ,YAAY,aACpB4C,EAAK9B,SAAS,QACd8B,EAAKnB,QAAQ,YAAYA,QAAQ,YAAYX,SAAS,YACtD,IAAIM,GAAO5B,EAAEoD,EACb,KACIlB,WAAW,WACO,GAAVC,SACAA,QAAS,EACTnC,EAAE,cAAcoC,SACZC,UAAWT,EAAKU,SAASC,IAAM,KAChC,IAAM,WACLJ,QAAS,MAGlB,GAEP,MAAOR,MAIf,MAAOA,QAIP,KACI,GAAIqC,MACAG,EAAWhE,eAAeC,QAAQ,YAClCgE,EAAajE,eAAeC,QAAQ,cACpCuD,EAAanB,OAAOrB,OAAOqB,OAAOoB,OAAkB,UAAEpB,OAAOf,SAASoC,uBAAuB,QAAQ,EACzGF,GAAWG,UAAYK,EACvBH,EAAQhB,MACRgB,EAAQhB,GAAcqB,SAAWF,EACjCH,EAAQhB,GAAcsB,WAAaF,EACnCjE,eAAeqB,QAAQ,gBAAiByC,KAAKM,UAAUP,IAE3D,MAAOrC","file":"LeftMenu_noTab.min.js","sourcesContent":["$(function () {\r\n    var heightLightAry = [];\r\n\r\n    var leftMenuOrigin = sessionStorage.getItem(\"leftMenuOrigin\");\r\n\r\n    if (leftMenuOrigin == data) {\r\n        var myHtml = sessionStorage.getItem(\"leftMenu\", data);\r\n        $(\"#ulRoot\").html(myHtml);\r\n        $(\"span\").removeClass(\"here\");\r\n        $(\"li\").removeClass(\"hereblock\");\r\n    }\r\n    else {\r\n        $.each(dataObj, function (index, item) {\r\n            //var myStyle = \"\";\r\n            if (item.PageUrl != \"\") {\r\n                //myStyle = \"color:blue;\";\r\n                heightLightAry.push(\"x\" + item.ID);\r\n            }\r\n\r\n            if (item.PID == 0) {\r\n                //$(\"#ulRoot\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\" style=\"' + myStyle + '\"' + ' pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n                //$(\"#ulRoot\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\" pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n                $(\"#ulRoot\").append('<li id=\"x' + item.ID + '\"><span class=\"leftReplaceA\" pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</span></li>');\r\n            }\r\n            else {\r\n                var parent = $(\"#x\" + item.PID + \" ul\");\r\n                if (parent.length == 0) {\r\n\r\n                    $(\"#x\" + item.PID).append('<ul class=\"line\"></ul>');\r\n                }\r\n                //$(\"#x\" + item.PID + \" ul:first\").append('<li id=\"x' + item.ID + '\"><a href=\"javascript:void(0);\" style=\"' + myStyle + '\"' + ' pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</a></li>');\r\n                $(\"#x\" + item.PID + \" ul:first\").append('<li id=\"x' + item.ID + '\"><span class=\"leftReplaceA\" pageurl=\"' + item.PageUrl + '\">' + item.ModuleName + '</span></li>');\r\n            }\r\n        });\r\n\r\n        $.each($(\"li\"), function (index, item) {\r\n            if ($(item).children('ul').length != 0) {\r\n                $(item).addClass('less');\r\n            }\r\n        });\r\n    }\r\n\r\n    $.each(heightLightAry, function (index, item) {\r\n        $(\"#\" + item).children('span:first').css(\"color\", \"blue\");\r\n    });\r\n\r\n    //sessionStorage.removeItem(\"leftMenuOrigin\");\r\n    //sessionStorage.removeItem(\"leftMenu\");\r\n    sessionStorage.setItem(\"leftMenuOrigin\", data);\r\n    sessionStorage.setItem(\"leftMenu\", $(\"#ulRoot\").html());\r\n\r\n    $(document).on(\"click\", \"span\", function (e) {\r\n        var self = $(this);\r\n        var url = self.attr(\"pageurl\");\r\n        if (url == \"\" || url == undefined) {\r\n            return;\r\n        }\r\n        var myHtml = \"\";\r\n        var liAry = $(this).parents('li');\r\n\r\n        try {\r\n            setTimeout(function () {\r\n                if (moving == false) {\r\n                    moving = true;\r\n                    $('html, body').animate({\r\n                        scrollTop: self.offset().top - 200\r\n                    }, 1000, function () {\r\n                        moving = false;\r\n                    });\r\n                }\r\n            }, 0);\r\n        }\r\n        catch (e) {\r\n\r\n        }\r\n\r\n        //var liAry = $(this).closest('li\r\n\r\n        //$.each(liAry.get().reverse(), function (index, item) {\r\n        //    var PageUrl = $(item).children('span:first').attr(\"pageurl\");\r\n        //    var ModuleName = $(item).children('span:first').text();\r\n        //    var href = PageUrl == \"\" ? \"javascript:void(0);\" : PageUrl;\r\n        //    if (index != liAry.length-1)\r\n        //        myHtml += '<a href=\"' + href + '\">' + ModuleName + \"</a>\";\r\n        //    else\r\n        //        myHtml += ModuleName;\r\n        //});\r\n\r\n        //sessionStorage.removeItem(\"menuPath\");\r\n        //var lastPage = sessionStorage.getItem(\"menuPath\");\r\n        //if (lastPage != undefined) {\r\n        //    sessionStorage.setItem(\"lastMenuPath\", lastPage);\r\n        //}\r\n\r\n        //sessionStorage.setItem(\"menuPath\", myHtml + '<img id=\"loading\" alt=\"載入中...\" src=\"/images/loading001.gif\" style=\"display:none;margin-left:5px;\" />');\r\n        //window.location.replace('url');\r\n        window.parent.document.getElementById('mainFrame').src = $(this).attr(\"pageurl\");\r\n        $(\"span\").removeClass(\"here\");\r\n        $(\"li\").removeClass(\"hereblock\");\r\n        $(this).addClass(\"here\");\r\n        $(this).parents('ul:first').parents('li:first').addClass(\"hereblock\");\r\n        //$(this).closest('ul').closest('li').addClass(\"hereblock\");\r\n\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \".add\", function (e) {\r\n        $(this).removeClass(\"add\");\r\n        $(this).addClass(\"less\");\r\n        $(this).children(\"ul:first\").removeClass(\"hidden\");\r\n        sessionStorage.setItem(\"leftMenu\", $(\"#ulRoot\").html());\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \".less\", function (e) {\r\n        $(this).removeClass(\"less\");\r\n        $(this).addClass(\"add\");\r\n        $(this).children(\"ul:first\").addClass(\"hidden\");\r\n        sessionStorage.setItem(\"leftMenu\", $(\"#ulRoot\").html());\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n\r\n    if (p != \"\") {\r\n        $(\"a[pageurl='\" + p + \"']\").trigger(\"click\");\r\n    }\r\n});\r\n\r\nvar moving = false;\r\n\r\nvar changeMenuPath = function (pathname) {\r\n    pathname = pathname || \"\";\r\n    var purePathname = pathname.replace(/\\//g, \"\").replace(/\\./g, \"\").replace(/_/g, \"\").replace(/-/g, \"\");\r\n    var isFound = false;\r\n    var isLoop = true;\r\n\r\n    $.each(dataObj, function (index, item) {\r\n        if (isLoop == true && pathname == item.PageUrl) {\r\n            isFound = true;\r\n            var $myA = $('#x' + item.ID).children('span:first');\r\n            var self = $($myA);\r\n            $(\"span\").removeClass(\"here\");\r\n            $(\"li\").removeClass(\"hereblock\");\r\n            $myA.addClass(\"here\");\r\n            $myA.parents('ul:first').parents('li:first').addClass(\"hereblock\");\r\n\r\n            try {\r\n                setTimeout(function () {\r\n                    if (moving == false) {\r\n                        moving = true;\r\n                        $('html, body').animate({\r\n                            scrollTop: self.offset().top - 200\r\n                        }, 1000, function () {\r\n                            // Animation complete.\r\n                            moving = false;\r\n                        });\r\n                    }\r\n                }, 0);\r\n            }\r\n            catch (e) {\r\n            }\r\n\r\n            var myHtml = \"\";\r\n            var liAry = $myA.parents('li');\r\n\r\n            $.each(liAry.get().reverse(), function (index2, item2) {\r\n                var PageUrl = $(item2).children('span:first').attr(\"pageurl\");\r\n                var ModuleName = $(item2).children('span:first').text();\r\n                var href = PageUrl == \"\" ? \"javascript:void(0);\" : PageUrl;\r\n                if (index2 != liAry.length - 1)\r\n                    //myHtml += '<a href=\"' + href + '\">' + ModuleName + \"</a>\";\r\n                    myHtml += '<span class=\"pathReplaceA\">' + ModuleName + \"</span>\";\r\n                else\r\n                    myHtml += ModuleName;\r\n            });\r\n\r\n            // remeber last menupath\r\n            try {\r\n                var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                myHtml += '<img id=\"loading\" src=\"/images/loading001.gif\" style=\"display:none;margin-left:5px;\" />'\r\n                //myHtml += '<img id=\"loading\" class=\"lazy\" data-original=\"/images/loading001.gif\"  style=\"display:none;margin-left:5px;\" />'\r\n                divElement.innerHTML = myHtml;\r\n                sessionStorage.setItem(\"menuPath\", myHtml);\r\n                sessionStorage.setItem(\"menuPathID\", item.ID);\r\n            }\r\n            catch (e) {\r\n            }\r\n            isLoop = false;\r\n        }\r\n    });\r\n\r\n    if (isFound == false) {\r\n        var pathObjString = sessionStorage.getItem(\"pathObjString\");\r\n        if (pathObjString != null) {\r\n            try {\r\n                var pathObj = JSON.parse(pathObjString);\r\n                if (pathObj[purePathname] == undefined) {\r\n                    var lastPage = sessionStorage.getItem(\"menuPath\");\r\n                    var lastPageID = sessionStorage.getItem(\"menuPathID\");\r\n                    var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                    divElement.innerHTML = lastPage;\r\n                    pathObj[purePathname] = {};\r\n                    pathObj[purePathname].menuPath = lastPage;\r\n                    pathObj[purePathname].menuPathID = lastPageID;\r\n                    sessionStorage.setItem(\"pathObjString\", JSON.stringify(pathObj));\r\n                }\r\n                else {\r\n                    var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                    divElement.innerHTML = pathObj[purePathname].menuPath;\r\n                    var $myA = $('#x' + pathObj[purePathname].menuPathID).children('span:first');\r\n                    $(\"span\").removeClass(\"here\");\r\n                    $(\"li\").removeClass(\"hereblock\");\r\n                    $myA.addClass(\"here\");\r\n                    $myA.parents('ul:first').parents('li:first').addClass(\"hereblock\");\r\n                    var self = $($myA);\r\n                    try {\r\n                        setTimeout(function () {\r\n                            if (moving == false) {\r\n                                moving = true;\r\n                                $('html, body').animate({\r\n                                    scrollTop: self.offset().top - 200\r\n                                }, 1000, function () {\r\n                                    moving = false;\r\n                                });\r\n                            }\r\n                        }, 0);\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        else {\r\n            try {\r\n                var pathObj = {};\r\n                var lastPage = sessionStorage.getItem(\"menuPath\");\r\n                var lastPageID = sessionStorage.getItem(\"menuPathID\");\r\n                var divElement = window.parent.window.frames[\"mainFrame\"].window.document.getElementsByClassName('path')[0];\r\n                divElement.innerHTML = lastPage;\r\n                pathObj[purePathname] = {};\r\n                pathObj[purePathname].menuPath = lastPage;\r\n                pathObj[purePathname].menuPathID = lastPageID;\r\n                sessionStorage.setItem(\"pathObjString\", JSON.stringify(pathObj));\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n//$(function () {\r\n//    //$(\"img\").lazyload({ effect: \"fadeIn\" });\r\n//    $(\"img.lazy\").lazyload();\r\n//});"]}