{"version":3,"sources":["DocumentMaintain_Detail.src.js"],"names":["$","document","on","e","history","go","preventDefault","angular","module","controller","$scope","$filter","$http","VM","i","fileList","goDelete","item","index","length","alert","postData","F","method","url","data","param","headers","Content-Type","success","status","config","FileCount","Chk","$apply","error"],"mappings":";;AAAAA,EAAE,WACEA,EAAEC,UAAUC,GAAG,QAAS,WAAY,SAAUC,GAG1C,MAFAC,SAAQC,GAAG,IACXF,EAAEG,kBACK,MAKfC,QAAQC,OAAO,YACLC,WAAW,gBAAiB,SAAU,UAAW,QAAS,SAAUC,EAAQC,EAAQC,GAEjFF,EAAOG,MACPH,EAAOG,GAAGC,EAAIA,EACdJ,EAAOG,GAAGE,YACVL,EAAOG,GAAGE,SAAWA,SAErBL,EAAOM,SAAW,SAAUC,EAAKC,GAE7B,GAAIR,EAAOG,GAAGE,SAASI,QAAS,EAE5B,WADAC,OAAM,kBAIV,IAAIC,KACJA,GAAY,EAAIJ,EAAKK,EACrBD,EAAY,EAAIX,EAAOG,GAAGC,EAE1BF,GACIW,OAAQ,OACRC,IAAK,0DACLC,KAAMzB,EAAE0B,MAAML,GACdM,SAAWC,eAAgB,uCAE9BC,QAAQ,SAAUJ,EAAMK,EAAQH,EAASI,GACtCN,EAAKO,UAAYP,EAAKO,WAAW,EACjCP,EAAKQ,IAAKR,EAAKQ,KAAK,EACD,GAAhBR,EAAKO,UACJZ,MAAM,YAEiB,GAAlBK,EAAKO,UACVZ,MAAM,mBAIHK,EAAKQ,IAAI,GAERb,MAAM,QACNV,EAAOG,GAAGE,SAAWJ,EAAQ,UAAUD,EAAOG,GAAGE,UAAYO,EAAG,IAAML,EAAKK,IAC3EZ,EAAOwB,OAAO,eAIdd,MAAM,UAIhBe,MAAM,SAAUV,EAAMK,EAAQH,EAASI","file":"DocumentMaintain_Detail.min.js","sourcesContent":["$(function () {\r\n    $(document).on(\"click\", \"#lastBtn\", function (e) {\r\n        history.go(-1);\r\n        e.preventDefault();\r\n        return false;\r\n    });\r\n});\r\n\r\n\r\nangular.module(\"MyApp\", [])\r\n         .controller(\"MyController\", [\"$scope\", '$filter' ,'$http', function ($scope, $filter,$http) {\r\n\r\n             $scope.VM = {};\r\n             $scope.VM.i = i;\r\n             $scope.VM.fileList = [];\r\n             $scope.VM.fileList = fileList;\r\n\r\n             $scope.goDelete = function (item,index) {\r\n\r\n                 if ($scope.VM.fileList.length <=1) {\r\n                     alert(\"最少需要一個附檔，所以無法刪除\");\r\n                     return;\r\n                 }\r\n\r\n                 var postData = {};\r\n                 postData[\"i\"] = item.F;\r\n                 postData[\"d\"] = $scope.VM.i; \r\n\r\n                 $http({\r\n                     method: 'POST',\r\n                     url: \"/System/DocumentM/DocumentMaintain_DeleteDocFileOP.aspx\",\r\n                     data: $.param(postData),\r\n                     headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n                 })\r\n                 .success(function (data, status, headers, config) {\r\n                     data.FileCount = data.FileCount||0;\r\n                     data.Chk =data.Chk||0;\r\n                     if(data.FileCount==0){\r\n                         alert(\"無附檔，刪除失敗\");\r\n                     }\r\n                     else if (data.FileCount == 1) {\r\n                         alert(\"最少需要一個附檔，所以無法刪除\");\r\n                     }\r\n                     else\r\n                     {\r\n                         if(data.Chk>0)\r\n                         {\r\n                             alert(\"刪除成功\");\r\n                             $scope.VM.fileList = $filter('filter')($scope.VM.fileList, { F: '!' + item.F });\r\n                             $scope.$apply(function () { });\r\n                         }\r\n                         else\r\n                         {\r\n                             alert(\"刪除失敗\");\r\n                         }\r\n                     }\r\n                 })\r\n                  .error(function (data, status, headers, config) {\r\n                  });\r\n             };\r\n\r\n}]);"]}