/*! NIIS 2016-04-13 */

$(function(){}),angular.module("MyApp",["PageM","ToolM","cfp.hotkeys"]).controller("MyController",["$scope","PageProvider","ToolProvider","$http","hotkeys",function(a,b,c,d,e){if(a.PM=b,a.TM={},a.VM={},a.VM.AN="",a.VM.ChooseAddress=!1,a.VM.enableStateAry=[].concat(EnState),a.VM.CountyAry=[],a.VM.TownAry=[],a.VM.VillageAry=[],a.VM.enableState="0",a.VM.SelectCounty="0",a.VM.SelectTown="0",a.VM.SelectVillage="0",a.BindCounty=function(){var b={};b.a="County",d({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.CountyAry=[].concat(b),a.VM.ChooseAddress?a.SelectCountyChange():a.VM.SelectCounty="0"):(a.VM.CountyAry=[],a.VM.SelectCounty="0")}).error(function(a,b,c,d){})},a.BindCounty(),a.SelectCountyChange=function(){var b={};b.a="Town",b.p=a.VM.SelectCounty,d({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.TownAry=[].concat(b),a.VM.ChooseAddress?a.SelectTownChange():a.VM.SelectTown="0"):(a.VM.TownAry=[],a.VM.SelectTown="0")}).error(function(a,b,c,d){})},a.SelectTownChange=function(){var b={};b.a="Village",b.p=a.VM.SelectTown,d({method:"POST",url:"/Ashx/SystemAreaCodeOP.ashx",data:$.param(b),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b,c,d,e){b=b||[],b.length>0?(a.VM.VillageAry=[].concat(b),a.VM.ChooseAddress?a.VM.ChooseAddress=!1:a.VM.SelectVillage="0"):a.VM.VillageAry=[]}).error(function(a,b,c,d){})},a.changePage=function(b,c){$("#tmBlock").show();var d=a.PM.genPageData(b),e={};e.sc=a.VM.SelectCounty,e.st=a.VM.SelectTown,e.sv=a.VM.SelectVillage,e.sn=a.VM.SN,e.es=a.VM.enableState,e=a.PM.filterPageData(d,e),a.PM.changePage("/System/CodeM/SchoolCodeOP.aspx",e,function(b){a.TM.data=b.message,a.$apply(function(){})})},e.add({combo:"enter",description:"Description goes here",allowIn:["INPUT","BUTTON","SELECT","TEXTAREA"],callback:function(b,c){var d=document.activeElement.type;"text"!=d&&"select-one"!=d||a.changePage(1)}}),a.goDetail=function(b){var d={};d.SelectCounty=a.VM.SelectCounty,d.SelectTown=a.VM.SelectTown,d.SelectVillage=a.VM.SelectVillage,d.enableState=a.VM.enableState,d.SN=a.VM.SN,d.pgNow=a.PM.pgNow,c.setData(d);var e={};e.i=b.I,e.hash=encodeURIComponent(JSON.stringify(d)),c.doPOST("/System/CodeM/SchoolCode_Detail.aspx",e,document.querySelector("#MyForm"))},a.doReset=function(){a.VM.SelectCounty="0",a.VM.SelectTown="0",a.VM.SelectVillage="0",a.VM.SN="",a.VM.enableState="0",a.changePage(1)},a.getAddress=function(a){var b="";return a.SC&&(b+=a.SC),a.ST&&(b+=a.ST),a.SV&&(b+=a.SV),a.SA&&(b+=a.SA),b},a.goAdd=function(){var a={};c.doPOST("/System/CodeM/SchoolCode_Add.aspx",a,document.querySelector("#MyForm"))},location.hash.length>0){var f=c.getData();a.VM.ChooseAddress=!0,a.VM.SelectCounty=f.SelectCounty,a.VM.SelectTown=f.SelectTown,a.VM.SelectVillage=f.SelectVillage,a.VM.enableState=f.enableState,a.VM.SN=f.SN,a.changePage(f.pgNow)}else a.changePage(1)}]);
//# sourceMappingURL=SchoolCode.min.js.map